!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="57b422ef-2221-428e-aafc-26f3ddc2629b",e._sentryDebugIdIdentifier="sentry-dbid-57b422ef-2221-428e-aafc-26f3ddc2629b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"32a42889ebe2aa09b8da6c8c91130ec317750d45"},(()=>{"use strict";var e,t,n,r={15699:(e,t,n)=>{n.d(t,{Sf:()=>u,ZY:()=>d,ed:()=>f,ex:()=>p,gH:()=>h,zy:()=>m});var r=n(15861),a=n(64687),o=n.n(a),i=n(76756),s=n(53979),c=n(38856),l=new i.mQ({env:(0,c.a)(),name:"chrome API"});function d(e){return new Promise((function(t){chrome.windows.getLastFocused((function(n){e?e(n):t(n)}))}))}var u=function(){return"undefined"!=typeof chrome&&chrome.runtime.getManifest?chrome.runtime.getManifest().version:"0.0.0"},f=function(e,t){chrome.windows.get(e,t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{windowTypes:["normal"]};chrome.windows.onFocusChanged.hasListener(e)||chrome.windows.onFocusChanged.addListener(e,t)},h=function(e){chrome.windows.onFocusChanged.removeListener(e)},m=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Oe)(t);case 2:if(n=e.sent,!(r=n.find((function(e){return e.active})))){e.next=8;break}return e.abrupt("return",new Promise((function(e){chrome.tabs.sendMessage(Number(r.id),{text:"report_webpage_content"},(function(t){l.info("getWebpageContentOfAnActiveTab -> content \n",null!=t?t:"NO EXTRACTABLE CONTENT FOUND!"),e(null!=t?t:"")}))})));case 8:return l.error("Error: You've requested webpage content of an active tab, but there's no active tab!"),e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},60243:(e,t,n)=>{n.d(t,{$p:()=>y,Ad:()=>O,CZ:()=>g,Fl:()=>v,G1:()=>l,MW:()=>x,OF:()=>C,Re:()=>j,SI:()=>u,TG:()=>w,UK:()=>k,_t:()=>f,cG:()=>c,f4:()=>m,kr:()=>b,rV:()=>p,vb:()=>h});var r,a,o=n(89062),i=n(4942),s=n(56336),c={ORGANIZE_TABS:"organize-tabs"},l=(0,i.Z)({},c.ORGANIZE_TABS,"organize_tabs"),d=(0,i.Z)({},c.ORGANIZE_TABS,Boolean(null===(r=opr.shodanPrivate)||void 0===r?void 0:r.startRecording)&&Boolean(null===(a=opr.shodanPrivate)||void 0===a?void 0:a.stopRecording)),u=Object.values(c).reduce((function(e,t){return d[t]?[].concat((0,o.Z)(e),[t]):e}),[]),f={ACCOUNTLESS:"accountless",AI_PROMPTS_CLI2:"ai_prompts_cli2",BROWSER_DATA_ACCESS:"browser_data_access",CHAT_SUMMARY:"chat_summary",CLI2:"cli2",COMPOSE:"compose",HIGHLIGHTER:"highlighter",LINKIFY2:"linkify2",LINKIFY3:"linkify3",OPEN_AI_PROMPTS:"open_ai_prompts",PINBOARD:"pinboard",SCREENSHOTTER:"screenshotter",SETTINGS2:"settings2",SIA:"sia",SOURCE_LINKS:"source_links",USE_WEBPAGE_CONTEXT:"use_webpage_context",VOICE_READING:"voice_reading",VQA:"vqa",WEBPAGE_CONTENT:"webpage_content"},p=!1,h=["ar"],m=15*s.EB,v="",g="",x=25,b=8,w=200,y="opera developer",j=function(e,t){v="conversation-data-".concat(e,"-v").concat(3).concat(t?"-".concat("private"):"")},C=100,k=function(e){g="chat-warning-".concat(e)},O={GPT:"GPT-4o",GEMINI:"Gemini 1.5",IMAGEN:"Imagen 3"}},53744:(e,t,n)=>{n.d(t,{F0:()=>u,L1:()=>l,O8:()=>s,OZ:()=>d,W6:()=>f,hq:()=>c});var r=n(93324),a=n(67294),o=n(23586),i=n(76756),s=function(e,t){(0,a.useEffect)((function(){var n=function(n){var r=e.current,a=n.target;null!==r&&null!==a&&document.body.contains(r)&&document.body.contains(a)&&(r.contains(a)||t())};return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}),[t,e])},c=function(){var e=(0,a.useState)(i.$M),t=(0,r.Z)(e,2),n=t[0],o=t[1],s=(0,i.oH)().isAriaInTabView;return(0,a.useEffect)((function(){if(s){var e=window.location.hash.split("/"),t=(0,r.Z)(e,2)[1];o(t||i.$M)}else{var n=window.localStorage.getItem(i.re)||i.$M;o(n)}}),[s]),(0,a.useEffect)((function(){s||window.localStorage.setItem(i.re,n)}),[n,s]),{conversationId:n,updateConversationId:o}},l=function(){return{isCurrentThemeDark:(0,o.YWL)().isDarkThemeEnabled}},d=function(e,t,n){var o=(0,a.useState)(!1),i=(0,r.Z)(o,2),s=i[0],c=i[1],l=(0,a.useState)(!0),d=(0,r.Z)(l,2),u=d[0],f=d[1];return(0,a.useEffect)((function(){var r=function(){var r;if(null!=e&&e.current&&null!=t&&null!==(r=t.current)&&void 0!==r&&r.lastChild){var a,o=e.current.getBoundingClientRect(),i=(null===(a=t.current)||void 0===a?void 0:a.lastChild).getBoundingClientRect();o&&i&&(c(o.top<i.top+("bottom"===n?i.height:0)),f(!s))}};return r(),window.addEventListener("scroll",r),window.addEventListener("resize",r),function(){window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}})),{isListUnder:s,isListAbove:u}},u=function(){var e=(0,a.useRef)(null),t=(0,a.useState)(!1),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)(!1),l=(0,r.Z)(c,2),d=l[0],u=l[1],f=function(){if(e.current){var t=e.current,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;s(n>0),u(n+a<r)}};return(0,a.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("scroll",f),setTimeout(f,100*i.KP),function(){return t.removeEventListener("scroll",f)}}),[]),{showTopBorder:o,showBottomBorder:d,containerRef:e}};function f(e){var t=(0,a.useRef)(e);return(0,a.useEffect)((function(){t.current=e})),(0,a.useMemo)((function(){return function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}}),[])}},7226:(e,t,n)=>{n.d(t,{$T:()=>o.$T,Bh:()=>o.Bh,EK:()=>o.EK,FM:()=>r.F,J$:()=>s.J,Mf:()=>i.M,OZ:()=>a.OZ,Pv:()=>a.Pv,VZ:()=>a.VZ,Vy:()=>o.Vy,e1:()=>o.e1,f6:()=>a.f6,ff:()=>a.ff,ix:()=>a.ix,n5:()=>a.n5,oA:()=>o.oA,qP:()=>a.qP,vy:()=>a.vy,xM:()=>a.xM,z4:()=>o.z4,zT:()=>r.z});var r=n(74721),a=n(76453),o=n(22055),i=(n(94361),n(57112)),s=n(86744)},22055:(e,t,n)=>{n.d(t,{$T:()=>x,Bh:()=>g,EK:()=>w,Vy:()=>h,e1:()=>y,oA:()=>b,z4:()=>m});var r,a,o=n(15861),i=n(64687),s=n.n(i),c=n(76756),l=n(38856),d=new c.mQ({env:(0,l.a)(),name:"SHODAN API"}),u="NEW SHODAN API NOT SUPPORTED",f="isCommandLineVisible"in((null===(r=opr)||void 0===r?void 0:r.shodanPrivate)||{}),p="onSendImageToAriaClicked"in((null===(a=opr)||void 0===a?void 0:a.shodanPrivate)||{});function h(){opr.shodanPrivate.closeCommandLine()}function m(){return v.apply(this,arguments)}function v(){return(v=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f?(t=function(e){e||opr.shodanPrivate.showCommandLine()},f?opr.shodanPrivate.isCommandLineVisible(t):d.info(u)):d.info(u);case 1:case"end":return e.stop()}var t}),e)})))).apply(this,arguments)}function g(){return"switchToNormalWindow"in opr.shodanPrivate&&"AriaRequestSource"in opr.shodanPrivate}function x(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(g()){var t=e?opr.shodanPrivate.AriaRequestSource.COMMAND_LINE:opr.shodanPrivate.AriaRequestSource.SIDEBAR_PANEL;opr.shodanPrivate.switchToNormalWindow(t)}else d.info(u,"switchToNormalWindow")}function b(e){p?opr.shodanPrivate.onSendImageToAriaClicked.addListener(e):d.info(u)}function w(e){p?opr.shodanPrivate.onSendImageToAriaClicked.removeListener(e):d.info(u)}function y(){return new Promise((function(e){try{return opr.shodanPrivate.distillPage((function(t){d.info("distillPage -> content \n",t),e(t)}))}catch(e){return d.info("Page distillation is not possible due to:",e),""}}))}},34134:(e,t,n)=>{n.d(t,{So:()=>c,Wu:()=>l,jb:()=>s});var r=n(15861),a=n(64687),o=n.n(a),i=(n(26382),n(47772)),s=(n(25108),function(){var e=(0,r.Z)(o().mark((function e(){var t,n,r,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=a.length>1&&void 0!==a[1]&&a[1],e.next=4,(0,i.l9)(t,n);case 4:return r=e.sent,e.abrupt("return",null==r?void 0:r.token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),c=function(){var e=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){opr.operaIdentityPrivate.getUseremail((function(t){return e(t)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){opr.operaAccountPrivate.showOperaAccountPopup(chrome.windows.WINDOW_ID_CURRENT)}},58489:(e,t,n)=>{n.d(t,{Aj:()=>x,V_:()=>y,ab:()=>b,ki:()=>w,vH:()=>v});var r=n(93324),a=n(4942),o=n(15861),i=n(64687),s=n.n(i),c=n(26382),l=n(54115),d=n(34134),u=n(47772),f=n(76756),p=n(25108);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:if(n=e.sent,(0,l.BB)()){e.next=6;break}return p.info("%c TEST: Stat that would be reported: ","background: #0cc; color: #000",n),e.abrupt("return");case 6:p.info("%c Reporting Stat:","background: #0cc; color: #000",n),opr.statsPrivate.recordSessionEvent("feature_events.event_ai",JSON.stringify(n),opr.statsPrivate.Priority.NORMAL);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)(s().mark((function e(t){var n,a,o,i,c,l,d,f,p,h,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.action,a=t.element,o=t.context,i=t.str_value,c=t.int_value,l=t.map_of_ints,d=t.ai_provider,f=t.model,p=void 0===f?"Aria":f,e.t0=m,e.t1={action:n,element:a,context:o,model:p},e.t2=(0,u.dp)(),!e.t2){e.next=9;break}return e.next=7,j();case 7:e.t3=e.sent,e.t2={account_type:e.t3};case 9:return e.t4=e.t2,h=(0,e.t0)(e.t1,e.t4),null===p&&delete h.model,v={str_value:i,int_value:c,ai_provider:d,map_of_ints:l},Object.entries(v).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];a&&(h[n]=a)})),e.abrupt("return",h);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){switch(e){case"command-line":return c.hG.COMMAND_BAR;case"selected-content-prompt":return c.hG.HIGHLIGHT;case"sidebar":return c.hG.SIDEBAR;case"tab-view":return c.hG.BROWSER_TAB}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PageContext";return e===c.Cm.EXPLORE_WEBPAGE?"WebpageContext:explore_topic":e===c.Cm.SUMMARIZE?"WebpageContext:summarize_page":"TabOrganize"===t?"OrganizeTabs:".concat(e):void p.warn("Unable to map suggestion prompt")},w=function(e){return f.v5.includes(e)?"image":f.Go.includes(e)?"audio":f.jn.includes(e)?"video":f.JH.includes(e)?"pdf":f.tZ.includes(e)?"spreadsheet":f.V4.includes(e)?"doc":f.YF.includes(e)?"json":void p.warn("Unable to map file type prompt")},y=function(e){if(e)switch(e){case"openai":return"OpenAi";case"google":return"Google";default:return"Other"}},j=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.So)();case 2:return t=e.sent,e.abrupt("return",t?c.HQ.REGULAR:c.HQ.ANONYMOUS);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},75923:(e,t,n)=>{n.d(t,{Bn:()=>j,JA:()=>x,SJ:()=>w,X1:()=>g,fV:()=>b,g$:()=>y,m7:()=>v,tK:()=>m});var r=n(15861),a=n(64687),o=n.n(a),i=n(60243),s=n(19923),c=n(96531),l=n(4916),d=n(76756),u=n(25108);function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){return e.DeleteConversation="delete-conversation",e.SaveConversation="save-conversation",e.SaveRawData="save-raw-data",e.UpdateConversation="update-conversation",e.AppendConversation="append-conversation",e}({}),m=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.runtime.sendMessage({cmd:h.SaveRawData,data_key:t,data:n},(function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("Save conversation: ",n,t),e.abrupt("return",new Promise((function(e){chrome.runtime.sendMessage({cmd:h.SaveConversation,data_key:i.Fl,conversation:t},(function(t){e(t)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),g=function(e,t,n){return new Promise((function(r){u.info("Updated conversation: ",n,e,t),chrome.runtime.sendMessage({cmd:h.UpdateConversation,data_key:i.Fl,conversation_id:e,conversation_update:t},(function(e){r(e)}))}))},x=function(e,t,n){return new Promise((function(r){u.info("Appended conversation: ",n,e,t),chrome.runtime.sendMessage({cmd:h.AppendConversation,data_key:i.Fl,conversation_id:e,conversation_update:t},(function(e){r(e)}))}))},b=function(e){return new Promise((function(t){chrome.runtime.sendMessage({cmd:h.DeleteConversation,data_key:i.Fl,conversation_id:e},(function(e){t(e)}))}))},w=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return e.next=3,(0,l.WF)(t);case 3:null==(r=e.sent)||r.forEach((function(e){(0,c.k9)(e)}));case 5:return e.next=7,b(t);case 7:if(n){e.next=10;break}return u.warn("server_id is not defined for local conversation",t),e.abrupt("return");case 10:return e.next=12,(0,s.X)(d.bC.endpointDelete,n);case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,r.Z)(o().mark((function e(t,n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.Ug)(t);case 2:e.sent.forEach((function(e){var t=e.server_id;t&&n.deleteVoiceDataCache(t)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=f(t);try{for(r.s();!(a=r.n()).done;)i=a.value,n.push(w(i.id,i.server_id))}catch(e){r.e(e)}finally{r.f()}return e.next=5,Promise.all(n);case 5:return e.next=7,(0,c.qN)();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},53979:(e,t,n)=>{n.d(t,{Oe:()=>p,RB:()=>u,iE:()=>m,nU:()=>f,xm:()=>d});var r=n(15861),a=n(64687),o=n.n(a),i=n(76756),s=n(38856),c=n(7226),l=new i.mQ({env:(0,s.a)(),name:"tab utils"}),d=chrome.runtime.getURL&&chrome.runtime.getURL("/aria.html"),u=function(e,t){var n={active:!0,url:e};if(!t)return chrome.tabs.create(n);chrome.tabs.create(n,t)};function f(e){var t;null===(t=chrome.tabs)||void 0===t||t.getCurrent(e)}function p(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.J$)(t);case 2:return n=e.sent,r=[],e.next=6,(0,c.Mf)(n);case 6:return a=e.sent,r=a.filter((function(e){var t=e.id;return t>0})).map((function(e){return{id:String(e.id),active:e.active,url:e.url,title:e.title,inactive_time:e.inactiveTime,pinned:e.pinned}})),l.info("Organize tabs info",r,"for window id",t),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.topSites.get((function(t){var n=t.map((function(e){return{domain:new URL(e.url).hostname}}));e(n)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},63119:(e,t,n)=>{n.d(t,{AW:()=>p,Cp:()=>o,Dc:()=>h,F1:()=>d,HX:()=>c,Mx:()=>a,N2:()=>u,X0:()=>i,hB:()=>l,qf:()=>s,yc:()=>f});var r=n(60243),a=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.lastChild,"end",t)},o=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.firstChild,"center",t)},i=function(e){var t=e.current;t&&setTimeout((function(){t.scrollTop=t.scrollHeight}),r.MW)},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"smooth";e&&setTimeout((function(){return e.scrollIntoView({behavior:n,block:t,inline:"nearest"})}),r.MW)},c=function(){var e=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});document.body.dispatchEvent(e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};e.scrollIntoView(t)},d=function(e){e.parentElement&&e.parentElement.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},u=function(e){return e&&e.scrollHeight-e.scrollTop<=e.clientHeight},f=function(e,t,n){e&&(n||t)&&d(e)};function p(e){var t=["pre",".hljs",".table-wrapper"];window.renderingHighlights="mask"===e;for(var n=0;n<t.length;n++)document.querySelectorAll(t[n]).forEach((function(t){"mask"===e?t.classList.add("!overflow-hidden"):t.classList.remove("!overflow-hidden")}))}var h=function(e,t,n){var r,a;a=t?e?"opera-gx-dark":"opera-gx":n?e?"opera-air-dark":"opera-air":e?"opera-dark":"opera",null===(r=document.querySelector("html"))||void 0===r||r.setAttribute("data-theme",a)}},38856:(e,t,n)=>{n.d(t,{$o:()=>p,A2:()=>l.A2,AK:()=>f,AW:()=>o.AW,BB:()=>i.BB,Cp:()=>o.Cp,Dc:()=>o.Dc,F0:()=>v,F1:()=>o.F1,FR:()=>O,HX:()=>o.HX,Mx:()=>o.Mx,N2:()=>o.N2,Ur:()=>s.Ur,Vs:()=>y,Wf:()=>b,X0:()=>o.X0,X8:()=>c.X,Y8:()=>i.Y8,Yo:()=>u,_f:()=>s._f,a:()=>i.a,aD:()=>l.aD,cL:()=>w,fm:()=>l.fm,hB:()=>o.hB,mX:()=>j,nu:()=>g,qf:()=>o.qf,r8:()=>i.r8,u2:()=>_,wE:()=>h,yc:()=>o.yc,z7:()=>C,zn:()=>k});var r=n(93324),a=n(36609),o=n(63119),i=n(54115),s=n(14270),c=(n(6642),n(34470),n(14664)),l=n(19718),d=n(25108),u=function(e){window.open(e,"_blank").opener=null},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return"string"==typeof e&&""!==e})).join(" ")},p=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},h=function(e,t,n){var r;return"".concat(null!==(r=e.name)&&void 0!==r?r:e.displayName,"-").concat(t,"-").concat(n)},m=0,v=function(){return(new Date).getTime().toString()+Math.floor(100*Math.random()).toString()+(++m).toString()},g=function(){var e=new Date;return"conversation-".concat(e.getTime())},x=function(e){return String(e).padStart(2,"0")},b=function(){var e=-(new Date).getTimezoneOffset(),t=Math.abs(e);return 0===e?"Z":[e>0?"+":"-",x(Math.floor(t/60)),":",x(t%60)].join("")},w=function(e,t){var n=t-e,r=Math.random(),a=Math.floor(r*n);return a+=e};function y(e){return new Promise((function(t){return setTimeout(t,e)}))}function j(e){return e.forEach((function(e){var t;null!=e&&e.id||(e.id=g()),null==e||null===(t=e.data)||void 0===t||t.map((function(e){if(e)return e.progress&&(e.message=(0,a.t)("empty_interrupted_message"),e.progress=!1,d.warn("Saved data was incorrect, loaded message cannot be in progress. Aria response had to be unexpectedly interrupted.")),e.message||function(e){return e.rich_response}(e)||(e.message=(0,a.t)("empty_interrupted_message"),d.warn("Saved empty message, interruption disclaimer wasn't set.")),e}))})),e}var C=function(e){var t=new URL(e).hostname;return t.startsWith("www.")?t.replace("www.",""):t},k=function(e){if(!e.includes("/"))return e;var t=e.split("/"),n=(0,r.Z)(t,3),a=n[1];return n[2]||a||e};function O(e){return Object.entries(e)}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return"".concat("https://www.google.com/s2/favicons","?domain=").concat(e,"&sz=").concat(t)}},19718:(e,t,n)=>{n.d(t,{A2:()=>o,aD:()=>a,fm:()=>r});var r=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},a=function(e){return e.replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.match(new RegExp("(.|\\n\\n|\\n){1,".concat(t,"}"),"gu"))}},49759:(e,t,n)=>{n.d(t,{B9:()=>l,VU:()=>s,wO:()=>c});var r,a=n(13771),o=new RegExp(/mac/),i="Aria",s=function(e){var t=document.createElement("canvas").getContext("2d");return t.font="400 14px 'Be Vietnam'",t.measureText(e).width};o.test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase());function c(e){return!e||e===i}var l=function(e,t){var n="production"===t?a.RN.PROD:a.RN.STG;return e===a.FU.EMAIL?"https://auth.".concat(n,"/account/authenticate/email"):"https://auth.".concat(n,"/account/social/v4/login?service=auth&provider=").concat(e,"&create_user_if_not_exists=1")}},10449:(e,t,n)=>{n.d(t,{xE:()=>h,zx:()=>r.z,hU:()=>m.h,Rg:()=>o.R,j2:()=>v,_X:()=>a._});var r=n(77783),a=n(15289),o=n(88887),i=n(30811);const s=n.p+"assets/66292949a3a6849abd86.svg";var c=n(42376),l=n(27411),d=n(38856),u=n(89250),f=n(76756),p=n(85893),h=function(e){var t=e.label,n=e.onClick,r=e.disabled,a=(0,i.$G)().t,o=(0,u.s0)(),h=t||a("back"),m=(0,f.o6)({buttonText:{operaOne:"text-button-s",operaGx:"text-header-s",operaAir:"text-button-m"}},["buttonText"]);return(0,p.jsxs)("button",{tabIndex:-1,onClick:function(){n?n():o(-1)},className:(0,d.AK)("flex h-4 select-none flex-row items-center justify-center gap-2 text-center",m.buttonText,r?"text-text-t3-text-gray":"text-text-t1-text-active-icons"),children:[(0,p.jsx)(l.S,{config:{operaOne:{light:s,dark:c,color:r?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)"}}}),(0,p.jsx)("p",{children:h})]})},m=n(80850),v=function(e){var t=e.children,n=e.className,r=e.onClick,a=e.onMouseEnter,o=e.onMouseLeave,i=e.onKeyUp,s=e.testId,c=e.tabIndex,l=void 0===c?-1:c,u=(0,f.o6)({rounded:"rounded-aria-radius-3",operaGx:{rounded:"rounded-aria-radius-2"},operaAir:{rounded:"rounded-aria-radius-5"}},["rounded"]);return(0,p.jsx)("div",{role:"button","data-testid":s||void 0,className:(0,d.AK)("text-button-s flex h-10 cursor-pointer select-none flex-row items-center justify-start px-aria-4 py-aria-3 text-text-t1-text-active-icons outline-none hover:bg-levels-l2-hover",u.rounded,n),tabIndex:l,onClick:r,onMouseEnter:a,onMouseLeave:o,onKeyUp:i,children:t})}},45403:(e,t,n)=>{n.d(t,{Im:()=>i,xE:()=>c.xE,zx:()=>c.zx,Dd:()=>S.D,u1:()=>E,hU:()=>c.hU,Rg:()=>c.Rg,j2:()=>c.j2,P_:()=>A,fx:()=>s,_X:()=>c._X,sm:()=>N.s,Kx:()=>f,oi:()=>u,u:()=>l.u});var r=n(38856),a=n(76756),o=n(85893),i=function(e){var t=e.onBackButtonClick,n=e.title,i=(0,a.o6)({headerWrapper:{operaGx:"border-image-1-header",operaAir:"border-transparent"},title:{operaOne:"!font-normal",operaGx:"!font-semibold"}},["headerWrapper","title"]);return(0,o.jsxs)("div",{id:"aria_header",className:(0,r.AK)("relative box-border flex h-14 min-h-14 w-full items-center justify-center border-b border-secondary-s1-selected-stroke p-3",i.headerWrapper),children:[(0,o.jsx)("div",{className:"absolute left-3",children:(0,o.jsx)(c.xE,{onClick:t})}),(0,o.jsx)("span",{className:(0,r.AK)("text-subheader-m",i.title),children:n})]})},s=(n(93919),function(e){var t=e.render,n=(0,a.u)(),r=n.handleScreenshotClipboard,i=n.screenshotClipboardAreaRef,s=n.clipboardPending;return(0,o.jsx)("div",{ref:i,children:t({handleScreenshotClipboard:r,clipboardPending:s})})}),c=n(10449),l=(n(61393),n(61401),n(10181)),d=(n(24871),n(67294)),u=(0,d.forwardRef)((function(e,t){var n=e.className,i=e.onFocus,s=e.onChange,c=e.onKeyDown,l=e.onKeyUp,d=e.value,u=e.maxLength,f=e.placeholder,p=e.defaultValue,h=(0,a.o6)({element:"outline-none px-2 py-1 min-w-10",background:"bg-secondary-s2-tertiary-need-to-fix",text:"text-text-t1-text-active-icons text-body-m",rounded:"rounded-aria-radius-3",operaGx:{background:"bg-levels-l0-extension-bg"},operaAir:{rounded:"rounded-full",background:"bg-levels-l4-message-bg"}},["element","background","text","rounded"]);return(0,o.jsx)("input",{ref:t,className:(0,r.AK)(h.element,h.background,h.text,h.rounded,n),type:"text",maxLength:u,value:d,onFocus:i,onChange:s,onKeyDown:c,onKeyUp:l,placeholder:f,defaultValue:p})})),f=(0,d.forwardRef)((function(e,t){var n=e.className,i=e.id,s=e.name,c=e.testId,l=e.onInput,d=e.onFocus,u=e.onChange,f=e.onKeyDown,p=e.onKeyUp,h=e.value,m=e.disabled,v=e.maxLength,g=e.placeholder,x=e.defaultValue,b=e.invalid,w={outer:"rounded-aria-radius-3 bg-levels-l3-cards overflow-hidden py-2 pl-2 pr-2 border",outerBorderColor:b?"border-states-error":"border-transparent",textarea:"text-body-m outline-none p-1 placeholder-text-t3-text-gray text-text-t1-text-active-icons bg-transparent",scrollbar:"hover-scrollbar box-border resize-none"},y=(0,a.o6)(w,["outer","textarea","scrollbar","outerBorderColor"]);return(0,o.jsx)("div",{className:(0,r.AK)(y.outer,y.outerBorderColor,n),children:(0,o.jsx)("textarea",{ref:t,name:s,id:i,"data-testid":c,"data-invalid":!!b,className:(0,r.AK)("h-full w-full resize-none",y.textarea,y.scrollbar),maxLength:v,value:h,onFocus:d,onChange:u,onKeyDown:f,onKeyUp:p,onInput:l,placeholder:g,defaultValue:x,disabled:m,children:h})})})),p=n(4942),h=n(47643),m=n(2065),v=n(30811),g=n(23586),x=n(31372),b=n(72075),w=n(58489),y=n(49759),j=n(13771),C=n(27411);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new Map;const A=function(){var e=(0,g.fvp)().networkEnvironment,t=(0,g.HhX)().setAccountlessLoginData,n=(0,v.$G)().t,i=(0,m.Z)(),s=i.closeNotification,l=i.notificationIcon,u=i.notifications,f=(0,a.oH)().isAriaInTabView,p={error:"bg-states-error",info:"bg-secondary-s1-selected-stroke",success:"bg-states-correct"},k=(0,d.useCallback)((function(e){return function(){s(e)}}),[s]),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.YE,n=window.setTimeout((function(){window.clearTimeout(n),_.delete(e),s(e)}),t);_.set(e,n)},E=function(e){var t=_.get(e);window.clearTimeout(t),_.delete(e)},S=function(e){return function(){E(e)}},N=function(e){return function(){_.get(e)&&E(e),A(e,3*a.sh)}};(0,d.useEffect)((function(){u.forEach((function(e){_.has(e.id)||A(e.id)}))}),[u]);var I=(0,d.useCallback)((function(){var e=f?x.hG.BROWSER_TAB:x.hG.SIDEBAR;t({context:e,initTime:Date.now(),source:"limit_message"}),(0,w.vH)({action:x.VV.CLICK,context:e,element:x.Y3.ONBOARDING,str_value:"start:log_in:limit_message"})}),[f,t]),T=(0,a.o6)({notification:"bg-levels-l5-primary",text:"text-text-t1-text-active-icons text-body-s",border:"border border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"border-l border-solid border-secondary-s1-selected-stroke",icon:"!w-6 !h-6 min-w-6 rounded-aria-radius-2",operaAir:{notification:"bg-levels-l5-primary air-level-02 border-secondary-s1-selected-stroke border",border:"rounded-aria-radius-3",separator:""}},["notification","border","text","separator","icon"]);return u.length?(0,o.jsx)("div",{className:(0,r.AK)("absolute right-0 top-14 z-3 w-full",!f&&"notifications-wrapper"),children:u.map((function(t){var a=t.id,i=t.link,s=t.text,d=t.type;return(0,o.jsxs)("div",{className:(0,r.AK)("mx-auto mb-2 flex max-w-fit items-center justify-between overflow-hidden pl-2  text-center",T.text,T.border,T.notification),onMouseEnter:S(a),onMouseLeave:N(a),children:[(0,o.jsx)("div",{className:(0,r.AK)("flex items-center justify-center",p[d],T.icon),children:(0,o.jsx)(C.S,{color:"info"===d?"var(--text-t1-text-active-icons)":void 0,src:l(d)})}),(0,o.jsx)("div",{className:"mx-2",children:i?(0,o.jsx)(v.cC,{i18nKey:n(s),components:{link1:(0,o.jsx)(b.h,O({className:"font-bold underline",to:i},i===(0,y.B9)(j.FU.EMAIL,e)&&{onClick:I}))}}):s}),(0,o.jsxs)("div",{className:"flex h-10 items-center",children:[(0,o.jsx)("div",{className:(0,r.AK)("h-full",T.separator)}),(0,o.jsx)(c.hU,{type:"context-menu",onClick:k(a),icon:h,title:n("close"),className:"h-full rounded-none"})]})]},a)}))}):null};var E=function(e){var t=e.onClick,n=e.children;return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 z-1 -m-2",onClick:t,onKeyDown:t,role:"button",tabIndex:-1}),n]})},S=(n(73999),n(56393)),N=n(49961);n(81209)},73009:(e,t,n)=>{n.d(t,{x:()=>g,J:()=>T});var r=n(89062),a=n(93324),o=n(4942),i=n(38856),s=n(67294),c=n(30811),l=n(86645),d=n(23586),u=n(31372),f=n(55970),p=n(53744),h=n(76756),m=n(58489),v=n(85893);function g(){var e,t,n=(0,c.$G)().t,g=(0,p.L1)().isCurrentThemeDark,x=(0,h.oH)().isAriaInTabView,b=(e={},(0,o.Z)(e,h.b$.POSITIVE,[{id:"helpful",uiText:n("helpful")},{id:"detailed",uiText:n("detailed")},{id:"informative",uiText:n("informative")},{id:"knowledgeable",uiText:n("knowledgeable")},{id:"quick_solution",uiText:n("quick_solution")},{id:"humorous",uiText:n("humorous")},{id:"relevant",uiText:n("relevant_content")}]),(0,o.Z)(e,h.b$.NEGATIVE,[{id:"out_of_date",uiText:n("out_of_date")},{id:"inaccurate",uiText:n("inaccurate")},{id:"dangerous",uiText:n("dangerous_or_problematic")},{id:"false",uiText:n("factually_incorrect")},{id:"denial",uiText:n("denial_when_it_should_not_happen")},{id:"harmful",uiText:n("harmful_or_offensive")},{id:"not_helpful",uiText:n("not_helpful")}]),e),w=(0,h.o6)({container:"rounded-aria-radius-3 border border-secondary-s1-selected-stroke",feedbackKind:"bg-secondary-s4-surface-overlay text-text-t3-text-gray",feedbackOptionButton:"text-header-s",selectedFeedbackKind:"bg-secondary-s1-selected-stroke text-text-t1-text-active-icons",operaGx:{feedbackOptionButton:"text-body-s !uppercase"}},["container","feedbackKind","feedbackOptionButton","selectedFeedbackKind"]),y=(0,d.hsz)(),j=y.feedbackData,C=y.saveFeedbackLoading,k=y.saveFeedbackSuccessful,O=(null!=j?j:{}).comment,_=(0,d.Uwy)().userCapabilities,A=(0,d.tkH)(),E=A.clearFeedbackState,S=A.handleSaveFeedback,N=A.setFeedbackData,I=(0,s.useState)(!1),T=(0,a.Z)(I,2),P=T[0],R=T[1],M=(0,s.useRef)(null),D=(0,s.useCallback)((function(){var e=M.current;e&&(O||(e.style.height="".concat(38,"px"),e.style.overflow="hidden"),e.style.height="".concat(Math.min(e.scrollHeight,60),"px"),e.style.overflow=e.scrollHeight>60?"auto":"hidden")}),[O]),G=function(e){var t;return null!=j&&null!==(t=j.kind)&&void 0!==t&&t.includes(e.id)?w.selectedFeedbackKind:w.feedbackKind};return(0,s.useEffect)((function(){return M.current&&(0,i.F1)(M.current),window.addEventListener("beforeunload",E),function(){window.removeEventListener("beforeunload",E)}}),[E]),(0,s.useEffect)((function(){!O&&M.current&&(M.current.value=""),D()}),[D,O]),(0,s.useEffect)((function(){var e,t;k?(R(!0),e=window.setTimeout((function(){E()}),3*h.sh),(0,m.vH)({action:u.VV.SEND_FEEDBACK,element:u.Y3.CHAT,context:x?u.hG.BROWSER_TAB:u.hG.SIDEBAR,model:"Aria",ai_provider:(0,m.V_)(null==_?void 0:_.ai_provider),str_value:"".concat(null==j?void 0:j.rate,":").concat(null==j||null===(t=j.kind)||void 0===t?void 0:t.join(","))})):R(!1);return function(){clearTimeout(e)}}),[E,k,x]),(0,v.jsx)("div",{className:(0,i.AK)("my-2 w-full bg-inherit p-3",w.container),children:P?(0,v.jsx)("p",{className:"text-body-m text-center text-text-t3-text-gray",children:n("thanks_for_your_feedback")}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:(0,i.AK)("rounded-aria-radius-3 border border-secondary-s1-selected-stroke"),children:(0,v.jsx)("textarea",{className:(0,i.AK)("hover-scrollbar text-body-m block w-full resize-none bg-transparent p-3 text-text-t1-text-active-icons outline-none placeholder:text-text-t3-text-gray"),placeholder:n("type_your_feedback_here"),ref:M,maxLength:1e3,onChange:function(e){return N({comment:e.target.value})},value:O,onInput:D})}),(0,v.jsx)("div",{className:(0,i.AK)("mt-3 flex flex-wrap gap-1"),children:(null==j?void 0:j.rate)&&b[j.rate].map((function(e){return(0,v.jsx)("button",{className:(0,i.AK)("flex h-6 cursor-pointer select-none flex-row items-center justify-center whitespace-nowrap rounded-full px-3",w.feedbackOptionButton,G(e)),onClick:function(){return function(e){var t,n,a,o;n=null!==(t=j.kind)&&void 0!==t&&t.includes(e.id)?null==j||null===(a=j.kind)||void 0===a?void 0:a.filter((function(t){return t!==e.id})):[].concat((0,r.Z)(null!==(o=null==j?void 0:j.kind)&&void 0!==o?o:[]),[e.id]),N({kind:n})}(e)},children:e.uiText},e.id)}))}),"boolean"==typeof k&&!k&&(0,v.jsx)("p",{className:"mt-4 text-other-warning",children:n("chat_error_processing_request")}),(0,v.jsxs)("div",{className:(0,i.AK)("mt-4 flex flex-row justify-end gap-1.5"),children:[(0,v.jsx)(l.zx,{type:"tertiary",onClick:E,size:"xs",children:n("cancel")}),(0,v.jsx)(l.zx,{type:"primary",disabled:!(null!=j&&null!==(t=j.kind)&&void 0!==t&&t.length),onClick:S,size:"xs",children:C?(0,v.jsx)(f.Z,{spinnerColoring:g?"white-gray":"gray-accent"}):n("send_feedback")})]})]})})}var x=n(15861),b=n(64687),w=n.n(b);const y=n.p+"assets/b9c699a86ab690791b12.svg",j=n.p+"assets/7b9ac5b763bce158898d.svg",C=n.p+"assets/fda33c4a45d4654e2276.svg",k=n.p+"assets/a97a63d1b11ad7177bce.svg",O=n.p+"assets/79a4ae501b42b69cb13e.svg",_=n.p+"assets/6ed2cd085dd2e14940ac.svg";var A=n(4916),E=n(45403),S=n(25108);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=function e(t){var n=t.rate,r=t.conversationId,a=t.messageId,o=(0,c.$G)().t,s=(0,d.tkH)(),u=s.setFeedbackData,f=s.clearFeedbackState,p=(0,d.hsz)().feedbackData,m=function(){var e=(0,x.Z)(w().mark((function e(){var t,o,i,s,c,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=33;break}return e.next=3,(0,A.hV)(r);case 3:if(e.t1=t=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==t;case 7:if(!e.t0){e.next=11;break}e.t2=t,e.next=12;break;case 11:e.t2={};case 12:return i=e.t2,s=i.server_id,e.next=16,(0,A.S$)(a,r);case 16:if(e.t4=o=e.sent,e.t3=null!==e.t4,!e.t3){e.next=20;break}e.t3=void 0!==o;case 20:if(!e.t3){e.next=24;break}e.t5=o,e.next=25;break;case 24:e.t5={};case 25:if(c=e.t5,l=c.server_id,s){e.next=29;break}return e.abrupt("return",S.error("Cannot leave feedback, conversation's server id does not exist!"));case 29:p&&f(),u({rate:n,conversation_id:s,message_id:l}),e.next=34;break;case 33:return e.abrupt("return",S.error("Cannot leave feedback, conversation id does not exist!"));case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g={likeIcon:{operaOne:j,color:"var(--text-t1-text-active-icons)",operaGx:k,operaAir:_},dislikeIcon:{operaOne:y,color:"var(--text-t1-text-active-icons)",operaGx:C,operaAir:O},offsetValue:8,operaGx:{offsetValue:12},operaAir:{offsetValue:12}},b=(0,h.o6)(g,["offsetValue","dislikeIcon","likeIcon"]);return(0,v.jsx)(l.u,{placement:"bottom",arrowDirection:"top",offsetValue:b.offsetValue,title:n===h.b$.POSITIVE?o("good_answer"):o("wrong_answer"),delay:h.XT,children:function(t){var r=t.ref,a=t.referenceProps;return(0,v.jsx)("div",I(I({ref:r},a),{},{children:(0,v.jsx)(E.hU,{iconSize:13,icon:n===h.b$.POSITIVE?b.likeIcon:b.dislikeIcon,type:"context-menu",onClick:m,testId:(0,i.wE)(e,"button","feedback")})}))}})}},55970:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(38856),a=n(76756),o=n(85893);const i=function e(t){var n=t.spinnerColoring,i=t.sizeClass,s=void 0===i?"h-4 w-4":i,c=(0,a.o6)({grayAccent:"before:border-primary-p1-cobalt-buttons before:border-t-secondary-s1-selected-stroke after:border-secondary-s1-selected-stroke after:border-t-primary-p1-cobalt-buttons",whiteGray:"before:border-secondary-s1-selected-stroke before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-s1-selected-stroke",operaAir:{grayAccent:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]",whiteGray:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]"}},["grayAccent","whiteGray"]),l=c.grayAccent,d=c.whiteGray;return(0,o.jsx)("span",{"data-testid":(0,r.wE)(e,"span","spinner"),className:(0,r.AK)(s,"gray-accent"===n?l:d,"after:content relative inline-block before:absolute before:block before:h-full before:w-full before:animate-spin before:rounded-full before:border-2 before:border-solid before:content-[''] after:absolute after:block after:h-full after:w-full after:animate-spin after:rounded-full after:border-2 after:border-solid after:delay-150 after:content-['']")})}},44282:(e,t,n)=>{n.d(t,{Z:()=>S});var r=n(4942),a=n(6501),o=n(29522),i=n(9470),s=n(45386),c=n(13934),l=n(60153),d=n(91701),u=n(4445),f=n(22196),p=n(59006),h=n(37938),m=n(67294),v=n(26017),g=n(28163),x=n(35703),b=n(50653),w=n(72090),y=n(44971),j=(n(16611),n(86667)),C=n(38856),k=n(76711),O=n(85893);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.links,n=e.message,r=e.isGenerating,m=void 0!==r&&r,_=e.components,E=e.isNonTempDisplayedMessage,S=(0,h.Z)({enabled:m}),N=(0,j.E)().isAriaAnalyzing&&!E;N||(n+=S),n=(0,y.VV)(n);var I=t&&Object.values(t).flat();return(0,O.jsx)("span",{className:(0,C.AK)("markdown",N&&"animate-wavyBlinking"),children:(0,O.jsx)(a.U,{className:"[&>p:not(:first-child)]:mt-4",remarkPlugins:[s.Z,[c.Z,{singleDollarTextMath:!1}],[d.N,{links:I,disabled:m}],[l.s,{disabled:!m}]],rehypePlugins:[o.Z,i.Z,[w.Z,{target:"_blank"}]],components:A({ul:f.Ik,ol:f.Ic,th:u.U,td:u.H,pre:p.Z,h1:v.Z,h2:v.Z,h3:v.Z,h4:v.Z,h5:v.Z,h6:v.Z,table:m?k.Z:x.Z,blockquote:g.Z,img:b.Z},_),children:n})})}const S=(0,m.memo)(E)},22196:(e,t,n)=>{n.d(t,{Ic:()=>f,Ik:()=>p,Tf:()=>h});var r=n(4942),a=n(45987),o=n(38856),i=n(85893),s=["node","className"],c=["node","className"],l=["node","className"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){e.node;var t=e.className,n=(0,a.Z)(e,s);return(0,i.jsx)("ol",u({className:(0,o.AK)(t,"list-decimal pl-[18px] rtl:pr-[18px]")},n))}function p(e){e.node;var t=e.className,n=(0,a.Z)(e,c);return(0,i.jsx)("ul",u({className:(0,o.AK)(t,"[&>li]:custom-bullet pl-[18px] rtl:pr-[18px]")},n))}function h(e){e.node;var t=e.className,n=(0,a.Z)(e,l);return(0,i.jsx)("ul",u({className:(0,o.AK)(t,"pl-[18px] rtl:pr-[18px] [&>li]:list-disc")},n))}},224:(e,t,n)=>{n.d(t,{xb:()=>b.x,bZ:()=>g,tN:()=>x.t});var r=n(85893),a=function(e){var t=e.children,n=e.twRightSpaceValue;return(0,r.jsx)("div",{className:"absolute right-".concat(n," top-0 z-1 -translate-y-1/2"),children:t})},o=n(76756),i=n(45403),s=n(38856),c={increase:"mask-chevron-right",decrease:"mask-chevron-left"},l=function(e){var t=e.onClick,n=e.strategy;return(0,r.jsx)(i.u1,{onClick:t,children:(0,r.jsx)("i",{className:(0,s.AK)(c[n],"icon")})})},d=function(e){var t=e.activeAnswer,n=e.answersCount;return(0,r.jsxs)("span",{className:"text-header-s-bold select-none text-text-t1-text-active-icons",children:[t+1,"/",n]})},u=n(58489),f=n(31372),p=function(e){var t=e.activeAnswer,n=e.answersCount,a=e.setActiveAnswer,i=e.answerCategory,s=function(e){var t=e.answersCount,n=e.setActiveAnswer,r=e.activeAnswer,a=(0,o.T4)({itemsCount:t,setActiveItem:n,activeItem:r});return{onNextAnswer:a.onNext,onPreviousAnswer:a.onPrevious}}({answersCount:n,setActiveAnswer:a,activeAnswer:t}),c=s.onNextAnswer,p=s.onPreviousAnswer;return function(e){var t=e.activeAnswer,n=e.answerCategory,r=(0,o.oH)().isAriaInTabView;(0,o.rf)((function(){(0,u.vH)({action:f.VV.CLICK,element:f.Y3.MULTIMODAL_ANSWER,context:r?f.hG.BROWSER_TAB:f.hG.SIDEBAR,model:"Aria",str_value:n,int_value:t})}),[t],[n,r])}({activeAnswer:t,answerCategory:i}),(0,r.jsx)("div",{className:"rounded-aria-radius-2 border border-secondary-s1-selected-stroke bg-levels-l3-cards p-aria-2",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(l,{onClick:p,strategy:"decrease"}),(0,r.jsx)(d,{activeAnswer:t,answersCount:n}),(0,r.jsx)(l,{onClick:c,strategy:"increase"})]})})},h=n(44282),m=function(e){var t=e.text,n=e.links;return(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{message:t,links:n})})},v=function(e){var t=e.text,n=e.links;return(0,r.jsx)("div",{children:(0,r.jsx)(h.Z,{message:t,links:n})})},g=function(e){var t=e.selectedAnswerIndex,n=e.content,o=e.updateRichResponseSelectedIndex,i=e.isLocked,s=e.answerCategory,c=e.links,l=t||0,d=n.main_texts.length;return(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)(v,{text:n.first_message,links:c})}),(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"relative w-full rounded-aria-radius-3 bg-levels-l3-cards p-".concat(3),children:[!i&&(0,r.jsx)(a,{twRightSpaceValue:3,children:(0,r.jsx)(p,{activeAnswer:l,answersCount:d,setActiveAnswer:o,answerCategory:s})}),(0,r.jsx)(m,{text:n.main_texts[l].text,links:c})]})}),(0,r.jsx)("div",{children:(0,r.jsx)(v,{text:n.last_message,links:c})})]})},x=n(47845),b=n(26807)},86645:(e,t,n)=>{n.d(t,{P_:()=>r.P_,hU:()=>r.hU,u:()=>r.u,zx:()=>r.zx});var r=n(45403)},54692:(e,t,n)=>{n(7090),n(49110);var r=Boolean(localStorage.debug),a=window.console.debug;window.console.debug=function(){return r&&a.apply(void 0,arguments)};var o=window.console.warn;window.console.warn=function(){return r&&o.apply(void 0,arguments)};var i=window.console.info;window.console.info=function(){return r&&i.apply(void 0,arguments)};var s=n(20745),c=n(76756),l=n(67294),d=n(23586),u=n(7226),f=n(68279),p=function(e){var t=e.children,n=(0,f.Su)().loggerService,r=(0,d.Pt2)().handleAriaOpened,a=(0,d.Qck)().setLocalModelsServiceStatus,o=(0,l.useCallback)((function(e){var t=e?"RUNNING":"UNAVAILABLE";n.info("LOCAL MODELS SERVICE STATUS CHANGED TO",t),a(t)}),[a]);return(0,l.useEffect)((function(){return(0,u.OZ)(o),r(!0),(0,u.ff)().then(o),function(){r(!1),(0,u.n5)(o)}}),[]),t},h=n(89062),m=n(15861),v=n(93324),g=n(4942),x=n(64687),b=n.n(x),w=n(30811),y=n(26382),j=n(44282),C=n(12294),k=n(85893);const O=(0,l.memo)((function(e){var t=e.title,n=e.sender,r=e.progress,a=e.countryCode,o=e.message,i=e.contextType,s=e.isCurrentlyGeneratedMessage,c=e.links,l=e.children,d=e.richContentExists,u=e.isNonTempDisplayedMessage,f=(r||s)&&!d,p=n===y.CI.aria,h=n===y.CI.user,m=n===y.CI.localModel;return(0,k.jsxs)(k.Fragment,{children:[t&&(0,k.jsx)("div",{className:"title",children:t}),(0,k.jsxs)("div",{className:"content flex min-h-8 flex-col justify-center",children:[h&&(0,k.jsx)("span",{children:o}),m&&(0,k.jsx)("span",{children:o}),p&&(o||f)&&(0,k.jsx)(j.Z,{isNonTempDisplayedMessage:u,links:c,message:o,isGenerating:f,components:{a:function(e){var t=e.children,n=e.href;return(0,k.jsx)(C.Z,{href:null!=n?n:"",progress:f,contextType:i,countryCode:null!=a?a:navigator.language,children:t})}}}),l]})]})}));var _=n(78546),A=n(38856),E=n(47643),S=n(27411);const N=function(e){var t=e.onChipRemove,n=e.title,r=e.variant,a=void 0===r?"normal":r,o=Boolean(t),i=(0,l.useCallback)((function(e){e.stopPropagation(),t()}),[t]),s=(0,c.o6)({padding:"p-1",operaGx:{padding:"p-1 px-2"},operaAir:{padding:"p-1 px-2",shadow:"air-level-02-shadow"}},["border","padding","shadow"]);return(0,k.jsxs)("button",{title:n,className:(0,A.AK)("text-body-s flex !h-7 max-w-[175px] cursor-pointer select-none items-center rounded-aria-radius-2 bg-levels-l2-hover text-text-t1-text-active-icons",s.padding,s.shadow,"message"===a&&"mr-2.5 mt-2.5 !cursor-auto !bg-transparent","message"===a&&"border border-secondary-s1-selected-stroke"),onClick:o?i:function(){},children:[(0,k.jsx)("span",{className:"shrink-0 flex-grow basis-0 select-none truncate",children:n}),o&&(0,k.jsx)(S.S,{src:E,color:"default",className:"ml-0.5 shrink-0",title:"Remove"})]})};var I=n(63843),T=n(62655);const P=n.p+"assets/0632be293d6893eef9b9.svg",R=n.p+"assets/17d820f0ebf3196a58c6.svg";var M=n(95928),D=n(86645),G=n(55970),L=function e(t){var n=t.type,r=t.file,a=t.readonly,o=t.onRemove,i=(0,l.useRef)(null),s=(0,c.XI)(i),d=function(){return null==o?void 0:o(r.image_id)},u=!(c.v5.includes(n)||c.Go.includes(n)),f=r.status!==c.bb.FINISHED,p=s||f;return(0,k.jsxs)("div",{ref:i,className:(0,A.AK)("flex h-12 w-42 items-center gap-aria-2 rounded-aria-radius-3 border border-secondary-s1-selected-stroke bg-levels-l5-primary p-aria-3",!a&&"hover:bg-levels-l2-hover hover:bg-none"),children:[(0,k.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons p-aria-3",children:(0,k.jsx)(S.S,{config:u?R:P,color:"var(--text-t1-text-active-icons)"})}),(0,k.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-2",children:[(0,k.jsx)("p",{className:(0,A.AK)("text-body-m max-h-4 overflow-hidden text-ellipsis text-nowrap text-text-t1-text-active-icons",p&&!a?"max-w-22":"max-w-28"),children:r.name}),(0,k.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:n})]}),p&&!a&&(f&&!s?(0,k.jsx)(G.Z,{spinnerColoring:"gray-accent"}):!!o&&(0,k.jsx)(D.hU,{dataTestId:(0,A.wE)(e,"button","remove-btn"),type:"transparent",icon:M,iconSize:16,tabIndex:-1,onClick:d,onKeyUp:d,className:"-ml-1 h-full items-center self-end"}))]})},B=n(96531),Z=n(45403),H=n(93158),K=function e(t){var n=t.image,r=t.onRemove,a=t.visualQuestionResponseImage,o=void 0!==a&&a,i=(0,l.useState)("default"),s=(0,v.Z)(i,2),d=s[0],u=s[1],f=(0,l.useState)("cover"),p=(0,v.Z)(f,2),h=p[0],g=p[1],x=(0,l.useState)(""),w=(0,v.Z)(x,2),y=w[0],j=w[1],C=(0,l.useState)(!1),O=(0,v.Z)(C,2),_=O[0],S=O[1],N=!!n.isLocalModel,I="in_progress"===n.status||N&&!y,T=function(){return null==r?void 0:r(n.image_id)},P=function(){var e=(0,m.Z)(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,B.zj)(t);case 2:(n=e.sent)&&j(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){N&&P(n.image_id)}),[n.image_id]);var R=(0,c.o6)({radius:"rounded-aria-radius-4",operaGx:{radius:"rounded-aria-radius-3"},operaAir:{radius:"rounded-aria-radius-3"}},["radius"]),M=Boolean(n.original_size_url),D=M?function(){S(!0)}:void 0;return(0,k.jsxs)("div",{"data-testid":(0,A.wE)(e,"div","container"),className:(0,A.AK)("relative overflow-clip border-stroke-components bg-stroke-components","landscape"===d&&"flex items-center",o?"h-28 w-28":"h-aria-9 w-aria-9",R.radius),children:[(0,k.jsx)("div",{className:(0,A.AK)("group absolute inset-0 flex items-center justify-center bg-transparent transition-all",I&&"bg-black bg-opacity-50",!!r&&"hover:bg-black hover:bg-opacity-50",M&&"cursor-pointer"),role:M?"button":void 0,onClick:D,onKeyUp:D,children:I?(0,k.jsx)(G.Z,{spinnerColoring:"gray-accent"}):!!r&&(0,k.jsx)(Z.hU,{dataTestId:(0,A.wE)(e,"button","remove-btn"),type:"transparent",icon:E,className:"invisible h-full w-full opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",tabIndex:-1,onClick:T,onKeyUp:T})}),(!!n.thumbnail_url||!!y)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("img",{alt:"",className:(0,A.AK)("h-full w-full bg-secondary-s1-selected-stroke","center-crop"===h&&"object-cover object-center","cover"===h&&"object-cover"),src:N?y:n.thumbnail_url,onLoad:function(e){var t=e.target,n=t.naturalHeight,r=t.naturalWidth;u(r<114?"default":r>n?"landscape":"portrait"),g(r>=48&&n>=48?"center-crop":"cover")}}),M&&_&&(0,k.jsx)(H.Z,{onClose:function(){S(!1)},previewImageAlt:n.name,previewImageSrc:n.original_size_url})]})]})},F=function(e){var t=e.files,n=e.isMessageResponse,r=void 0!==n&&n,a=e.onRemove,o=e.readonly,i=(0,c.Su)().filesService;return(0,k.jsx)("div",{className:"flex w-fit flex-row gap-1",children:!!t.length&&(0,k.jsx)("div",{className:"flex w-fit flex-row flex-wrap gap-1",children:t.map((function(e){var t,n;return i.isImage(null!==(t=e.name)&&void 0!==t?t:"")?(0,k.jsx)(K,{image:e,onRemove:a,visualQuestionResponseImage:r},e.image_id):(0,k.jsx)(L,{file:e,onRemove:a,readonly:o,type:c.nS.getFileExtension(null!==(n=e.name)&&void 0!==n?n:"")},e.image_id)}))})})},U=n(9192),V=n(60387),z=n(2065),W=n(40054),X=n(224),Y=n(91786),q=n(38824),$=(0,l.createContext)(null),Q=function(){var e=(0,l.useContext)($);if(!e)throw new Error("useScrollActions is used outside of context of value is undefined inside Provider");var t=(0,l.useCallback)((function(){e.current&&(0,A.qf)(e.current,"start")}),[e]);return{scrollIntoEnd:(0,l.useCallback)((function(){e.current&&(0,A.qf)(e.current,"end")}),[e]),scrollIntoStart:t}},J=function(e){var t=e.children,n=Q().scrollIntoEnd;return t({layoutUpdateCallbackByCollapsibleStatus:(0,l.useCallback)((function(e){e&&n()}),[n])})},ee=n(22277),te=function(e){var t=e.children,n=e.enabled,r=e.strategy,a=Q(),o=a.scrollIntoEnd,i=a.scrollIntoStart;return(0,l.useEffect)((function(){n&&("bottom-focused"===r?o():i())}),[n,o,i,r]),t},ne=n(86667);function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe=(0,l.forwardRef)((function(e,t){var n,r=e.audioAvailable,a=e.countryCode,o=void 0===a?navigator.language:a,i=e.title,s=e.conversationId,u=e.conversationSource,f=e.children,p=e.isLastMessage,h=e.onRetry,v=e.sender,x=e.error,j=e.errorType,C=e.id,E=e.progress,S=e.noAvatar,P=e.message,R=void 0===P?"":P,M=e.contextType,D=e.responseInProgress,G=void 0!==D&&D,L=e.isActive,B=void 0!==L&&L,Z=e.suggestions,H=e.sources,K=e.handleScreenshotClipboard,Q=e.screenshotClipboardPending,re=e.highlightedTexts,ie=e.links,se=e.quotation,ce=e.model,le=e.files,de=e.originLink,ue=e.addNewChat,fe=e.writingModeState,pe=e.rich_response,he=e.richResponseSelectedIndex,me=e.shopping_list,ve=e.images_list,ge=e.layout,xe=(0,c.Su)(),be=xe.loggerService,we=xe.clipboardService,ye=(0,w.$G)().t,je=(0,z.Z)().pushNotification,Ce=(0,Y.d)().saveMessage,ke=(0,q.H)({messageSpecificLayout:ge}).messageLayout,Oe=(0,ee.s)().conversation,_e=(0,ne.E)().isAriaAnalyzing,Ae=(0,c.Cg)().consentNeeded,Ee=(0,d.GgQ)().isSiaEnabled,Se=(0,d.J0e)().isSourceLinksEnabled,Ne=(0,d.coc)().chatContext,Ie=(0,d.WGj)().rephraseMessagePatch,Te=(0,d.tkH)().clearFeedbackState,Pe=(0,l.useRef)(null);(null==Ie?void 0:Ie.messageId)==="message-".concat(C)&&Ie.message&&(R=Ie.message);var Re=(0,l.useCallback)((0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!pe){e.next=6;break}return e.next=4,we.writeSeparatedTitleDescription({title:pe.first_message,description:pe.main_texts[he||0].text});case 4:e.next=8;break;case 6:return e.next=8,we.formatRespectingCopy(R,document.querySelector("#message-".concat(C," .body .content")));case 8:je(ye("copied"),"info"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),be.error("Copy message error:",e.t0),je(ye("error_occurred_message"),"error");case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[C,R,he,pe,we]),Me=(0,l.useCallback)((function(e){Ce({message:"",sender:y.CI.aria,messageId:C,conversation:Oe,richResponseSelectedIndex:e})}),[Oe,Ce,C]);(0,l.useEffect)((function(){Te()}),[Te,s]);var De=se&&!!se.length,Ge=Ne.message,Le=v===y.CI.aria&&p&&Ne.messageId===C&&["tab-view","sidebar","selected-content-prompt"].includes(u),Be=!E&&!G&&v===y.CI.aria&&!Ae,Ze=(0,l.useMemo)((function(){var e,t=R;null!=fe&&fe.action?(t=fe.action+": \n"+R,t=(e={},(0,g.Z)(e,W.o9.GENERATE_TEXT,ye("generate_text")),(0,g.Z)(e,W.o9.TWEAK,ye("tweak_it")),(0,g.Z)(e,W.o9.SPELLCHECK,ye("spellcheck")),(0,g.Z)(e,W.Hr.OUTPUT_EDITING,ye("output_editing")),(0,g.Z)(e,W.Hr.LONGER,ye("make_it_longer")),(0,g.Z)(e,W.Hr.SHORTER,ye("make_it_shorter")),(0,g.Z)(e,W.Hr.ADD_EMOJI,ye("add-emoji")),(0,g.Z)(e,W.Hr.ADD_HASHTAGS,ye("add_hashtags")),e)[null==fe?void 0:fe.action]+": \n"+R):_e&&p&&Ne.working&&(t=ye("constructing_response"));return Le&&Ge||t}),[Ne.working,Ge,_e,p,R,Le,ye,fe]),He=Ee&&(null==Z?void 0:Z.suggestionList.length),Ke=!(G&&p)&&(Se&&((null==H||null===(n=H.sourceList)||void 0===n?void 0:n.length)||ve||me)||He),Fe=(0,c.o6)({ariaMessageHover:"",backgroundFromUser:"message-from bg-transparent",backgroundFromAria:"message-to bg-levels-l4-message-bg",operaGx:{ariaMessageHover:""},operaAir:{ariaMessageHover:"",backgroundFromAria:"message-to bg-transparent"}},["ariaMessageHover","backgroundFromUser","backgroundFromAria"]);return"USER_LIMIT"===j||"IMAGES_LIMIT"===j?null:(0,k.jsx)($.Provider,{value:Pe,children:(0,k.jsx)(te,{enabled:Boolean(p&&x),strategy:Boolean(null==Z?void 0:Z.suggestionList.length)?"bottom-focused":"options-focused",children:(0,k.jsxs)("div",ae(ae({"data-testid":p&&(0,A.wE)(oe,"div","is-last-message"),className:(0,A.AK)(Boolean(x)&&"bg-transparent",v===y.CI.aria&&Fe.ariaMessageHover,B&&"active","group/message text-body-l message wrap relative box-border flex flex-row gap-aria-4 rounded-aria-radius-3 border border-solid border-transparent px-4 py-5 text-text-t1-text-active-icons",v==y.CI.user?Fe.backgroundFromUser:Fe.backgroundFromAria),id:"message-".concat(C),"data-sentry-ignore":!0,ref:t},G&&p&&{"data-testid":(0,A.wE)(oe,"div","response-in-progress")}),{},{children:[!S&&(0,k.jsx)("div",{className:"block shrink-0",children:(0,k.jsx)(I.P,{error:x,sender:v,model:ce,includeFileLoadingState:p})}),(0,k.jsxs)("div",{ref:Pe,className:(0,A.AK)("body",Boolean(x)&&"flex flex-col-reverse"),children:[Be&&(0,k.jsx)(_.Z,{ariaReadVoiceAvailable:r,isLastMessage:p,conversationId:s,messageId:C,onRetry:h,onCopy:Re,error:x,errorType:j,isEmptyMessage:!R.trim()&&!pe,clipboardScreenshotButtonDisabled:Q,handleScreenshotClipboard:K,addNewChat:ue}),(0,k.jsx)(O,{links:ie,title:i,isNonTempDisplayedMessage:!(!Le||!Ge),sender:v,progress:E,message:Ze,isCurrentlyGeneratedMessage:Le,countryCode:o,contextType:M,id:C,richContentExists:Boolean(pe),children:pe&&(0,k.jsx)(X.bZ,{content:pe,selectedAnswerIndex:he,updateRichResponseSelectedIndex:Me,isLocked:!Boolean(p),answerCategory:(0,X.tN)({rich_response:pe,images_list:ve,shopping_list:me}),links:ie})}),v===y.CI.user&&Boolean(null==re?void 0:re.length)&&(0,k.jsx)("div",{className:"flex flex-wrap",children:re.map((function(e){return(0,k.jsx)(N,{variant:"message",title:e},"".concat(C,"-highlighted_text-").concat(e))}))}),v===y.CI.user&&!(null==le||!le.length)&&(0,k.jsx)(F,{files:le,readonly:!0,isMessageResponse:!0}),de&&de.url&&(0,k.jsx)(U.H,{sources:{sourceList:[de]},id:"context-mode-link",source:u}),f&&f,!G&&De&&(0,k.jsx)(V.Z,{quotation:se}),Ke&&(0,k.jsx)(J,{children:function(e){var t=e.layoutUpdateCallbackByCollapsibleStatus;return(0,k.jsx)(T.Z,{suggestions:Z,sources:H,id:C,source:u,images_list:ve,shopping_list:me,messageLayout:ke,layoutUpdateCallbackByCollapsibleStatus:t})}})]})]}))})})}));const ie=oe,se=n.p+"assets/b1a49f1790d1b4a705cb.svg";var ce=n(50198);const le=function e(t){var n=t.conversationId,r=t.inputRef,a=t.messagesContainerRef,o=t.message,i=t.isUpgradeBannerVisible,s=(0,l.useState)(!1),c=(0,v.Z)(s,2),d=c[0],u=c[1],f=(0,l.useState)(!1),p=(0,v.Z)(f,2),h=p[0],m=p[1],g=(0,l.useRef)(null),x=null==r?void 0:r.current;function b(){(0,A.Mx)(a),u(!1),m(!0),setTimeout((function(){m(!1)}),ce.DH)}return(0,l.useEffect)((function(){var e;if(g.current){var t=o?+(null==x?void 0:x.clientHeight):ce.bX;t+=x?ce.un:ce.YO,t+=i?ce.gp:0,g.current.style.setProperty("bottom","".concat(null!==(e=t)&&void 0!==e?e:0,"px"))}}),[x,o,n,i]),(0,l.useEffect)((function(){var e=null==a?void 0:a.current;if(e){var t=function(){var t=e.scrollHeight-(e.clientHeight+e.scrollTop);u(t>e.clientHeight/2&&!h)};return t(),e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}}}),[a,n,h]),(0,k.jsx)("div",{className:"relative m-auto w-full max-w-tab-view ",children:(0,k.jsx)("div",{ref:g,className:"absolute bottom-8 right-5",children:(0,k.jsx)(Z.hU,{dataTestId:(0,A.wE)(e,"button","scrollDown"),className:(0,A.AK)(d?"z-1 opacity-100":"-z-1 cursor-none opacity-0"),tabIndex:0,onClick:b,onKeyUp:b,icon:se,type:"secondary"})})})};var de=n(93379),ue=n.n(de),fe=n(7795),pe=n.n(fe),he=n(90569),me=n.n(he),ve=n(68575),ge=n.n(ve),xe=n(19216),be=n.n(xe),we=n(44589),ye=n.n(we),je=n(41807),Ce={attributes:{source:"aria-extension"}};Ce.styleTagTransform=ye(),Ce.setAttributes=ge(),Ce.insert=me().bind(null,"head"),Ce.domAPI=pe(),Ce.insertStyleElement=be();ue()(je.Z,Ce);je.Z&&je.Z.locals&&je.Z.locals;const ke=n.p+"assets/637f22f6137db0081579.svg",Oe=n.p+"assets/046461fc1a778fe43d99.svg",_e=n.p+"assets/823d989847c2950d3b26.svg",Ae=n.p+"assets/9abe40fc417dcd471d7d.svg";const Ee=function(e){var t=e.children,n=e.isAriaModel,r=(0,l.useState)(!1),a=(0,v.Z)(r,2),o=a[0],i=a[1],s=(0,l.useRef)(null),u=(0,d.YZY)().isOperaOne,f=["orange","pink","purple","green"],p=2*c.sh,h=3*c.sh;return(0,k.jsxs)("div",{className:"input-animation-wrapper ".concat(o?"active":""),ref:s,id:"input-animation-wrapper",children:[(0,k.jsx)("div",{className:"input-wrapper",onFocus:function(){o||(f.forEach((function(e){s.current&&(s.current.style.setProperty("--input-animation-position-".concat(e,"-left"),(0,A.cL)(25,75)+"%"),s.current.style.setProperty("--input-animation-position-".concat(e,"-top"),(0,A.cL)(45,55)+"%"),s.current.style.setProperty("--input-animation-duration-".concat(e),(0,A.cL)(p,h)/c.sh+"s"))})),i(!0),setTimeout((function(){return i(!1)}),1100))},children:t}),o&&u&&n&&(0,k.jsxs)("div",{className:"gradient-wrapper",children:[(0,k.jsx)("img",{src:Oe,alt:"",className:"gradient",draggable:"false"}),(0,k.jsx)("img",{src:_e,alt:"",className:"gradient",draggable:"false"}),(0,k.jsx)("img",{src:Ae,alt:"",className:"gradient",draggable:"false"}),(0,k.jsx)("img",{src:ke,alt:"",className:"gradient",draggable:"false"})]})]})};var Se=n(49759),Ne=n(31372);const Ie=function(e){var t=e.reusableHighlights,n=(0,d.lUI)().removeReusableHighlight,r=(0,l.useCallback)((function(e){return function(){return n(e)}}),[n]),a=(0,c.o6)({container:""},["container"]);return(0,k.jsx)("div",{className:(0,A.AK)("flex w-fit select-none flex-nowrap items-end justify-start gap-1",a.container),children:t.map((function(e){var t=e.id,n=e.title;return(0,k.jsx)(N,{onChipRemove:r(t),title:n},t)}))})},Te=n.p+"assets/71530e764db142499250.svg",Pe=n.p+"assets/662c2eab0596ae6d6ead.svg";var Re=(0,l.forwardRef)((function(e,t){var n=e.disabled,r=e.onAction,a=(0,l.useRef)(null),o=(0,c.XI)(a),i=(0,d.ljr)().remoteConfig,s={icon:Te,color:n?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",iconClass:{light:"light",dark:"dark"},button:"rounded-aria-radius-2 hover:bg-surface-on-hover dark:hover:bg-buttons-secondary-border-hover",operaGx:{icon:Pe,button:"rounded-aria-radius-3 hover:bg-classic-gx-no-77 dark:hover:bg-classic-gx-no-20"},operaAir:{color:n?"var(--text-t3-text-gray)":o?"var(--text-tb)":"var(--text-t1-text-active-icons)",button:"rounded-aria-radius-5 hover:bg-surface-on-hover dark:hover:bg-buttons-secondary-border-hover"}};return(0,k.jsxs)("label",{ref:a,className:(0,A.AK)("flex h-10 min-w-10 items-center justify-center p-2",(0,c.o6)(s,"button"),n?"cursor-not-allowed":"cursor-pointer"),"data-testid":(0,A.wE)(Re,"label","upload"),children:[(0,k.jsx)("input",{id:"upload-image-input",ref:t,type:"file",className:"sr-only",accept:(0,ce.Cr)([].concat((0,h.Z)(ce.v5),(0,h.Z)(i.read_and_save_files?[].concat((0,h.Z)(ce.Go),(0,h.Z)(ce.vH)):[]))),multiple:!0,disabled:n,onChange:function(e){n||null==r||r(e.target.files)}}),(0,k.jsx)(S.S,{config:s})]})}));Re.displayName="UploadImageButton";const Me=function e(t){var n=t.content,r={container:"px-[10px] pt-[2px] bg-secondary-s1-selected-stroke",text:"text-text-t1-text-active-icons text-body-s !leading-[20px]",rounded:t.middle?"rounded-none":"rounded-t-[8px]",operaGx:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-1"},operaAir:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-3"}},a=(0,c.o6)(r,["rounded","text","container"]);return(0,k.jsx)("p",{className:(0,A.AK)("w-full",a.container,a.text,a.rounded),"data-testid":(0,A.wE)(e,"p","disclaimer"),children:n})};var De=n(93075),Ge=n(85983),Le=n(66037);const Be=n.p+"assets/5c2425d1f6cda1251f8c.svg";var Ze=function(e){var t=e.content,n=e.isOpen,r=e.setIsOpen,a=(0,De.YF)({middleware:[(0,Ge.cv)({mainAxis:16})],placement:"top-end",open:n,onOpenChange:r,whileElementsMounted:Le.Me}),o=a.refs,i=a.floatingStyles,s=(0,l.useRef)(null),d=(0,c.XI)(s),u={button:"mb-1 h-10 hover:bg-buttons-secondary-border-hover",moreIconColor:"default",operaGx:{button:"mb-1 h-10 rounded-sm hover:bg-levels-l2-hover",moreIconColor:d?"var(--text-t1-text-active-icons)":"default"},operaAir:{button:"mb-1 h-10 hover:bg-primary-p2-hover-buttons",moreIconColor:d?"var(--text-tb)":"default"}},f=(0,c.o6)(u,["button","moreIconColor"]);return(0,k.jsxs)("div",{className:"flex h-full items-end",children:[(0,k.jsx)("div",{ref:s,children:(0,k.jsx)("button",{ref:o.setReference,className:(0,A.AK)("flex w-6 items-center justify-center rounded-md",f.button),type:"button",onClick:function(){r((function(e){return!e}))},tabIndex:-1,children:(0,k.jsx)("span",{className:(0,A.AK)("flex items-center justify-center transition-all duration-200"),children:(0,k.jsx)(S.S,{src:Be,size:16,color:f.moreIconColor})})})}),n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(De.y0,{className:"z-1",onClick:function(){return r(!1)}}),(0,k.jsx)(De.ll,{children:(0,k.jsx)("div",{ref:o.setFloating,className:"z-2",style:i,children:t})})]})]})},He=n(58489),Ke=function(e){return e.LEFT="left-0",e.TOP_RIGHT="top-0 right-0",e.BOTTOM_RIGHT="bottom-0 right-0",e}({});function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({action:Ne.VV.CLICK,element:Ne.Y3.COMPOSE,context:Ne.hG.SIDEBAR},e||{});(0,He.vH)(t)}function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";return Array.from(e).map((function(e){var n=(0,v.Z)(e,2),r=n[0],a=n[1];return 0===a||Boolean(a)?[r,a].join(t):r})).join(n)}const Ve=n.p+"assets/bd0504d286f5e3431f45.svg",ze=n.p+"assets/4f310ff7d409a774155a.svg";function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isTextVisible,o=void 0===a||a,i=e.onAction,s=(0,l.useRef)(null),d=(0,c.XI)(s),u=(0,w.$G)().t,f=n||!r,p=(0,c.oH)().isAriaInTabView,h={composeIcon:{icon:Ve,size:32,color:f?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},composeDisabledHoverIcon:{icon:ze,size:32,color:f?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},caption:{operaAir:"!capitalize"}},m=(0,c.o6)(h,["caption"]);return(0,k.jsxs)(Z.zx,{ref:s,type:"context-menu",disabled:f,onClick:function(e){f?e.preventDefault():(null==i||i(),location.href="#prompt-studio?".concat(t),Fe({context:p?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR}))},className:(0,A.AK)("justify-between gap-1"),children:[!r&&d?(0,k.jsx)(D.u,{className:"max-w-[250px] leading-5",offsetValue:15,title:u("compose_not_available"),children:function(e){var t=e.ref,n=e.referenceProps;return(0,k.jsx)("span",Xe(Xe({ref:t},n),{},{children:(0,k.jsx)(S.S,{config:h.composeDisabledHoverIcon})}))}}):(0,k.jsx)(S.S,{config:h.composeIcon}),o&&(0,k.jsx)("span",{className:(0,A.AK)("text-header-s",m.caption),children:u("compose")})]})};const qe=n.p+"assets/73a295398a2e696b7910.svg";var $e=function(e){var t=e.onAction,n=e.disabled,r=e.sendMessage,a=(0,d.coc)().chatContext,o=(0,w.$G)().t,i=(0,c.oH)().isAriaInTabView,s=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t||t(),r({source:i?"tab-view":"sidebar",text:o("summarize_this_chat"),isRetryDisabled:!0,endpointType:"endpointSummarizeChatV2"}),(0,He.vH)({action:Ne.VV.WRITING,element:Ne.Y3.CHAT,context:i?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,model:"Aria",str_value:"summary"});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l={summarizeIcon:{icon:qe,size:32,color:n?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},container:"justify-between gap-1",caption:{operaAir:"!capitalize"}},u=(0,c.o6)(l,["container","caption"]);return(0,k.jsxs)(Z.zx,{type:"context-menu",className:(0,A.AK)(u.container),disabled:a.working||n,onClick:s,children:[(0,k.jsx)(S.S,{config:l.summarizeIcon}),(0,k.jsx)("span",{className:(0,A.AK)("text-header-s",u.caption),children:o("summarize_chat")})]})},Qe=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isChatEmpty,o=e.sendMessage,i=(0,l.useState)(!1),s=(0,v.Z)(i,2),d=s[0],u=s[1],f=function(){u(!1)},p=(0,c.o6)({content:"bg-levels-l5-primary p-1",contentBorder:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"bg-secondary-s1-selected-stroke my-1 h-px",moreIconColor:"default",operaAir:{content:"bg-levels-l5-primary p-1 air-level-02",contentBorder:"rounded-aria-radius-4",separator:"bg-transparent h-1"}},["content","contentBorder","separator","moreIconColor"]);return(0,k.jsx)(Ze,{content:(0,k.jsxs)("div",{className:(0,A.AK)("flex flex-col",p.content,p.contentBorder),children:[(0,k.jsx)(Ye,{message:t,disabled:n,isComposeAvailable:r,onAction:f}),!a&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:(0,A.AK)(p.separator)}),(0,k.jsx)($e,{onAction:f,disabled:n,sendMessage:o})]})]}),isOpen:d,setIsOpen:u})},Je=n(39157),et=function(e){var t=e.conversationId,n=e.conversation,r=(0,d.Itl)().checkIfExistInRegistry,a=(0,d.J7o)().currentModel,o=(0,l.useMemo)((function(){return"_new"===t||n.data.length<=2&&!n.model}),[t,n]),i=(0,l.useMemo)((function(){return o?"Aria"===a:(0,Se.wO)(n.model)}),[o,a,n.model]),s=(0,l.useMemo)((function(){return r(o?a:n.model)}),[o,a,n.model,r]),c=(0,l.useMemo)((function(){return o?a:n.model||"cloud"}),[o,a,n.model]),u=(0,l.useMemo)((function(){var e=c.split("/");return(null==e?void 0:e.length)<2?c:e[1]}),[c]);return{isAriaModel:i,isCloudModel:s,modelName:c,parsedModelName:u}};const tt=function(e){var t=e.handleImageUpload,n=e.setMessage,r=e.addNewChat,a=(0,w.$G)().t,o=(0,c.Su)().loggerService,i=(0,d.nT6)().selectedImageDataUrl,s=(0,d.zLZ)().handleImageFromPageDeleted;(0,l.useEffect)((function(){var e=function(){var e=(0,m.Z)(b().mark((function e(){var c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!i){e.next=16;break}if(r(),n(a("hey_aria_whats_on_this_image")),c=null,!i.startsWith("http")){e.next=11;break}return e.next=8,(0,B.q$)(i);case 8:c=e.sent,e.next=12;break;case 11:c=(0,B.gk)(i);case 12:if(!c){e.next=15;break}return e.next=15,t([c]);case 15:s();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),o.error("Error fetching image:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();i&&e()}),[i])};var nt=function(e){return"string"==typeof e?e:Array.isArray(e)?e.includes(c.vR)?c.vR:e.includes(c._e)?c._e:e[0]||"":""},rt=(0,l.forwardRef)((function(e,t){var n,r,a,o,i=e.addNewChat,s=e.imageHandlers,u=e.readOnly,f=e.message,p=e.setMessage,h=e.sendMessage,g=e.conversation,x=e.createTimestamp,y=e.messagesContainerRef,j=e.onActiveUserMessageIndexChange,C=e.menuStatus,O=e.conversationId,_=e.disabled,E=s.files,S=s.upload,N=s.removeFile,I=s.reset,T=s.limitReached,P=(0,c.oH)().isAriaInTabView,R=(0,w.$G)().t,M=et({conversationId:O,conversation:g}),D=M.isAriaModel,G=M.isCloudModel,L=M.parsedModelName,B=(0,l.useRef)(null),H=(0,l.useRef)(null),K=(0,d.coc)().chatContext,U=(0,d.J7o)(),V=U.currentModel,z=U.fetchedModels,W=(0,d.kGW)(g.id).reusableHighlights,X=(0,c.Cg)().consentNeeded,Y=(0,d.B9q)().newConversationRequest,q=(0,d.cpB)().promptStudioConfig,$=(0,l.useState)(!1),Q=(0,v.Z)($,2),J=Q[0],ee=Q[1],te=(0,l.useState)(!1),ne=(0,v.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,l.useState)(c.V5?c.vR:c._e),ie=(0,v.Z)(oe,2),se=ie[0],ce=ie[1],le=""===se?R("type_here"):R("chat_input_placeholder",{shortcut:se,interpolation:{escapeValue:!1}}),de=(0===g.data.length&&(null==Y||Y.message),K.working&&K.conversationId===O),ue=function(e){if(!de||"enter"!==e){var t=de?"":f;h({text:t,source:P?"tab-view":"sidebar",files:E}),B.current,t&&t.length>=c.Fb&&I(),(0,A.X0)(y),ee(!1)}},fe=(0,l.useCallback)((function(){if((0,A.N2)(null==y?void 0:y.current)&&(0,A.Mx)(y,"instant"),(null==B?void 0:B.current)instanceof HTMLTextAreaElement){B.current.style.height="0px";var e=c.uj;f?(B.current.scrollHeight>c.uj&&(e=Math.min(B.current.scrollHeight,c.$Y)),B.current.style.height="".concat(e,"px")):B.current.style.height="".concat(e,"px")}}),[f,K.working,D]);(0,l.useEffect)((function(){opr.shodanPrivate.getCommandLineShortcut&&opr.shodanPrivate.getCommandLineShortcut((function(e){ce(nt(e))}))}),[]),(0,l.useEffect)((function(){if(opr.shodanPrivate.getCommandLineShortcut){var e=function(){opr.shodanPrivate.getCommandLineShortcut((function(e){ce(nt(e))}))};return window.addEventListener("focus",e),function(){window.removeEventListener("focus",e)}}}),[]),(0,l.useEffect)((function(){var e=function(){if((null==B?void 0:B.current)instanceof HTMLTextAreaElement){var e=B.current.placeholder,t=Math.floor((0,Se.VU)(e)),n=B.current.clientWidth-20;ae(t>n)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[re]),(0,l.useEffect)((function(){g.mode===Je.E.pageContext||g.mode===Je.E.writingMode?(0,A.Cp)(y):(0,A.Mx)(y),setTimeout((function(){var e;null===(e=B.current)||void 0===e||e.focus()}),0)}),[g.id,g.mode,x,y]),(0,l.useEffect)((function(){fe()}),[fe]),(0,l.useEffect)((function(){B.current&&B.current.focus()}),[g.id,g.data.length]),(0,l.useEffect)((function(){var e,t=function(){var e;null===(e=B.current)||void 0===e||e.focus()};return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[]),(0,l.useEffect)((function(){if(!C){var e=setTimeout((function(){var e;null===(e=B.current)||void 0===e||e.focus()}),300);return function(){return clearTimeout(e)}}}),[C]);var pe=(0,l.useCallback)(function(){var e=(0,m.Z)(b().mark((function e(t){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t),null===(n=B.current)||void 0===n||n.focus();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[S]);tt({handleImageUpload:pe,setMessage:p,addNewChat:i});var he=!D&&!(null===(n=z.find((function(e){return e.family_name===(0,A.zn)("Aria"!==V?V:g.model||"").split(":")[0]})))||void 0===n||null===(n=n.kind)||void 0===n||!n.includes(Ne.kk.MULTIMODAL)),me=(0,l.useMemo)((function(){return(null==g?void 0:g.mode)===Je.E.pageContext}),[null==g?void 0:g.mode]),ve=(0,l.useMemo)((function(){var e;return null!=g&&null!==(e=g.originLink)&&void 0!==e&&e.url?(0,A.z7)(g.originLink.url):R("page_context")}),[null==g||null===(r=g.originLink)||void 0===r?void 0:r.url,R]),ge=(0,l.useMemo)((function(){return!D||me}),[D,me]),xe=(null!==(a=null==B||null===(o=B.current)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>c.V6&&!u&&D,be={outerContainer:"rounded-aria-radius-3 bg-levels-l1-chat-bg-bg-elements",inputContainer:"rounded-aria-radius-3 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t1-text-active-icons",textareaPaddingCorrection:"pl-2 pt-[10.2px]",textareaPlaceholderText:"placeholder:text-text-t3-text-gray",modelDisclaimerInputContainer:ge&&"rounded-t-none",operaGx:{textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-2 pt-[10px] !leading-[20px]",modelDisclaimerInputContainer:""},operaAir:{outerContainer:"",inputContainer:"rounded-aria-radius-5 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-4 pt-[12px]",modelDisclaimerInputContainer:""}},we=(0,c.o6)(be,["outerContainer","inputContainer","textarea","textareaPaddingCorrection","textareaPlaceholderText","modelDisclaimerInputContainer"]);return(0,k.jsxs)("div",{className:"chat-input-wrapper flex flex-col justify-end",children:[(0,k.jsx)("div",{className:"relative z-50 mx-3",children:(0,k.jsxs)("div",{className:"absolute -bottom-2 flex flex-col gap-1",children:[!!W.length&&(0,k.jsx)(Ie,{reusableHighlights:W}),!!E.length&&(0,k.jsx)(F,{files:E,onRemove:function(e){H.current&&(H.current.value=""),N(e)}})]})}),(0,k.jsxs)("div",{className:(0,A.AK)("z-1 box-border flex w-full select-none items-center justify-center gap-1 p-3",P&&"mb-3",we.outerContainer),children:[(0,k.jsx)("div",{className:"grow",children:(0,k.jsx)(Ee,{isAriaModel:D,children:(0,k.jsxs)("div",{className:(0,A.AK)("flex flex-col items-center"),children:[!D&&(0,k.jsx)(Me,{content:R(G?"cloud_model_input_disclaimer":"using_local_model",{modelName:L})}),me&&(0,k.jsx)(Me,{middle:!D,content:R("page_context_disclaimer",{pageName:ve})}),(0,k.jsxs)("div",{ref:t,className:(0,A.AK)("input-container relative flex w-full select-none items-end",we.inputContainer,we.modelDisclaimerInputContainer),children:[xe&&(0,k.jsx)("div",{className:"text-body-s absolute -bottom-3 left-2 !text-[8px] text-text-t1-text-active-icons",children:"".concat(f.length,"/").concat(c.tX)}),(0,k.jsx)("textarea",{"data-testid":(0,A.wE)(rt,"textarea","chat-input"),className:(0,A.AK)("hover-scrollbar chat-input m-0 my-1 h-10 w-full resize-none overflow-auto border-none bg-transparent pb-2.5 pr-1 outline-none",we.textarea,we.textareaPaddingCorrection,we.textareaPlaceholderText),placeholder:D?W.length>0?R("type_new_prompt_about_selected_content"):le:R("type_here_to_local_model"),maxLength:D?c.tX:void 0,onChange:function(e){p(e.target.value)},value:f,ref:B,onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey?(e.preventDefault(),ue("enter")):"ArrowUp"!==e.key||J?"ArrowDown"!==e.key||J?setTimeout((function(){var e;ee(Boolean(null===(e=B.current)||void 0===e?void 0:e.value))}),0):(e.preventDefault(),j(1)):(e.preventDefault(),j(-1))},onInput:fe,onPaste:function(){return ee(!0)},disabled:_}),(0,k.jsxs)("div",{className:"mb-1 ml-1 flex flex-row items-center gap-1",children:[(he||D)&&!_&&(0,k.jsx)(Re,{disabled:T,onAction:pe,ref:H}),(0,k.jsx)(Z.Rg,{className:"mr-1 h-10 w-10",state:f.trim().length>=c.Fb||de?de?"processing":"default":"disabled",onClick:function(e){var t;e.preventDefault(),null===(t=B.current)||void 0===t||t.focus(),ue("submitButton")}})]})]})]})})}),D&&!X&&(0,k.jsx)(Qe,{message:f,disabled:K.working,isComposeAvailable:q&&Boolean(q.length),isChatEmpty:0===g.data.length,sendMessage:h})]})]})}));rt.displayName="InputContainer";const at=rt;var ot=n(75923),it=n(4916),st=n(22258);const ct=function e(t){var n=t.isBordered,r=void 0===n||n,a=t.id,o=t.currentLabel,i=t.setEditId,s=(0,l.useState)(""),d=(0,v.Z)(s,2),u=d[0],f=d[1],p=(0,w.$G)().t;(0,l.useEffect)((function(){f(o)}),[o]);var h=(0,l.useRef)(null),g=function(){var e=(0,m.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,it.hV)(a);case 2:return t=e.sent,e.next=5,(0,ot.X1)(t.id,{label:u.trim()||p("empty_title"),isLabelGenerated:!1});case 5:i(null);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){var e=function(e){h.current&&!h.current.contains(e.target)&&i(null)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[i,h]);var x={container:{operaOne:"py-aria-3",operaGx:"py-aria-3",operaAir:"py-aria-3"},input:"!h-8 flex-grow",border:{operaOne:r?"px-aria-3 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-3":"",operaGx:r?"px-aria-3 border-levels-l2-hover border border-solid rounded-aria-radius-3":"",operaAir:r?"px-2 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-5":""}},y=(0,c.o6)(x,["container","input","border"]);return(0,k.jsxs)("div",{className:(0,A.AK)("flex w-full flex-row gap-2",y.container,y.border),ref:h,children:[(0,k.jsx)(Z.oi,{className:y.input,maxLength:c.wN,value:u,ref:function(e){e&&(e.focus(),e.scrollLeft=e.scrollWidth)},onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},onChange:function(e){return t=e.target.value,void f(t);var t},onKeyDown:function(e){!function(e){"Enter"==e.key&&0==e.shiftKey&&(e.preventDefault(),g())}(e)}}),(0,k.jsxs)("div",{className:"flex flex-row gap-aria-2",children:[(0,k.jsx)(Z.hU,{dataTestId:(0,A.wE)(e,"button","decline"),border:!0,icon:M,type:"tertiary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:function(){return i(null)}}),(0,k.jsx)(Z.hU,{dataTestId:(0,A.wE)(e,"button","submit"),border:!0,icon:st,type:"primary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:g})]})]})};var lt=n(36609);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ft=(0,l.memo)((function(e){var t=e.textStyle,n=e.value,r=e.isTooltipEnabled,a=e.isAnimated,o=r?e.onClick:void 0,i=a?e.onAnimationFinish:void 0,s=a?e.animationDuration:void 0,d=a?e.animationDelay:void 0,u=(0,l.useState)(!0),f=(0,v.Z)(u,2),p=f[0],h=f[1];(0,l.useEffect)((function(){h(!0)}),[n]),(0,l.useEffect)((function(){if(a){var e=setTimeout((function(){h(!1),setTimeout((function(){h(!0),null==i||i()}),s)}),d);return function(){clearTimeout(e)}}}),[a,i,s,d]);var m=(0,c.o6)({container:"box-border inline-block max-w-full overflow-hidden text-nowrap p-2 transition duration-250",rounded:"rounded-aria-radius-3",hover:"hover:bg-levels-l2-hover hover:cursor-pointer",operaGx:{rounded:"rounded-aria-radius-2",hover:"hover:bg-text-t3-text-gray hover:cursor-pointer"},operaAir:{rounded:"rounded-aria-radius-4",hover:"hover:bg-secondary-s3-bg-icons hover:cursor-pointer"}},["container","hover","rounded"]);return r?(0,k.jsx)(D.u,{className:(0,A.AK)("max-w-[250px] animate-appear"),title:(0,lt.t)("click_to_edit_name"),offsetValue:8,children:function(e){var r=e.ref,i=e.referenceProps;return(0,k.jsx)("span",ut(ut({className:(0,A.AK)(t||"",m.container,m.hover,m.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(s,"ms")}:void 0,role:"button",tabIndex:-1,onClick:o,onKeyUp:o,ref:r},i),{},{children:n}))}}):(0,k.jsx)("span",{className:(0,A.AK)(m.container,m.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(s,"ms")}:void 0,children:n})})),pt=n(89250),ht=n(53744),mt=n(96885),vt=n(61401);function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const bt=function(e){var t=e.model,n=e.currentModel,r=e.onClick,a=(0,l.useRef)(null),o=(0,mt.d)(a),i="Aria"===t.name?["Aria",""]:(0,A.zn)(t.name).split(":"),s=(0,v.Z)(i,2),c=s[0],d=s[1],u=(0,l.useMemo)((function(){return n===(null==t?void 0:t.name)}),[n,t]);return(0,k.jsx)("div",{className:(0,A.AK)("mx-2 flex flex-row items-center justify-between gap-2 border-b border-solid border-secondary-s1-selected-stroke py-2 text-text-t1-text-active-icons last:border-none","Aria"===t.name&&"text-text-gray"),children:(0,k.jsxs)("div",xt(xt({className:"flex w-full flex-row items-center justify-between gap-2 overflow-hidden"},o&&{title:(0,A.zn)(t.name)}),{},{children:[(0,k.jsxs)("div",{className:(0,A.AK)("flex flex-col justify-between overflow-hidden"),children:[(0,k.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap !capitalize",ref:a,children:c}),d&&(0,k.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap text-text-gray",ref:a,children:d})]}),(0,k.jsx)("div",{children:(0,k.jsx)(vt.Z,{id:"radio_input_type",checked:u,onChange:function(){r(t)}})})]}))})};function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(n))," ").concat(["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][r])}var yt=n(30845),jt=n(68209);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ot=function(e){return e.map((function(e){var t=e.name,n=e.size,r=e.name.split("/"),a=r[r.length-1];return kt(kt({},e),{},{id:t,name:a,tag:a,size:wt(n),download:{timestamp:Date.parse(e.modified_at),inProgress:null,status:null,total:null}})}))},_t=function(e,t,n){return e&&t?Math.round(e/t*100):n?0:void 0},At=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TextDecoder("utf-8")).decode(e).split("\n").filter((function(e){return e.length}));return t.push.apply(t,(0,h.Z)(n)),t[t.length-1]},Et=function(e,t){var n,r,a,o,i,s;if(!e.download||!t.download)return NaN;var c=!(null!==(n=e.download)&&void 0!==n&&n.timestamp)&&(null===(r=t.download)||void 0===r?void 0:r.timestamp),l=(null===(a=e.download)||void 0===a?void 0:a.timestamp)&&!(null!==(o=t.download)&&void 0!==o&&o.timestamp),d=!(null!==(i=e.download)&&void 0!==i&&i.timestamp||null!==(s=t.download)&&void 0!==s&&s.timestamp);return c?-1:l?1:d?_t(e.download.inProgress,e.download.total,e.download)-_t(t.download.inProgress,t.download.total,t.download):t.download.timestamp-e.download.timestamp},St=(0,yt.Z)((function(e,t,n){return{items:e,handleItemToggling:t,getItemState:n}}));const Nt=function(e){var t=e.isAvailable,n=e.testId,r=e.headerText,a=e.models,o=e.currentModel,i=e.handleKeyDown,s=e.handleOnClick;return t?(0,k.jsxs)("div",{"data-testid":n,children:[(0,k.jsx)("p",{className:"mb-0.5 whitespace-nowrap font-be-vietnam text-xxs font-normal text-text-t1-text-active-icons",children:r}),(0,k.jsx)("div",{className:"flex max-h-[124px] w-full flex-col overflow-auto rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:a.map((function(e){return(0,k.jsx)(bt,{model:{id:e.name,name:e.name},currentModel:o,onKeyDown:function(){return i(e)},onClick:function(){return s(e)}},e.name)}))})]}):null};var It=n(60243);const Tt=function e(t){var n=t.conversationId,r=t.conversation,a=t.addNewChat,o=(0,pt.s0)(),i=(0,w.$G)().t,s=(0,d.coc)().chatContext,c=(0,d.J7o)(),u=c.currentModel,f=c.localModels,p=c.localModelsServiceStatus,h=(0,d.MII)().isLocalModelsEnabled,g=(0,d.ljr)().remoteConfig,x=(0,d.Itl)().fetchedCloudModels,y=(0,d.pb4)().audience,j=(0,d.Qck)().setModel,C=(0,d.Qck)().addModelList,O=(0,l.useState)(!1),_=(0,v.Z)(O,2),E=_[0],S=_[1],N=(0,l.useRef)(null),I=et({conversationId:n,conversation:r}).isAriaModel,T=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||"RUNNING"!==p){e.next=8;break}return e.t0=C,e.t1=Ot,e.next=5,(0,A._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){var t=jt.D.IMAGE_GENERATION,n=jt.D.TEXT,r=jt.$.AI_CLUSTER;return e?e.reduce((function(e,a){var o=a.type,i=a.provider;return o===t?e.imageModels.push(a):i===r?e.aiClusterModels.push(a):o===n&&i!==r&&e.otherTextModels.push(a),e}),{imageModels:[],aiClusterModels:[],otherTextModels:[]}):{imageModels:[],aiClusterModels:[],otherTextModels:[]}}(x),R=P.imageModels,M=P.aiClusterModels,G=P.otherTextModels;(0,l.useEffect)((function(){T()}),[h,p]),(0,ht.O8)(N,(function(){E&&S(!1)})),(0,l.useEffect)((function(){s.working||(r.data.length>1&&r.model?j(r.model):r.data.length>1&&"_new"!==n&&!r.model&&j("Aria"))}),[r.model,n]);var L=(null==y?void 0:y.identifier)===It.$p,B=!I||"Aria"!==u&&"_new"===n||"Aria"!==r.model&&"Aria"!==u,Z=x&&(null==x?void 0:x.length)>0,H=R&&(null==R?void 0:R.length)>0,K=M&&(null==M?void 0:M.length)>0,F=G&&(null==G?void 0:G.length)>0,U=function(){S(!E)},V=B?(0,A.zn)(r.model||u).split(":"):["Aria",""],z=(0,v.Z)(V,2),W=z[0],X=z[1],Y=(0,l.useCallback)((function(e){S(!1),"_new"!==n&&a(),j(e.name)}),[a,n,j]),q=(0,l.useCallback)((function(e){S(!1),j(e.name),a()}),[a,j]);return(0,k.jsxs)("div",{ref:N,className:(0,A.AK)("absolute -top-4 z-2 rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke bg-levels-l5-primary text-text-t1-text-active-icons shadow-md",E&&"overflow-hidden",!E&&B?"max-w-[85px]":"max-w-[153px]"),children:[(0,k.jsx)("div",{role:"button",onKeyDown:U,tabIndex:-1,onClick:U,children:B?(0,k.jsx)("div",{className:"flex flex-col items-center justify-center py-2",children:(0,k.jsx)("div",{className:"w-full gap-2 text-center",children:(0,k.jsxs)("div",{className:(0,A.AK)("flex h-6 flex-col justify-between",X?"h-6":"h-auto"),children:[(0,k.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap px-2 !capitalize",children:W}),X&&(0,k.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap px-2 text-text-gray",children:X})]})})}):(0,k.jsx)("div",{className:"flex h-7 w-full flex-row items-center justify-center px-aria-2 py-aria-4",children:(0,k.jsx)("p",{"data-testid":(0,A.wE)(e,"p","choose-title"),className:"text-header-s-bold text-center",children:i(Z?"choose_model":"choose_local_model")})})}),(0,k.jsx)("div",{className:(0,A.AK)("grid overflow-hidden transition-all duration-300",E?"h-auto":"h-0"),style:{gridTemplateRows:E?"1fr":"0fr"},children:(0,k.jsx)("div",{className:"flex min-h-0 w-full overflow-hidden",children:(0,k.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden p-aria-4 pt-0",children:[E&&B&&(0,k.jsx)("div",{className:"flex w-full flex-row items-center justify-center",children:(0,k.jsx)("p",{"data-testid":(0,A.wE)(e,"p","choose-title"),className:"text-header-s-bold whitespace-nowrap text-center",children:i(Z?"choose_model":"choose_local_model")})}),(0,k.jsx)(Nt,{isAvailable:K,testId:(0,A.wE)(e,"div","cloud-text-models-section"),headerText:i("cloud_models_opera_cluster"),models:M,currentModel:r.model||u,handleKeyDown:q,handleOnClick:Y}),(0,k.jsx)(Nt,{isAvailable:H,testId:(0,A.wE)(e,"div","cloud-image-models-section"),headerText:i("cloud_models_image"),models:R,currentModel:r.model||u,handleKeyDown:q,handleOnClick:Y}),(0,k.jsx)(Nt,{isAvailable:F,testId:(0,A.wE)(e,"div","cloud-api-models-section"),headerText:i("cloud_models_api"),models:G,currentModel:r.model||u,handleKeyDown:q,handleOnClick:Y}),L&&g.local_models&&(0,k.jsxs)(k.Fragment,{children:[f.length?h&&(0,k.jsx)("div",{"data-testid":(0,A.wE)(e,"div","local-models-section"),className:"flex w-full flex-col overflow-clip rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:f.filter((function(e){var t;return!(null!==(t=e.download)&&void 0!==t&&t.inProgress)&&e.size})).map((function(e){return(0,k.jsx)(bt,{model:e,currentModel:r.model||u,onKeyDown:function(){return q(e)},onClick:function(){return Y(e)}},e.name)}))}):(0,k.jsx)("p",{className:"text-body-s mx-auto max-w-[130px] text-text-t3-text-gray",children:i("download_local_models_in_aria_settings")}),(0,k.jsx)(D.zx,{type:"tertiary",onClick:function(){return o("/settings",{state:{initialTab:i("local_models")}})},className:"h-8",children:i("go_to_settings")})]})]})})})]})},Pt=n.p+"assets/ad709c15ec059a326c61.svg",Rt=n.p+"assets/ac7229d3476fb848ffa0.svg",Mt=n.p+"assets/3c2395b3f2a83825f3bb.svg";var Dt=function(e){var t=e.menuStatus,n=e.setMenuStatus,r=(0,d.YZY)().isAir,a=(0,l.useCallback)((function(){n(!t)}),[t,n]);return(0,k.jsx)(Z.hU,{border:!t,className:"flex h-8 w-8 items-center justify-center !p-0",type:t||r?"secondary":"tertiary",onClick:a,onKeyUp:a,iconSize:12,icon:(0,c.o6)({operaOne:Pt,operaAir:Rt,operaGx:Mt})})};Dt.displayName="SwitchMenuButton";const Gt=Dt,Lt=n.p+"assets/e54584d220911040e9a8.svg";var Bt={header:"border-b border-b-secondary-s1-selected-stroke",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header"}};const Zt=function(e){var t=e.children,n=e.modelSelector,r=e.isBorderLess,a=void 0!==r&&r,o=(0,c.oH)().isAriaInTabView,i=(0,c.o6)(Bt,["header"]).header;return(0,k.jsxs)("div",{className:"relative bg-levels-l1-chat-bg-bg-elements",children:[(0,k.jsx)("div",{className:(0,A.AK)("header relative z-1 flex h-14 select-none items-center gap-11 px-3",i,o?"justify-between":"justify-center",a&&"border-none"),children:t}),!!n&&n]})};const Ht=function(e){var t=e.addNewChat,n=e.conversation,a=e.conversationId,o=e.conversationTitle,i=e.isAnimated,s=void 0!==i&&i,u=e.menuStatus,f=e.onAnimationFinish,p=e.setMenuStatus,h=(0,w.$G)().t,m=(0,c.oH)().isAriaInTabView,g=(0,c.iP)().windowInnerWidth,x=(0,d.ljr)().remoteConfig,b=(0,d.MII)().isLocalModelsEnabled,y=(0,d.Itl)().fetchedCloudModels,j=(0,d.Qck)().setModel,C=(0,l.useState)(!1),O=(0,v.Z)(C,2),_=O[0],E=O[1],S=function(){j("Aria"),t()},N=function(){E("_new"!==a)},T=(0,l.useMemo)((function(){return(0,k.jsx)("div",{className:"absolute bottom-0 flex w-full items-center justify-center",children:(0,k.jsx)(Tt,{conversationId:a,conversation:n,addNewChat:t})})}),[a,n,t]),P=(0,l.useMemo)((function(){return x.local_models&&b||(null==y?void 0:y.length)>0}),[x.local_models,b,y]),R=!m&&g>=c.Qx,M=(0,c.o6)({headerProductName:"ml-1 font-mono text-xs font-bold uppercase leading-3.5",headerMenu:"dark:text-white",headerChatTitle:"text-sm",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header",headerMenu:"",headerProductName:"ml-2 font-sf-pro text-sm font-semibold leading-4.5 text-classic-gx-no-00 dark:text-classic-gx-no-100",headerChatTitle:"text-lg"},operaAir:{headerProductName:"ml-2 leading-4.5 text-[14px] text-text-t1-text-active-icons"}},["headerProductName","headerChatTitle","headerMenu"]);return(0,k.jsx)(Zt,{modelSelector:P&&T,children:_?(0,k.jsx)(ct,{isBordered:!1,id:a,currentLabel:o,setEditId:function(e){null===e&&E(!1)}}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:(0,A.AK)("flex h-5 basis-28 items-center sidebarless:visible",M.headerMenu,u?"invisible":"visible"),children:[m&&(0,k.jsxs)("button",{onClick:S,className:"flex items-center",children:[(0,k.jsx)(I.P,{sender:Ne.CI.aria,size:20}),(0,k.jsx)("span",{className:(0,A.AK)("mr-2",M.headerProductName),children:h("product_name.opera")})]}),!R&&(0,k.jsx)(Gt,{menuStatus:u,setMenuStatus:p})]}),(0,k.jsxs)("div",{className:(0,A.AK)("text-body-l flex grow flex-col items-center justify-center overflow-hidden text-ellipsis whitespace-nowrap font-be-vietnam text-text-t1-text-active-icons sidebarless:max-w-[400px]",M.headerChatTitle),children:[r&&(0,k.jsx)("div",{className:"absolute -top-[2px]",children:(0,k.jsx)("small",{children:a})}),s&&f?(0,k.jsx)(ft,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!0,animationDelay:0,animationDuration:1e3,onAnimationFinish:f,onClick:N}):(0,k.jsx)(ft,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!1,onClick:N})]}),(0,k.jsx)("div",{className:"flex basis-28 flex-col items-end",children:(0,k.jsx)(D.hU,{icon:Lt,type:"primary",onClick:S,className:"h-8 w-8 !p-0"})})]})})};var Kt=n(36459);const Ft=function(e){(0,Kt.Z)(e);var t=(0,w.$G)().t;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:"text-body-s mt-3 w-full select-none text-center text-text-t3-text-gray",children:[(0,k.jsx)("span",{children:t("chat_misleading_responses")}),(0,k.jsx)("a",{className:"cursor-pointer underline underline-offset-1",href:"http://help.opera.com/ai-chat-faq",target:"_blank",rel:"noopener noreferrer",draggable:"false",children:t("learn_more")})]})})};const Ut=function(e){(0,Kt.Z)(e);var t=(0,w.$G)().t;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"text-body-s w-full select-none text-center text-text-t3-text-gray",children:(0,k.jsx)("span",{children:t("chat_read_only")})})})};var Vt=Object.keys(c.uk).filter((function(e){return"production"!==e}));const zt=function(){var e=(0,d.fvp)().networkEnvironment,t=(0,d.FQG)().handleNetworkEnvironmentChanged,n=(0,l.useCallback)((function(e){e.preventDefault(),t(e.target.value)}),[t]);return(0,k.jsx)("select",{className:"text-header-l relative z-1 h-5 w-full overflow-hidden bg-levels-l1-chat-bg-bg-elements text-text-t1-text-active-icons",onChange:n,value:e,children:Vt.map((function(e){return(0,k.jsx)("option",{className:"endpoint-option",value:e,children:c.uk[e]},e)}))})};var Wt=n(72075),Xt=function e(t){var n=t.checked,r=t.setChecked,a=t.disabled,o=t.testName,i=void 0===o?"":o,s={wrapperStatic:{operaOne:"rounded-aria-radius-2",operaGx:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-5"},cursorDisabled:a?"cursor-not-allowed":"cursor-pointer",wrapperStatus:{operaOne:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s2-tertiary-need-to-fix",operaAir:n?"bg-text-tb":"bg-secondary-s2-tertiary-need-to-fix"},headStatic:{operaOne:"rounded-aria-radius-1 h-3.5 w-3.5",operaGx:"rounded-aria-radius-1 h-[17px] w-[17px]",operaAir:"w-4.5 h-4.5 rounded-full"},headStaticDisabled:{operaOne:{dark:a?"bg-text-t3-text-gray":"bg-text-tb",light:a?"bg-text-t4":"bg-text-tb"},operaAir:a?"bg-secondary-s3-bg-icons":" bg-text-t1-text-active-icons"},headStatus:{operaOne:n?"translate-x-[22px]":"translate-x-1",operaGx:n?"translate-x-[20px]":"translate-x-[3px]",operaAir:n?"translate-x-4 left-1":"translate-x-0 left-0.5"}};return(0,l.useEffect)((function(){a&&r(!1)}),[a,n,r]),(0,k.jsx)("label",{className:(0,A.AK)("flex select-none items-center"),children:(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("input",{"data-testid":"".concat((0,A.wE)(e,"input",i),"-").concat(n),type:"checkbox",role:"switch",checked:n,onChange:function(){return!a&&r(!n)},className:"sr-only",tabIndex:0}),(0,k.jsx)("div",{className:(0,A.AK)("box block h-5.5 w-10",(0,c.o6)(s,"wrapperStatic"),(0,c.o6)(s,"cursorDisabled"),(0,c.o6)(s,"wrapperStatus"))}),(0,k.jsx)("div",{className:(0,A.AK)("absolute inset-y-0 my-auto flex items-center justify-center transition",(0,c.o6)(s,"headStatic"),(0,c.o6)(s,"headStaticDisabled"),(0,c.o6)(s,"cursorDisabled"),(0,c.o6)(s,"headStatus"))})]})})};const Yt=function(e){var t=e.toggleConfig,n=e.settingName,r=t.checked,a=t.setChecked;return(0,k.jsxs)("div",{className:(0,A.AK)("flex w-full justify-between border-surface-selected"),children:[(0,k.jsx)("div",{className:"flex flex-col justify-center",children:(0,k.jsx)("p",{className:"font-mono text-xxs font-bold uppercase text-text-t1-text-active-icons",children:n})}),(0,k.jsx)(Xt,{checked:r,setChecked:a})]})};function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qt=function(e){var t,n,r=e.hasNewKeysInRemoteConfig,a=e.hasLegacyKeysInRemoteConfig,o=e.setRemoteConfigOverrideAvailable,i=(0,d.ljr)().remoteConfigOverride,s=(0,d.FLN)().setRemoteConfigOverride,u=(0,d.YZY)().isGx,f=(0,w.$G)().t,p=[],h=(0,l.useCallback)((function(){var e=$t({},i),t=m(e);s($t($t({},c.n4),t))}),[i,s]),m=function(e){return Object.values(It._t).forEach((function(t){delete e[t]})),e};return(0,l.useEffect)((function(){(r||a)&&h()}),[r,a,h]),(0,k.jsxs)("div",{className:(0,A.AK)("menu-footer gap-4.5 absolute z-3 mx-4 box-border flex h-fit w-3/4 flex-col items-center justify-center border border-solid border-[--opera-chatbot-message-info-border] bg-levels-l0-extension-bg",u?"mt-2 rounded px-6 py-4":"rounded-lg p-4 shadow-settings"),children:[(0,k.jsxs)("div",{className:"flex flex-col items-center space-y-1 text-center text-black dark:text-white",children:[(0,k.jsxs)("p",{className:"text-base",children:["Aria ",null!==(t=null===(n="production")?void 0:n.toUpperCase())&&void 0!==t?t:""]}),(0,k.jsx)("small",{className:"text-xs",children:"Remote config override"}),(0,k.jsx)("small",{className:"text-xs",children:(0,k.jsx)(Wt.h,{className:"cursor-pointer !text-blue-400 text-inherit underline underline-offset-1",to:"https://wiki.opera.software/display/DNA/Aria+Remote+Config",children:"Wiki"})})]}),(0,k.jsx)("div",{className:"max-h-[75%] w-full overflow-y-auto",children:(0,A.FR)(i).filter((function(e){return"boolean"==typeof(0,v.Z)(e,2)[1]})).map((function(e){var t=e,n=(0,v.Z)(t,2),r=n[0],a=n[1],o=p.includes(r);return(0,k.jsx)("div",{className:"mx-1.5 my-3",children:(0,k.jsx)(Yt,{settingName:r+(o?" ":""),toggleConfig:{checked:i[r],setChecked:function(){return s($t($t({},i),{},(0,g.Z)({},r,!a)))}}})},r)}))}),(0,k.jsx)("div",{className:"flex space-x-4",children:(0,k.jsx)(D.zx,{type:"tertiary",onClick:function(){return o(!1)},children:f("close")})})]})};var Jt=n(47733),en=n(59295),tn=n(25108);function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function an(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return on(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sn(e,t,n){for(var r=document.createNodeIterator(e,NodeFilter.SHOW_ALL),a="",o="",i=!1,s=r.nextNode(),c=function(e){if(ln(e))if(e===t){var r=e.textContent||"",s=r.substring(0,n),c=r.substring(n);a+=s,o+=c,i=!0}else i||e===t?i&&e!==t&&(o+=e.textContent):a+=e.textContent};s;)c(s),s=r.nextNode();return{prevTextContent:a,nextTextContent:o,messageChildNodeOffset:n}}function cn(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=0;t<e.childNodes.length;t++){var n=cn(e.childNodes[t]);if(n)return n}for(var r=e.nextSibling;r;){var a=cn(r);if(a)return a;r=r.nextSibling}return null}var ln=function(e){var t;if(!e)return!1;if(e.nodeType!==Node.TEXT_NODE)return!1;var n=e.parentElement;if(n&&"none"!==window.getComputedStyle(n).getPropertyValue("user-select"))return!!(null===(t=e.parentElement)||void 0===t?void 0:t.closest(".message"))},dn=function e(t){if(!t)return null;if(ln(t))return t;for(var n=t.lastChild;n;){var r=e(n);if(r)return r;n=n.previousSibling}return null};function un(e,t){var n;if(!t){var r=dn(e);if(ln(r))return r}for(var a=e.previousSibling;a;){var o=un(a,!1);if(ln(o))return o;a=a.previousSibling}for(var i=e.parentNode;i&&!i.previousSibling;)i=i.parentNode;return null!==(n=i)&&void 0!==n&&n.previousSibling?un(i.previousSibling,!1):null}function fn(e){var t=e.cloneRange();if(t.startContainer.nodeType!==Node.TEXT_NODE){var n=cn(t.startContainer);n&&t.setStart(n,0)}if(t.endContainer.nodeType!==Node.TEXT_NODE){var r,a=un(t.endContainer,!0);if(a)t.setEnd(a,(null===(r=a.textContent)||void 0===r?void 0:r.length)||0)}return t}function pn(e){for(var t,n,r,a,o=(e=fn(e)).startContainer,i=e.endContainer,s=document.createNodeIterator(e.commonAncestorContainer,NodeFilter.SHOW_ALL),c=s.nextNode(),l=!1,d=function(s){var c=s.parentElement;if(c&&"none"!==window.getComputedStyle(c).getPropertyValue("user-select")){var l=null==c?void 0:c.closest(".message");if(l){if(s===o){var d=sn(l,s,e.startOffset);t=l,n=d.prevTextContent.length}if(s===i){var u=sn(l,s,e.endOffset);r=l,a=u.prevTextContent.length}}}};c;){if(c===o&&(l=!0),l&&c.nodeType===Node.TEXT_NODE&&d(c),c===i){l=!1;break}c=s.nextNode()}if(void 0!==t&&void 0!==r&&void 0!==n&&void 0!==a){var u="message-to",f=t.classList.contains(u),p=r.classList.contains(u);return{firstMessageId:t.id,firstMessageIsAriaResponse:f,firstMessageOffset:n,lastMessageId:r.id,lastMessageIsAriaResponse:p,lastMessageOffset:a}}tn.warn("WARN: could not convert browser range to chat messages range",{range:e,firstParentMessageElement:t,lastParentMessageElement:r,firstParentMessageElementStartOffset:n,lastParentMessageElementEndOffset:a})}function hn(e){var t=e.firstMessageId,n=e.firstMessageOffset,r=e.lastMessageId,a=e.lastMessageOffset,o=document.getElementById(t),i=document.getElementById(r);if(o&&i){var s=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"preffer_prev",r=e,a=0,o=function(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null};r;){if(ln(r)){var i=r.textContent.length;if("preffer_next"===n){if(a+i>t)return{textNode:r,actualOffset:t-a}}else if(a+i>=t)return{textNode:r,actualOffset:t-a};a+=i}r=r.firstChild||o(r)}},c=s(o,n,"preffer_next"),l=s(i,a);if(c&&l){var d=new Range;return d.setStart(c.textNode,c.actualOffset),d.setEnd(l.textNode,l.actualOffset),d}tn.warn("WARN: Could not locate text nodes for range",{startMessageElement:o,firstMessageOffset:n,startResult:c,endMessageElement:i,lastMessageOffset:a,endResult:l})}else tn.warn("WARN: Could not find message elements in DOM",{firstMessageId:t,lastMessageId:r})}function mn(e,t){if(!t)return"";var n=t.firstMessageId,r=t.firstMessageOffset,a=t.lastMessageOffset;return"hl_".concat(e,"_").concat(n,"_").concat(r,"_").concat(a)}function vn(e){for(var t,n="",r=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return ln(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});t=r.nextNode();)n+=t.textContent;return n}var gn=["rephrase"];function xn(e,t,n,r){var a,o=e.chatMessagesRange,i=o.firstMessageId,s=o.lastMessageId,c=o.firstMessageOffset,l=o.lastMessageOffset,d=0,u=an((0,en.Kx)(n,r));try{for(u.s();!(a=u.n()).done;){var f=a.value;i===t&&c>d&&(f.added&&f.count&&(c+=f.count),f.removed&&f.count&&(c-=f.count)),s===t&&l>=d&&(f.added&&f.count&&(l+=f.count),f.removed&&f.count&&(l-=f.count)),!f.removed&&f.count&&(d+=f.count)}}catch(e){u.e(e)}finally{u.f()}var p=rn(rn({},o),{},{firstMessageOffset:c,lastMessageOffset:l});return rn(rn({},e),{},{chatMessagesRange:p,id:gn.includes(e.id)?e.id:mn(e.conversationId,p)})}function bn(e,t){for(var n,r,a=[],o=0,i=0;i<e.length;i+=1){var s=!1;do{if(n=e[i],r=t[o],n===r||" "===n&&"\n"===r)s=!0,a[i]=o,"\n"!==e[i]&&(o+=1);else{var c;o+=1;var l=t.substring(o).match(/^\```[\w]+/);if(null!=l&&null!==(c=l[0])&&void 0!==c&&c.length&&(o+=l[0].length),o>t.length-1){if(""!==e.substring(o).trim()){var d="Cannot map output to source txt at index ".concat(o);throw tn.error(d,{outputLength:e.length,outputIndex:i,sourceIndex:o,opart:e.substring(i-10,i+10),sourceLength:t.length,lettersMap:a,so:{output_text:e,source_text:t}}),new Error(d)}o=t.length-1,s=!0}}}while(!s)}return a}function wn(e){return e?e.nodeType!==Node.TEXT_NODE?e:e.parentNode?wn(e.parentNode):null:null}function yn(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}function jn(e){var t=(0,h.Z)(e.matchAll(/<link(?:\s+category="([^"]*)"?)?>/g)),n=(0,h.Z)(e.matchAll(/<\/link>/g));if(n.length>t.length){var r=n[0];void 0!==r.index&&(e=yn(e,r.index,r[0].length,""))}if(n.length<t.length){var a=t[t.length-1];void 0!==a.index&&(e=yn(e,a.index,a[0].length,""))}return e}function Cn(e,t,n){for(var r=[" ","!","#","(",")","*","+","-",".","=",">","?","[","\f","\n","\r","\t","\v","]","_","`","|","~","'","/","<",'"',"\\","{","}",","];t>0&&!r.includes(e[t-1]);)t--;for(;n<e.length&&!r.includes(e[n]);)n++;return[t,n]}var kn=function(e){var t=document.createElement("canvas").getContext("2d");return t?(t.font="400 14px 'Be Vietnam'",t.measureText(e).width):-1},On=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".replace(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",""),t=e.length;return e.charAt(Math.floor(Math.random()*t))},_n=function(e){for(var t,n=e.length,r=kn(e),a=e,o=0,i=Math.abs(o-r),s=0;s<10;s+=1){t=e;for(var c=(0,h.Z)(t),l=0;l<1;l+=1){var d=Math.floor(Math.random()*n);c[d]=On(c[d])}t=c.join(""),o=kn(t);var u=Math.abs(o-r);u<i&&(i=u,a=t)}return a},An=n(29403),En={attributes:{source:"aria-extension"}};En.styleTagTransform=ye(),En.setAttributes=ge(),En.insert=me().bind(null,"head"),En.domAPI=pe(),En.insertStyleElement=be();ue()(An.Z,En);const Sn=An.Z&&An.Z.locals?An.Z.locals:void 0;function Nn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return In(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,o=e})),f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function In(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tn=new c.mQ({env:"development",name:"HIGHLIGHTER DOM UTILS"});function Pn(e,t,n){var r=t.id,a=t.chatMessagesRange;if(e){var o=function(e,t){if(e){for(var n=t.firstMessageId,r=t.lastMessageId,a=t.firstMessageOffset,o=t.lastMessageOffset,i=[],s=document.createNodeIterator(e,NodeFilter.SHOW_ALL),c=!1,l=!1,d=0,u=0,f=!1,p=function(e){if(ln(e)){var t=e.parentElement;if(t){var s=null==t?void 0:t.closest(".message");if(s&&"none"!==window.getComputedStyle(t).getPropertyValue("user-select")&&(s.id===n&&(c=!0),c)){var p=void 0,h=void 0,m=e.textContent||"";s.id===r&&(o-u>m.length?u+=m.length:(h=o-u,f=!0)),!l&&a-d>m.length?d+=m.length:(l||(l=!0,p=a-d),p!==m.length&&i.push({node:e,startOffset:p,endOffset:h}))}}}},h=s.nextNode();h&&!f;)p(h),h=s.nextNode();return i}}(e,a);if(o){var i,s=Nn(o);try{for(s.s();!(i=s.n()).done;){var c,l=i.value;if(null!=l&&null!==(c=l.node)&&void 0!==c&&c.textContent){var d=document.createElement("span");d.className="outer-highlight";var u=document.createElement("span"),f=document.createElement("span"),p=document.createElement("span"),h=(0,A.AK)(Sn.highlighter,t.selectionColor&&Sn[t.selectionColor]);if(f.id=r,f.className=h,"rephrase"===t.type){var m=Date.now()-t.timestamp;Object.assign(f.style,{animationDelay:"-".concat(m,"ms")})}else f.addEventListener("click",(function(e){var r=window.getSelection();null!=r&&r.toString()||n(e,t)}));var v,g="",x="",b=l.node.textContent;void 0!==l.startOffset&&(g=b.substring(0,l.startOffset)),v=b.substring(l.startOffset||0,l.endOffset),void 0!==l.endOffset&&(x=b.substring(l.endOffset)),g&&(u.textContent=g,d.appendChild(u)),f.textContent=v,d.appendChild(f),x&&(p.textContent=x,d.appendChild(p));var w=l.node.parentNode;if(w)d._origTextNode=l.node,w.replaceChild(d,l.node)}}}catch(e){s.e(e)}finally{s.f()}}}}function Rn(e){if(e){var t=e.querySelectorAll(".outer-highlight");if(t.length){var n,r=Nn(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.parentNode;if(o){var i=a;o.replaceChild(i._origTextNode,a)}else Tn.info("PARENT OF .outer-highlight span NOT FOUND")}}catch(e){r.e(e)}finally{r.f()}}}}function Mn(){if(!window.renderingHighlights&&window.highlightsRendered){window.highlightsRendered=!1;var e=document.getElementById("messages-container");e&&Rn(e)}}var Dn=n(71002);const Gn=function(e){var t=e.option,n=void 0===t?"default":t,r=e.selectedOption,a=void 0===r?"":r,o=e.size,i=void 0===o?24:o,s=e.onClick,u=(0,d._gZ)().contextType,f=(0,c.oH)().isAriaInTabView,p=(0,l.useCallback)((function(){s(n),(0,He.vH)({action:Ne.VV.CLICK,element:Ne.Y3.REFINER,context:f?Ne.hG.BROWSER_TAB:u,str_value:"ColorSelected"})}),[s,n,f,u]),h={shape:{operaOne:"svg",operaGx:"rect",operaAir:"circle"},default_fill:"fill-[--opera-chatbot-message-highlight-bg-default]",custom1_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-3]",stroke:a===n?"stroke-[--primary-p1-cobalt-buttons]":"stroke-[--secondary-s1-selected-stroke]",default_bg:"bg-[--opera-chatbot-message-highlight-bg-default]",custom1_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-3]",border_bg:a===n?"bg-[--primary-p1-cobalt-buttons]":"bg-[--secondary-s1-selected-stroke]"},m=(0,c.o6)(h,"shape"),v=(0,c.o6)(h,"".concat(n,"_fill")),g=(0,c.o6)(h,"stroke"),x=(0,c.o6)(h,"".concat(n,"_bg")),b=(0,c.o6)(h,"border_bg"),w=(0,A.AK)(v,g);return"svg"===m?(0,k.jsx)("svg",{className:"cursor-pointer hover:scale-110 hover:duration-150",xmlns:"http://www.w3.org/2000/svg",width:i,height:i,viewBox:"0 0 24 24",fill:"none",onClick:p,children:(0,k.jsx)("path",{d:"M4.46447 4.46447C3.66191 5.26702 3.31672 6.27752 3.15536 7.47766C2.99995 8.63362 2.99997 10.1034 3 11.9268L3 12L3 12.0732C2.99997 13.8966 2.99995 15.3664 3.15536 16.5223C3.31672 17.7225 3.66191 18.733 4.46447 19.5355C5.26702 20.3381 6.27752 20.6833 7.47766 20.8446C8.63363 21 10.1034 21 11.9269 21H12H12.0731C13.8966 21 15.3664 21 16.5223 20.8446C17.7225 20.6833 18.733 20.3381 19.5355 19.5355C20.3381 18.733 20.6833 17.7225 20.8446 16.5223C21 15.3664 21 13.8966 21 12.0731V12V11.9269C21 10.1034 21 8.63363 20.8446 7.47766C20.6833 6.27752 20.3381 5.26702 19.5355 4.46447C18.733 3.66191 17.7225 3.31672 16.5223 3.15536C15.3664 2.99995 13.8966 2.99997 12.0732 3L12 3L11.9268 3C10.1034 2.99997 8.63362 2.99995 7.47766 3.15536C6.27752 3.31672 5.26702 3.66191 4.46447 4.46447Z",className:w,strokeWidth:"2"})}):"rect"===m?(0,k.jsx)("button",{className:(0,A.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-1",b,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:p,children:(0,k.jsx)("div",{className:(0,A.AK)("h-4 w-4 rounded-aria-radius-1",x)})}):(0,k.jsx)("button",{className:(0,A.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-3",b,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:p,children:(0,k.jsx)("div",{className:(0,A.AK)("h-4 w-4 rounded-aria-radius-3",x)})})};var Ln=n(44971);const Bn=function(e){var t=e.setShowBorder,n=e.optionHandler,r=e.optionText,a=e.disabled,o=(0,c.o6)({text:"text-button-m",radius:"rounded-aria-radius-1",height:"h-4",background:"hover:bg-levels-l2-hover",separator:"opacity-100 mx-[3px]",padding:"px-1",operaAir:{text:"text-header-s",radius:"rounded-aria-radius-3",separator:"opacity-0",height:"h-6",padding:"px-2"},operaGx:{text:"text-header-s",height:"h-5",separator:"opacity-100 mx-[2px]"}},["text","radius","background","separator","height","padding"]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:(0,A.AK)("h-4 w-[1px] bg-secondary-s1-selected-stroke duration-150",o.separator)}),(0,k.jsx)("div",{onMouseEnter:function(){return t(!1)},onMouseLeave:function(){return t(!0)},className:(0,A.AK)(!a&&o.background,"flex items-center text-center transition-all duration-150",o.radius,o.height,a&&"pointer-events-none opacity-50"),children:(0,k.jsx)("button",{className:(0,A.AK)(o.text,o.padding,"h-full cursor-pointer select-none bg-transparent text-text-t1-text-active-icons"),type:"button",onClick:n,children:r})})]})};var Zn=n(25108);function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fn(e){return e&&"object"===(0,Dn.Z)(e)&&"current"in e}var Un=(0,l.forwardRef)((function(e,t){var n,r,a=e.align,o=e.highlightData,i=e.x,s=e.y,u=e.conversation,f=e.readOnly,p=e.setClickedHighlighter,h=(0,c.Su)().loggerService,m=o.chatMessagesRange,g=o.conversationId,x=o.id,b=o.selectionColor,y=o.text,j=(0,w.$G)().t,C=(0,c.oH)().isAriaInTabView,O=(0,d.uEF)(),_=O.setHighlight,E=O.removeHighlight,S=(0,d.okl)().rephraseHighlight,N=(0,d.kGW)(g).reusableHighlights,I=(0,d.lUI)(),T=I.reuseHighlight,P=I.removeReusableHighlight,R=(0,d._gZ)().contextType,M=(0,d.WGj)().highlightToRephrase,D=m.firstMessageIsAriaResponse,G=m.lastMessageIsAriaResponse,L=m.firstMessageId,B=m.lastMessageId,Z=y.length<=c.B7&&!f,H=!!N.find((function(e){return e.id===x})),K=document.getElementById(L),F=m.firstMessageId.split("-"),U=(0,v.Z)(F,2)[1],V=u.data.findIndex((function(e){return e.id===U})),z=-1===V?void 0:u.data[V],W=null==z?void 0:z.message,X=W&&(0,Ln.Ku)(W),Y=K&&vn(K),q=null===(n=u.id)||void 0===n||null===(r=n.split)||void 0===r||null===(r=r.call(n,"-"))||void 0===r?void 0:r[0],$=Y&&Y.substring(m.firstMessageOffset,m.lastMessageOffset).trim(),Q=!1,J=!1,ee=null,te=null,ne=null,re=".code-box",ae=".table-wrapper",oe=window.getSelection(),ie=hn(m);ie&&(null==oe||oe.removeAllRanges(),null==oe||oe.addRange(ie));var se="";null!=oe&&oe.rangeCount&&(ne=oe.getRangeAt(0),se=ne.toString(),ee=wn(ne.startContainer),te=wn(ne.endContainer),ee&&ee.closest(re)&&(Q=!0),te&&te.closest(re)&&(Q=!0),ee&&ee.closest(ae)&&(J=!0),te&&te.closest(ae)&&(J=!0));var ce,le,de,ue,fe,pe,he,me=!Q,ve="",ge="";if(Y&&X&&W)try{ce=m.firstMessageOffset,le=m.lastMessageOffset,void 0!==ce&&void 0!==le&&(ve=X.substring(ce,le));var xe=bn(Y,X);if(de=xe[m.firstMessageOffset],ue=xe[m.lastMessageOffset-1]+1,void 0!==de&&void 0!==ue){var be=Cn(X,de,ue),we=(0,v.Z)(be,2);de=we[0],ue=we[1],ge=X.substring(de,ue)}var ye=bn(Y,W);if(fe=ye[m.firstMessageOffset],pe=ye[m.lastMessageOffset-1]+1,void 0!==fe&&void 0!==pe){var je=Cn(W,fe,pe),Ce=(0,v.Z)(je,2);fe=Ce[0],pe=Ce[1]}}catch(e){Zn.error("mapSelectableTextToMarkdownSource error",e)}if(W&&void 0!==fe&&void 0!==pe){var ke=jn(W.substring(0,fe)),Oe=jn(W.substring(pe));he=ke+ge+Oe,fe=ke.length,pe=ke.length+ge.length}if(void 0!==fe&&void 0!==pe){var _e,Ae=null===(_e=he)||void 0===_e?void 0:_e.substr(fe,pe-fe);h.infoColor("REPHRASE SELECTION DEBUG","red",Ae)}(ge=ge.trim()).startsWith("```")&&(ge=ge.substring(3)),ge.endsWith("```")&&(ge=ge.substring(0,ge.length-3)),ge=ge.trim();var Ee,Se,Ie,Te,Pe=(Ee=L===B,Se=D&&G,Ie=null==z?void 0:z.server_id,Te=!M&&Ie&&y.length>=c.CX&&Se&&Ee&&!c.Dv.includes(L)&&K&&X&&$&&ge&&!Q&&!J&&("prompt"!==q||V>2)&&!f&&se,Zn.info("%c[rephrase] checkIfRephraseIsAvailable:selection","background: tomato; color: white",{messageSourceWithLinkifyTextWithoutSelectedLink:he,selectedSource:ge,chatMessagesRange:m,sourceTextStartOffset:de,sourceTextEndOffset:ue,isSameMessageHighlighted:Ee,isAriaResponseHighlighted:Se,messageServerId:Ie,selectedText:$,sourceText:X,sourceTextWithLinkifyText:W,sourceTextWithLinkifyStartOffset:fe,sourceTextWithLinkifyEndOffset:pe,sourceTextWithLinkifyTextSelection:void 0!==fe&&(null==W?void 0:W.substring(fe,pe)),selectableText:Y,linkify:me,range:ne,startNode:ee,endNode:te,selectedSourceBlock:Q,selectedTableBlock:J,isPrompt:"prompt"===q,readOnly:f,nativeTextSelected:se}),!!Te&&!!(ee===te||null!=X&&X.includes($)));function Re(e){var t;if(null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),b===e)return E(x),void p(null);_(Kn(Kn({},o),{},{selectionColor:e}))}var Me=a.split("-"),De=(0,v.Z)(Me,2),Ge=De[0],Le=De[1],Be="-50%",Ze="".concat(c.dl,"px");switch(Ge){case"left":Be="-100%";break;case"right":Be="0%";break;case"center":Be="-50%"}switch(Le){case"top":Ze="calc(-100% - ".concat(c.dl,"px)");break;case"bottom":Ze="".concat(1.5*c.dl,"px")}var Ke=(0,l.useState)(!0),Fe=(0,v.Z)(Ke,2),Ue=Fe[0],Ve=Fe[1],ze=(0,l.useState)(!0),We=(0,v.Z)(ze,2),Xe=We[0],Ye=We[1];(0,l.useEffect)((function(){var e=document.getElementById("messages-container");if(e){if(Fn(t)&&t.current){var n=(document.body.clientWidth>c.Fz?c.Fz:document.body.clientWidth)-e.clientWidth-6,r=n>6?n:6,a=new IntersectionObserver((function(e){return function(e){if(t.current){if(e.rootBounds){var n=e.boundingClientRect,r=e.rootBounds;n.right>r.right?t.current.style.transform="translateX(".concat(r.right-n.right,"px)"):n.left<r.left&&(t.current.style.transform="translateX(".concat(r.left-n.left,"px)"))}a.unobserve(t.current)}}((0,v.Z)(e,1)[0])}),{root:null,rootMargin:"0px -".concat(6,"px 0px -").concat(r,"px"),threshold:1});return a.observe(t.current),function(){Fn(t)&&t.current&&a.unobserve(t.current)}}}}),[t,Pe,Z]);var qe=(0,c.o6)({container:{operaOne:"h-9",operaGx:"h-8",operaAir:"h-8"},colorsMr:{operaOne:"mr-px",operaGx:"mr-1",operaAir:"mr-0.5"},padding:{operaOne:"px-1.5",operaGx:"pl-1.5 pr-1",operaAir:"pl-1.5 pr-1"},backgroundColor:{operaOne:"bg-levels-l5-primary"},radius:{operaOne:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-4"},shadow:{operaOne:"shadow-highlightMenu",operaAir:"air-level-02"},border:{operaOne:"",operaGx:"border border-solid border-secondary-s1-selected-stroke"}},["backgroundColor","radius","shadow","border","container","padding","colorsMr"]);return(0,k.jsx)("div",{className:(0,A.AK)("fixed inline-block select-none",qe.container),style:{left:"".concat(i,"px"),top:"".concat(s,"px")},children:(0,k.jsxs)("div",{ref:t,id:x,className:(0,A.AK)("relative left-1/2 z-1 flex h-full min-w-max max-w-max items-center justify-center overflow-hidden",qe.padding,qe.backgroundColor,qe.radius,qe.shadow,qe.border),style:{left:Be,top:Ze},children:[(0,k.jsxs)("div",{className:(0,A.AK)("flex items-center justify-center gap-[4px]",qe.colorsMr),children:[(0,k.jsx)(Gn,{selectedOption:b,option:"custom1",onClick:Re}),(0,k.jsx)(Gn,{selectedOption:b,option:"custom2",onClick:Re}),(0,k.jsx)(Gn,{selectedOption:b,option:"custom3",onClick:Re})]}),Z&&(0,k.jsx)(Bn,{showBorderCondition:Ue,setShowBorder:Ve,isLastOption:!Pe,optionHandler:function(){if(!H){N.length&&P(N[0].id),T({id:o.id,title:o.text});var e,t=hn(m);if(t)null===(e=window.getSelection())||void 0===e||e.addRange(t);(0,He.vH)({action:Ne.VV.CLICK,element:Ne.Y3.REFINER,context:C?Ne.hG.BROWSER_TAB:R,str_value:"Reuse"})}},optionText:j("reuse"),disabled:H}),Pe&&(0,k.jsx)(Bn,{showBorderCondition:Ue&&Xe,setShowBorder:Ye,isLastOption:Pe,optionHandler:function(){(0,He.vH)({action:Ne.VV.CLICK,element:Ne.Y3.REFINER,context:C?Ne.hG.BROWSER_TAB:R,str_value:"Rephrase"}),K&&X&&$&&ge&&void 0!==de&&void 0!==ue&&void 0!==fe&&void 0!==pe&&void 0!==ce&&void 0!==le&&void 0!==he&&S({highlight:o,sourceTextWithLinkifyStartOffset:fe,sourceTextWithLinkifyEndOffset:pe,sourceTextStartOffset:de,sourceTextEndOffset:ue,selectableText:Y,selectedText:ve,selectableTextStartOffset:ce,selectableTextEndOffset:le,sourceText:X,sourceTextWithLinkify:W,selectedSource:ge,linkify:me,messageSourceWithLinkifyTextWithoutSelectedLink:he})},optionText:j("rephrase")})]},x)})}));const Vn=Un;var zn=n(57406),Wn=n(53159);function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qn=new zn.mQ({env:"development",name:"HIGHLIGHTER REPHRASE UTILS"});function $n(e,t,n,r,a,o){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,m.Z)(b().mark((function e(t,n,r,a,o,i){var s,c;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,it.hV)(t);case 2:return s=e.sent,c=r.split(o).join(i),e.next=6,(0,ot.X1)(s.id,{data:s.data.map((function(e){var t=e.id,s=e.message;return t===n&&(qn.info("RESPONSE WITH REPHRASED DATA READY",{id:t,message:s,oldContent:r,newContent:c,textFrom:o,textTo:i,messageData:e,_newContentFromServerWithoutLinkify:a}),e.message=c),Yn({},e)}))},"updateRephrasedMessage");case 6:return e.abrupt("return",{conversationId:t,messageId:n,messageContent:c});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jn(e,t,n,r,a,o,i,s){return er.apply(this,arguments)}function er(){return er=(0,m.Z)(b().mark((function e(t,n,r,a,o,i,s,c){var l,d,u,f=arguments;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=f.length>8&&void 0!==f[8]&&f[8],e.t0=Yn,e.t1={conversation_id:n.server_id,message_id:a,selected_text:i,linkify:l},e.next=5,(0,Wn.Fg)();case 5:return e.t2=e.sent,d=(0,e.t0)(e.t1,e.t2),l&&Object.assign(d,{linkify_version:3}),e.next=10,(0,A.Ur)("".concat(t,"/").concat(Ne.Cm.REPHRASE),{method:"POST",body:d});case 10:if(!(u=e.sent).message){e.next=15;break}return e.next=14,$n(n.id,r,c,u.message,i,u.rephrased_text);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)}))),er.apply(this,arguments)}function tr(){return(tr=(0,m.Z)(b().mark((function e(t,n,r,a){var o,i,s,c,l,d,u,f,p,h,m,g,x;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.highlight,i=n.selectedSource,e.prev=1,s=o.conversationId,c=o.chatMessagesRange,l=c.firstMessageId.split("-"),d=(0,v.Z)(l,2),u=d[1],e.next=6,(0,it.hV)(s);case 6:if(f=e.sent,!((p=f.data.findIndex((function(e){return e.id===u})))>-1)){e.next=20;break}if(h=f.data,m=h[p],g=m.server_id,x=m.message,!g){e.next=17;break}return e.next=14,Jn(t,f,u,g,x,i,r,a,!1);case 14:return e.abrupt("return",e.sent);case 17:throw new Error("No server_id for message");case 18:e.next=21;break;case 20:throw new Error("No message with id ".concat(u," in conversation ").concat(s));case 21:e.next=27;break;case 23:throw e.prev=23,e.t0=e.catch(1),qn.error("[REPHRASE][ERROR]",e.t0),e.t0;case 27:case"end":return e.stop()}}),e,null,[[1,23]])})))).apply(this,arguments)}var nr=n(25108),rr=Node.prototype.insertBefore;Node.prototype.insertBefore=function(e,t){var n;Mn();try{n=rr.call(this,e,t)}catch(t){n=null,nr.info("ERROR: Inserting an element before another element.",{newNode:e,err:t})}return n};var ar=Node.prototype.removeChild;Node.prototype.removeChild=function(e){var t;Mn();try{t=ar.call(this,e)}catch(n){t=null,nr.info("ERROR: Deleting an element.",{remNode:e,err:n})}return t};var or=Node.prototype.appendChild;Node.prototype.appendChild=function(e){var t;Mn();try{t=or.call(this,e)}catch(n){t=null,nr.info("ERROR: Adding a child to the element.",{newNode:e,err:n})}return t};var ir=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,t){var n;Mn();try{n=ir.call(this,e,t)}catch(r){n=null,nr.info("ERROR: Replacing a child in the element.",{node:e,child:t,err:r})}return n},nr.info("%cHIGHLIGHTER DOM GUARD READY","background:tomato;color:white");var sr=n(25108);function cr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fr=function(e){var t=e.children,n=e.conversation,r=e.messagesContainerRef,a=e.readOnly,o=(0,c.Su)().loggerService,i=n.id,s=(0,l.useRef)(void 0),u=(0,l.useRef)(null),f=(0,l.useState)(null),p=(0,v.Z)(f,2),h=p[0],g=p[1],x=(0,d.bCg)(i).highlights,w=(0,d.WGj)().rephraseMessagePatch,j=(0,d.nHi)().endpointPrompts,C=(0,c.Cg)().consentNeeded,O=(0,c.oH)().isAriaInTabView,_=(0,l.useCallback)((function(e){if(e?(document.body.classList.add("highlighter-tooltip-opened"),(null==h?void 0:h.id)!==e.id&&(0,A.HX)()):document.body.classList.remove("highlighter-tooltip-opened"),e){var t=e.chatMessagesRange.firstMessageId.split("-"),r=(0,v.Z)(t,2)[1],a=void 0===r?"":r,o=n.data.find((function(e){var t=e.id;return a&&t===a}));o&&o.server_id&&(e.messageServerId=o.server_id)}g(e)}),[]),E=(0,l.useState)(0),S=(0,v.Z)(E,2),N=S[0],I=S[1],T=(0,l.useState)(0),P=(0,v.Z)(T,2),R=P[0],M=P[1],D=(0,l.useState)("left-bottom"),G=(0,v.Z)(D,2),L=G[0],B=G[1],Z=(0,d.ljr)().remoteConfig,H=(0,d.uEF)(),K=H.setHighlight,F=H.removeHighlight,U=(0,d.WGj)().highlightToRephrase,V=(0,d.okl)(),z=V.rephraseHighlight,W=V.setRephraseMessagePatch,X=(0,l.useRef)(null),Y=(0,l.useRef)(null),q=(0,l.useCallback)((function(e,t){var n="center",a="bottom";if(r.current){var o=r.current.getBoundingClientRect(),i=e-o.left,s=t-o.top;i>o.width*(2/3)&&(n="left"),i<o.width*(1/3)&&(n="right"),s>o.height/2&&(a="top")}return"".concat(n,"-").concat(a)}),[r]),$=(0,d._gZ)().contextType,Q=(0,l.useRef)(null),J=(0,l.useCallback)((function(e,t){e.stopPropagation(),Q.current&&clearTimeout(Q.current),Q.current=window.setTimeout((function(){Q.current=null;var n=e.clientX,r=e.clientY;I(n),M(r),B(q(n,r)),_(t),e.stopPropagation()}),500)}),[q,_]);(0,l.useEffect)((function(){var e=function(e){var t=Y.current;if(t){var n=e.clientX,r=e.clientY,a=t.getClientRects()[0];(n<a.left||n>a.right||r<a.top||r>a.bottom)&&_(null)}};return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[_]);var ee=(0,l.useCallback)((function(e,t){var n=window.getSelection();if(null!=n&&n.rangeCount){var r=n.getRangeAt(0),a=r.toString().trim();if(a){var o=pn(r);if(o){var s=mn(i,o),c=x.find((function(e){return e.id===s}))||{chatMessagesRange:o,conversationId:i,id:s,text:a,timestamp:Date.now(),type:"highlight"},l=window.getSelection(),d=(null==l?void 0:l.rangeCount)&&l.getRangeAt(0),u=d&&d.getBoundingClientRect();u?(I(e<u.right?e:u.right),M(t<u.bottom?t:u.top)):(I(e),M(t)),B(q(e,t)),_(c)}(0,He.vH)({action:y.VV.IMPRESSION,element:y.Y3.REFINER,context:O?y.hG.BROWSER_TAB:$,str_value:(0,Ln.XR)(a)})}}}),[O,$,i,x,q,_]),te=(0,l.useCallback)((function(e,t){X.current&&(clearTimeout(X.current),X.current=null);try{var n;null!==(n=document.getSelection())&&void 0!==n&&null!==(n=n.getRangeAt(0))&&void 0!==n&&n.collapsed||Q.current&&(clearTimeout(Q.current),Q.current=null)}catch(e){}X.current=window.setTimeout((function(){X.current=null,ee(e,t)}),500)}),[ee]);(0,l.useEffect)((function(){return function(){X.current&&clearTimeout(X.current)}}),[]),(0,l.useEffect)((function(){var e=function(){_(null)},t=r.current;return t&&t.addEventListener("scroll",e),function(){t&&t.removeEventListener("scroll",e)}}),[r,h,_]),(0,l.useEffect)((function(){if(h){var e=x.find((function(e){var t=e.id;return h.id===t}));_(e?ur(ur({},h),e):null)}}),[i,x]);var ne=(0,l.useCallback)((function(e){var t,n,r=e||x,a="textarea"===(null===(t=document.activeElement)||void 0===t?void 0:t.tagName.toLowerCase()),o="input"===(null===(n=document.activeElement)||void 0===n?void 0:n.tagName.toLowerCase()),i=void 0;if(!a&&!o){var s=window.getSelection();if(s&&s.rangeCount){var c=s.getRangeAt(0);c&&(i=pn(c),s.removeAllRanges())}}Mn(),window.renderingHighlights=!0;var l,d=cr(r);try{for(d.s();!(l=d.n()).done;){var f=l.value;Pn(u.current,f,J)}}catch(e){d.e(e)}finally{d.f()}if(window.renderingHighlights=!1,window.highlightsRendered=!0,!a&&!o){var p=(null==h?void 0:h.chatMessagesRange)||i;if(p){var m,v=hn(p);if(v)null===(m=window.getSelection())||void 0===m||m.addRange(v)}}}),[x,u,J,h]);(0,l.useEffect)((function(){ne()}),[ne,h,x]);var re=(0,l.useRef)(""),ae=(0,l.useRef)(x),oe=(0,l.useRef)(U);(0,l.useEffect)((function(){oe.current=U}),[U]);var ie=(0,l.useCallback)((function(e,t,n,r){var a,o=cr(e.splice(0,e.length));try{for(o.s();!(a=o.n()).done;){var i=a.value,s=xn(i,t,r,n);F(i.id),s&&(K(s),e.push(s))}}catch(e){o.e(e)}finally{o.f()}}),[K,F]),se=(0,l.useCallback)((function(e,t){var n=document.getElementById(e);if(!n)throw new Error("Message element with id ".concat(e," not found"));var r=vn(n);re.current!==r&&(ie(t,e,r,re.current),re.current=r)}),[ie]);(0,l.useEffect)((function(){var e=u.current;if(e){var t=new MutationObserver((function(n){var r,a=!1,o=cr(n);try{for(o.s();!(r=o.n()).done;){"childList"===r.value.type&&(a=!0)}}catch(e){o.e(e)}finally{o.f()}a&&oe.current&&(t.disconnect(),se(oe.current.highlight.chatMessagesRange.firstMessageId,ae.current),ne(ae.current),t.observe(e,{childList:!0,subtree:!0}))}));return t.observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),function(){t.disconnect()}}}),[u.current]),(0,l.useEffect)((function(){W(null),F("rephrase"),z(null)}),[F,z,W]);var ce=(0,l.useRef)(null);(0,l.useEffect)((function(){if(U&&!U.progress){o.info("REPHRASE","CATCHED NEW HIGHLIGHT TO REPHRASE",U),U.progress=!0,re.current=U.selectableText,ae.current=x,z(U);var e=U.highlight;if(e){var t=e.conversationId,n=ur({},e.chatMessagesRange);n.firstMessageOffset=U.selectableTextStartOffset,n.lastMessageOffset=U.selectableTextEndOffset;var r=hn(n);if(r){var a=window.getSelection();null==a||a.removeAllRanges(),null==a||a.addRange(r)}var i={chatMessagesRange:n,conversationId:t,id:"rephrase",selectionColor:"rephraseStart",text:U.selectedText,timestamp:Date.now(),type:"rephrase"};ce.current=i,K(i),ae.current.push(i),z(U);var c={conversationId:t,messageId:n.firstMessageId,message:U.messageSourceWithLinkifyTextWithoutSelectedLink,messageTarget:null,totalDiffLength:0};W(c),sr.info("%cSETTING TICKER","background:red;color:white"),s.current=window.setInterval((function(){if(null===c.messageTarget){var e=U.sourceTextWithLinkifyStartOffset,t=U.sourceTextWithLinkifyEndOffset,n=c.message,r=n.slice(0,e),a=function(e){for(var t=e.split(" "),n=0;n<t.length;n+=1){var r=n;t[r]=_n(t[r])}return t.join(" ")}(n.substring(e,t)),o=n.slice(t),i="".concat(r).concat(a).concat(o);c.message=i,W(c)}else{for(var l=(0,en.Kx)(c.message,c.messageTarget).map((function(e){return Object.assign(e,{width:kn(e.value)})})),d=l.filter((function(e){return e.added})).sort((function(e,t){return e.width-t.width})),u=l.filter((function(e){return e.removed})).sort((function(e,t){return e.width-t.width})),f=Math.floor(1+.01*c.totalDiffLength),p=0;p<f;p+=1)u[p]&&(u[p].exec=!0),d[p]&&(d[p].exec=!0);for(var h="",m=0;m<l.length;m+=1){var v=l[m];v.exec?v.added&&(h+=v.value):v.added&&(v.added||v.removed)||(h+=v.value)}c.message=h,c.message===c.messageTarget?(clearInterval(s.current),s.current=void 0,W(null)):W(c)}}),100);var l=function(e){c.messageTarget=e;var t=(0,en.Kx)(c.message,c.messageTarget);c.totalDiffLength=t.length,W(c)};(function(e,t,n,r){return tr.apply(this,arguments)})(j,U,Z,U.messageSourceWithLinkifyTextWithoutSelectedLink).then((function(e){o.info("CONTENT HIGHLIGHTER","REPHRASE RESULT",e),l(e?e.messageContent||(0,Ln.Ku)(e.messageContent):U.sourceTextWithLinkify),U.answered=!0,z(U)})).catch((function(e){o.error("CONTENT HIGHLIGHTER","REPHRASE ERROR",e),l(U.sourceTextWithLinkify),U.answered=!0,z(U)}))}else sr.info("rephraseHighlightAction-nothing to rephrase-setting null",U),z(null)}}),[U,K,i,z,F,Z,o,W,j,x]);var le=(0,l.useCallback)((0,m.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U||null==U||!U.answered||null!=U&&U.finished||w){e.next=9;break}if(i===U.highlight.conversationId){e.next=3;break}return e.abrupt("return");case 3:setTimeout((function(){F("rephrase")}),1e3),U.finished=!0,ce.current&&(ce.current.timestamp=Date.now(),ce.current.selectionColor="rephraseEnd",K(ce.current)),z(null),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),sr.info("%crephraseFinished","background:red;color:white",U);case 9:case"end":return e.stop()}}),e)}))),[U,z,F,i,w,K]);(0,l.useEffect)((function(){if(U&&null!=U&&U.answered&&!w){if(i!==U.highlight.conversationId)return;o.info("CONTENT HIGHLIGHTER","CONVERSATION UPDATED","FINISHING REPHRASE"),le()}}));(0,l.useEffect)((function(){void 0!==(null==h?void 0:h.selectionColor)?document.body.classList.add("highlighter-with-color-clicked"):document.body.classList.remove("highlighter-with-color-clicked")}),[h]),(0,l.useEffect)((function(){var e;return function t(){window.highlightsRendered||ne(),e=requestAnimationFrame(t)}(),function(){cancelAnimationFrame(e)}}),[ne]);var de=(0,l.useCallback)((function(){var e,t=cr(x);try{for(t.s();!(e=t.n()).done;){var n=e.value;F(n.id)}}catch(e){t.e(e)}finally{t.f()}sr.info("removeAllHighlights-highlights",x)}),[x,F]);return Object.assign(window,{highlights:x,renderAllHighlights:ne,recalculateHighlights:ie,lastMessageTextContentRef:re,rephraseMessagePatch:w,setRephraseMessagePatch:W,highlightToRephrase:U,removeAllHighlights:de}),(0,Se.wO)(n.model)&&!C?(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{onPointerUp:function(e){te(e.clientX,e.clientY)},ref:u,children:t},i),h&&(0,k.jsx)(Vn,{setClickedHighlighter:g,align:L,highlightData:h,ref:Y,x:N,y:R,conversation:n,readOnly:a})]}):t};var pr=n(15671),hr=n(43144),mr=n(60136),vr=n(82963),gr=n(61120);function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,gr.Z)(e);if(t){var a=(0,gr.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,vr.Z)(this,n)}}const br=function(e){(0,mr.Z)(n,e);var t=xr(n);function n(e){return(0,pr.Z)(this,n),t.call(this,e)}return(0,hr.Z)(n,[{key:"componentDidCatch",value:function(e){this.props.onContentHighlighterError(e)}},{key:"render",value:function(){return this.props.children}}]),n}(l.Component);var wr=n(86648),yr=n(73009);function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const kr=function(e){var t=e.item,n=e.isActive,r=e.isNext,a=e.isPrevious,o=(0,c.o6)({wrapper:{operaOne:"rounded-aria-radius-6 border border-solid border-secondary-s1-selected-stroke",operaGx:"rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke",operaAir:"rounded-aria-radius-4 air-level-xlow"},wrapperBackground:{operaOne:"bg-levels-l5-primary",operaAir:"bg-levels-l0-extension-bg"},textWrapper:{operaOne:"text-text-t1-text-active-icons"},name:{operaOne:"text-header-l !uppercase",operaAir:"text-header-l"},description:{operaOne:"text-body-l text-text-t3-text-gray",operaGx:"text-body-l text-text-t2-text-secondary",operaAir:"text-body-l text-text-t2-text-secondary"},screenshot:{operaOne:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-5",operaGx:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",operaAir:"rounded-aria-radius-3"}},["wrapper","wrapperBackground","textWrapper","name","description","screenshot"]);return(0,k.jsxs)("div",Cr(Cr({className:(0,A.AK)("feature-item absolute flex w-3/5 flex-col gap-6 p-6 transition-all",o.wrapper,o.wrapperBackground,n&&"left-0 right-0 z-1 m-auto",!n&&"scale-[0.65] opacity-70",a&&"-left-8",r&&"-right-8",Boolean(t.onClick)&&"cursor-pointer hover:bg-levels-l3-cards")},Boolean(t.onClick)&&{onClick:t.onClick}),{},{children:[(0,k.jsxs)("div",{className:(0,A.AK)("feature-intro",o.textWrapper),children:[(0,k.jsx)("div",{className:(0,A.AK)("feature-title mb-2",o.name),children:t.name}),(0,k.jsx)("div",{className:(0,A.AK)("feature-description",o.description),children:t.description})]}),t.screenshot&&(0,k.jsx)("div",{className:(0,A.AK)("select-none overflow-hidden",o.screenshot),children:(0,k.jsx)("img",{className:"object-cover",src:t.screenshot,alt:t.name})})]}))};var Or=n(23059);const _r=n.p+"assets/0d8096ac3c68681980f7.svg",Ar=n.p+"assets/367d4ebde64e19f84b77.svg";function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Nr=function(e){var t,n=e.adjustChatLeadingDescription,r=(0,w.$G)().t,a=(0,c.rg)().currentWindowId,o=(0,c.oH)().isAriaInTabView,i=(0,ht.L1)().isCurrentThemeDark,s=(0,d.nrG)().setPromptStudioFormData,f=(0,d.cpB)().promptStudioConfig,p=(0,d.L6l)().handleRequestNewConversation,g=(0,d.iBZ)().product,x=function(e,t){var n=null!=t&&t.productSuffix?"-".concat(t.productSuffix):"",r="dark"===(null==t?void 0:t.theme)?"-dark":"";return"".concat("feature-carousel","/").concat(e).concat(n).concat(r,".png")},y=function(e){return{operaOne:{light:x(e),dark:x(e,{theme:"dark"})},operaGx:{light:x(e,{productSuffix:"gx"}),dark:x(e,{theme:"dark",productSuffix:"gx"})},operaAir:x(e,{productSuffix:"air"})}},j=(0,l.useState)([{id:c.t5.COMMAND_LINE,name:r("feature_carousel_item_command-line_name"),description:r("feature_carousel_item_command-line_description"),screenshot:(0,c.o6)(y(c.t5.COMMAND_LINE)),onClick:(t=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.FM)();case 2:(0,u.z4)();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{id:c.t5.COMPOSE,name:r("feature_carousel_item_compose_name"),description:r("feature_carousel_item_compose_description"),screenshot:(0,c.o6)(y(c.t5.COMPOSE)),onClick:function(){location.href="#prompt-studio?"}},{id:c.t5.IMAGE_UNDERSTANDING,name:r("feature_carousel_item_image-understanding_name"),description:r("feature_carousel_item_image-understanding_description"),screenshot:(0,c.o6)(y(c.t5.IMAGE_UNDERSTANDING)),onClick:function(){document.querySelector("#upload-image-input").click()}},{id:c.t5.IMAGE_GENERATION,name:r("feature_carousel_item_image-generation_name"),description:r("feature_carousel_item_image-generation_description"),screenshot:(0,c.o6)(y(c.t5.IMAGE_GENERATION)),onClick:function(){p({source:o?"tab-view":"sidebar",windowId:a,text:r("create_an_abstract_wallpaper"),id:(0,A.F0)()})}}]),C=(0,v.Z)(j,2),O=C[0],_=C[1],E=[{id:c.t5.EMAIL,name:r("feature_carousel_item_email_name"),description:(0,k.jsx)(w.cC,{i18nKey:r("feature_carousel_item_email_description")}),screenshot:(0,c.o6)(y(c.t5.EMAIL)),onClick:function(){location.href="#prompt-studio?",setTimeout((function(){var e,t,n,r,a=null!==(e=null===(t=f[1])||void 0===t?void 0:t.fieldsets)&&void 0!==e?e:{},o=a.tonalities,i=void 0===o?[]:o,c=a.lengths,l=void 0===c?[]:c,d=null!==(n=null===(r=f[1])||void 0===r?void 0:r.defaults)&&void 0!==n?n:{},u=d.tonality,p=void 0===u?"":u,h=d.length,m=void 0===h?"":h,v=i.map((function(e){return e.id})).indexOf(p),g=l.map((function(e){return e.id})).indexOf(m);s({taskIndex:1,toneIndex:v,lengthIndex:g})}))}},{id:c.t5.EXPERT_TRANSLATION,name:r("feature_carousel_item_expert-translation_name"),description:(0,k.jsx)(w.cC,{i18nKey:r("feature_carousel_item_expert-translation_description")}),screenshot:(0,c.o6)(y(c.t5.EXPERT_TRANSLATION)),onClick:function(){p({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_expert-translation_action"),id:(0,A.F0)()})}},{id:c.t5.GRAMMAR_CHECK,name:r("feature_carousel_item_grammar-check_name"),description:(0,k.jsx)(w.cC,{i18nKey:r("feature_carousel_item_grammar-check_description")}),screenshot:(0,c.o6)(y(c.t5.GRAMMAR_CHECK)),onClick:function(){p({source:o?"tab-view":"sidebar",windowId:a,text:r("feature_carousel_item_grammar-check_action"),id:(0,A.F0)()})}}],S=(0,l.useMemo)((function(){return[O[O.length-1]].concat((0,h.Z)(O),[O[0]])}),[O]),N=(0,l.useState)(S.findIndex((function(e){return e.id===c.t5.COMPOSE}))),I=(0,v.Z)(N,2),T=I[0],P=I[1],R=function(e){return function(){var t;P((function(r){switch(e){case"left":return t=r-1<=0?O.length:r-1,n(S[t].id),t;case"right":return t=r+1>O.length?1:r+1,n(S[t].id),t}}))}};return(0,c.Xp)(c.gi.WELCOME_PAGE_CHANGE_CARD,(function(e){var t=c.t5.EMAIL,r=c.t5.EXPERT_TRANSLATION,a=c.t5.GRAMMAR_CHECK;switch(e){case t:case r:case a:var o=[].concat(E),i=o.find((function(t){return t.id===e}));o=o.filter((function(t){return t.id!==e})),_((function(e){return[].concat((0,h.Z)(e.filter((function(e){return![t,r,a].includes(e.id)}))),[o[0],i,o[1]])})),P(S.length),n(i.id);break;default:P(S.findIndex((function(t,n){return t.id===e&&0!==n&&n!==S.length-1})))}})),(0,l.useEffect)((function(){_((function(e){return e.map((function(e){return Sr(Sr({},e),{},{screenshot:(0,A.X8)("opera"===g?"operaOne":null!=g?g:"operaOne",i?"dark":"light",y(e.id),"",!1)})}))}))}),[i]),(0,k.jsxs)("div",{className:"features-carousel mb-aria-8 flex h-full flex-col",children:[(0,k.jsx)("div",{className:"flex-grow"}),(0,k.jsxs)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:[(0,k.jsx)(D.hU,{border:!0,className:"absolute -left-[35%] z-10",icon:(0,c.o6)({icon:Or,operaGx:{icon:_r},operaAir:{icon:Ar}},"icon"),type:"secondary",onClick:R("left")}),S.map((function(e,t){var n=t===T,r=t===T+1,a=t===T-1;return(0,k.jsx)(kr,{isActive:n,isNext:r,isPrevious:a,item:e},"carousel-item-".concat(t))})),(0,k.jsx)(D.hU,{border:!0,className:"absolute -right-[35%] z-10 rotate-180",icon:(0,c.o6)({icon:Or,operaGx:{icon:_r},operaAir:{icon:Ar}},"icon"),type:"secondary",onClick:R("right")})]})]})};var Ir=n(22196);const Tr=n.p+"assets/6912698b643838d06158.svg";var Pr=n(75282);const Rr=function(){return(0,k.jsx)("div",{id:"aria_logo",className:"h-8 w-8 leading-8",children:(0,k.jsx)(S.S,{config:{operaOne:{icon:Tr,color:"default"},operaGx:{icon:Pr}},size:32})})},Mr=n.p+"assets/08a88cdde60e844bacbd.svg";const Dr=function(e){var t=e.title,n=e.description,r=(0,d.J7o)().currentModel,a=(0,c.o6)({title:"mt-2",description:"",showLogo:!0,showArrowIcon:!1,operaGx:{description:"text-text-t2-text-secondary"},operaAir:{description:"text-text-t2-text-secondary"}},["title","showLogo","showArrowIcon","description"]);return(0,k.jsxs)("div",{className:"text-header-xxl z-1 select-none px-aria-7 pt-aria-7 text-text-t1-text-active-icons",children:[a.showLogo&&(0,k.jsx)(Rr,{}),(0,k.jsx)("p",{className:(0,A.AK)("uppercase",a.title),children:t}),(0,k.jsx)("div",{className:(0,A.AK)("text-header-xl mb-aria-4 mt-1",a.description),children:n}),"Aria"===r&&(0,k.jsx)("div",{id:"models-used",className:"text-header-s flex gap-aria-4 text-text-tb",children:Object.entries(It.Ad).map((function(e){var t=(0,v.Z)(e,2),n=t[0],r=t[1];return(0,k.jsx)("div",{className:"rounded-aria-radius-2 bg-primary-p1-cobalt-buttons px-aria-3 py-aria-2 normal-case",children:r},n)}))}),a.showArrowIcon&&(0,k.jsx)("div",{className:"mb-5 h-9 w-3",children:(0,k.jsx)(S.S,{src:Mr,width:11,height:36,color:"default"})})]})};function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Br=function(e){var t=e.shadowEffectClasses,n=e.shadowEffectGradient,r=e.shapesClasses;return(0,k.jsx)("div",{className:(0,A.AK)("absolute inset-x-0 top-0 z-0 h-full",(0,c.o6)({logoShapeWrapper:{operaGx:"bg-levels-l0-extension-bg"}},"logoShapeWrapper")),children:(0,k.jsxs)("svg",{viewBox:"0 0 845 744",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,k.jsx)("g",{filter:"url(#filter0_f_105_16361)",children:(0,k.jsx)("path",{className:n?void 0:(0,A.AK)(t),fill:n?"url(#shadowEffectGradient)":"",d:"M548.289 227.337C495.446 284.283 428.281 339.83 394.016 314.141C359.751 288.453 357.634 181.159 321.187 108.499C284.526 36.3634 213.159 -1.32313 197.871 -66.0695C181.995 -130.477 221.986 -221.42 277.215 -309.883C332.445 -398.346 402.325 -483.99 481.389 -515.44C560.24 -546.366 648.112 -523.807 680.114 -450.196C712.327 -377.108 688.294 -253.152 679.09 -160.239C669.509 -67.5116 674.169 -5.48844 657.263 54.0797C640.356 113.648 601.296 171.1 548.289 227.337Z"})}),(0,k.jsx)("path",{d:"M488.116 -105.991H473.215C441.051 -105.991 420.922 -67.3482 436.952 -36.3732L617.226 311.988C633.21 342.878 673.257 343.111 689.532 312.409L769.54 161.483C777.245 146.95 777.254 128.92 769.565 114.377L736.581 51.9915C684.835 -45.8804 590.296 -105.991 488.116 -105.991Z",className:(0,A.AK)(r)}),(0,k.jsx)("path",{d:"M460.066 250.178L386.785 110.562C371.807 82.025 334.572 82.0112 319.576 110.537L5.59781 707.812C-1.45194 721.223 -1.43095 737.796 5.65275 751.184L78.8125 889.461C93.84 917.864 130.946 917.83 145.931 889.4L460.03 293.463C467.077 280.092 467.091 263.562 460.066 250.178Z",className:(0,A.AK)(r)}),(0,k.jsxs)("defs",{children:[(0,k.jsxs)("filter",{id:"filter0_f_105_16361",x:"84.3606",y:"-638.911",width:"722.013",height:"1069.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,k.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,k.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,k.jsx)("feGaussianBlur",{stdDeviation:"55",result:"effect1_foregroundBlur_105_16361"})]}),n&&(0,k.jsx)("linearGradient",Lr(Lr({id:"shadowEffectGradient"},null==n?void 0:n.gradientProps),{},{children:n.gradientColorsProps.map((function(e,t){var n;return(0,k.jsx)("stop",Lr({},e),null!==(n=e.id)&&void 0!==n?n:"shadow-effect-gradient-color-".concat(t))}))}))]})]})})};const Zr=function(){var e=(0,d.YZY)().isGx;return(0,k.jsx)("div",{className:"bottom-gradient fixed bottom-0 left-0 right-0 -z-1 mx-auto h-[25vh] w-full blur-[90px]",children:e?(0,k.jsx)("svg",{viewBox:"0 0 1111 513",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto w-tab-view",children:(0,k.jsx)("g",{children:(0,k.jsx)("ellipse",{className:"fill-classic-gx-a-100",cx:"555.5",cy:"783.88",rx:"511.264",ry:"474.588",transform:"rotate(-90 555.5 783.88)",fillOpacity:"0.4"})})}):(0,k.jsx)("svg",{className:"mx-auto w-tab-view",viewBox:"0 0 584 250",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,k.jsxs)("g",{children:[(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M432.024 137.906C456.255 161.744 453.288 214.387 459.222 302.787C465.651 390.691 481.475 513.856 437.463 549.613C393.451 584.874 289.603 532.728 242.624 468.662C195.645 405.094 206.03 329.606 213.942 278.949C221.855 228.293 227.789 202.964 242.13 181.113C256.965 159.261 280.207 141.879 318.285 130.456C355.868 119.034 407.792 114.067 432.024 137.906Z",fill:"#FE57BE"})}),(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M178.454 287.861C194.736 273.673 215.71 260.12 227.307 267.585C238.903 275.05 241.373 303.646 254.46 323.652C267.608 343.524 291.499 354.862 297.557 372.375C303.801 389.808 292.272 413.281 275.735 435.814C259.198 458.347 237.839 479.861 212.586 486.783C187.394 493.569 158.373 485.955 146.72 465.776C135.006 445.733 140.784 413.182 142.244 388.621C143.829 364.116 141.281 347.523 145.804 331.978C150.327 316.434 162.107 301.858 178.454 287.861Z",fill:"#FF7846"})}),(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M158.918 140.54C176.392 125.312 198.902 110.766 211.348 118.778C223.793 126.79 226.444 157.48 240.49 178.952C254.6 200.278 280.241 212.447 286.742 231.242C293.444 249.952 281.071 275.143 263.323 299.327C245.575 323.51 222.651 346.6 195.549 354.028C168.512 361.312 137.366 353.14 124.859 331.483C112.288 309.972 118.489 275.037 120.055 248.678C121.756 222.379 119.022 204.57 123.876 187.887C128.731 171.204 141.374 155.561 158.918 140.54Z",fill:"#00FFE0"})}),(0,k.jsx)("g",{children:(0,k.jsx)("path",{d:"M248.28 172.7C238.752 151.961 255.376 124.793 278.555 120.433C301.602 116.147 331.279 134.799 350.54 147.13C369.877 159.592 378.854 165.527 384.016 172.973C389.177 180.419 390.522 189.375 400.709 203.128C410.69 216.827 429.458 235.527 428.941 249.384C428.555 263.166 408.754 272.18 389.788 276.017C370.692 279.93 352.431 278.667 342.41 268.816C332.335 259.17 330.556 240.73 311.929 224.381C293.227 207.902 257.753 193.645 248.28 172.7Z",fill:"#1977EA"})})]})})})};const Hr=function(e){var t=e.isNewChat,n=e.isAriaInTabView,r=e.children,a=e.disableSidebarClass,o=(0,d.ND1)().isAriaPinned,i={background:"bg-surface-chatbot",operaGx:{product:"gx",background:"bg-levels-l0-extension-bg"},operaAir:{product:"air"}};return(0,k.jsx)("div",{className:(0,A.AK)("opera-chatbot h-screen border-transparent focus:border-transparent focus:ring-0",n&&o?"sm:w-screen":"w-screen",(0,c.o6)(i,"product"),(0,c.o6)(i,"background"),t?"new-chat":"bg-right-gradient",!n&&!a&&"sidebarless:w-full-menu-dependent"),children:r})};var Kr=n(25079),Fr=n(60386);function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zr=function(e){var t,n,r,a,o,i,s=e.conversation,f=e.conversationId,p=e.conversationSource,g=e.setConversationId,x=e.menuStatus,C=e.setMenuStatus,O=e.addNewChat,_=e.createTimestamp,E=(0,w.$G)().t,S=(0,c.Su)().loggerService,N=(0,c.rg)().currentWindowId,I=(0,d.YZY)(),T=I.isGx,P=I.isOperaOne,R=(0,c.Cg)().consentNeeded,M=(0,c.oH)().isAriaInTabView,G=(0,pt.UO)().conversationId,L=(0,pt.s0)(),B=(0,d.ljr)().remoteConfig,H=(0,d.B9q)().newConversationRequest,K=(0,d.coc)().chatContext,F=(0,d.kGW)(f).reusableHighlights,U=(0,d.bCg)().highlightsReadyToRender,V=(0,d._gZ)().setContextType,z=(0,d.ljr)().remoteConfigOverride,W=(0,d.MII)().isLocalModelsEnabled,X=(0,d.hsz)().feedbackData,Y=(0,d.RCK)().isAccountLessUser,q=(0,d.J7o)(),$=q.currentModel,Q=q.fetchedModels,J=q.localModels,ee=(0,d.ek)().upgradeBannerSeenInSidebar,te=(0,d.Itl)().checkIfExistInRegistry,ne=(0,d.uEF)().setRenderHighlightsReady,re=(0,d.aGe)(),ae=re.clearChatContext,oe=re.setChatContext,se=(0,d.L6l)().handleCleanConversationRequest,ce=(0,d.oiy)().handleUpgradeBannerSeenInSidebar,de=(0,l.useState)(""),ue=(0,v.Z)(de,2),fe=ue[0],pe=ue[1],he=(0,l.useState)(!1),me=(0,v.Z)(he,2)[1],ve=(0,l.useState)(!1),ge=(0,v.Z)(ve,2),xe=ge[0],be=ge[1],we=(0,l.useState)(!1),ye=(0,v.Z)(we,2),je=ye[0],Ce=ye[1],ke=(0,l.useState)(null),Oe=(0,v.Z)(ke,2),_e=Oe[0],Ae=Oe[1],Ee=(0,l.useState)(!1),Se=(0,v.Z)(Ee,2),Ne=Se[0],Ie=Se[1],Te=(0,l.useRef)(null),Pe=(0,l.useRef)(null),Re=(0,l.useRef)(new Map),Me=(0,l.useRef)(F.length),De=et({conversationId:f,conversation:s}),Ge=De.isAriaModel,Le=De.parsedModelName,Be=De.isCloudModel,Ze=(0,wr.r)(Pe,K.working,Ne),He=Ze.autoScrollHandler,Ke=Ze.autoScroll,Fe=M?y.hG.BROWSER_TAB:y.hG.SIDEBAR,Ue=F.map((function(e){return e.title})),Ve=(0,Jt.Z)({conversationId:f,conversation:s,setConversationId:g,setMessage:pe,highlightedTexts:Ue}),ze=Ve.sendMessage,We=Ve.responseInProgress,Xe=s.data.filter((function(e){return e.sender===y.CI.user})),Ye=null!==_e&&Xe.length?Xe[_e]:null,qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E("new_chat");s.label=e,s.labelTmp=!0},$e=!!(o=Object.keys(c.n4).sort(),i=Object.keys(z).sort(),o.filter((function(e){return!i.includes(e)}))).length,Qe=function(){var e=Object.values(It._t).sort(),t=Object.keys(z).sort();return e.filter((function(e){return t.includes(e)}))}(),tt=!!Qe.length;(0,l.useEffect)((function(){var e=!("selected-content-prompt"===(null==H?void 0:H.message.source));if(H)if(e)if(H.message.id===f){switch(C(!1),H.message.source){case"selected-content-prompt":V(y.hG.HIGHLIGHT);break;case"command-line":V(y.hG.COMMAND_BAR);break;default:V(M?y.hG.BROWSER_TAB:y.hG.SIDEBAR)}e&&(se(N),ze(Vr({},H.message)))}else g(H.message.id);else if("selected-content-prompt"===H.message.source)return V(y.hG.HIGHLIGHT),void(0,u.z4)();M&&G!==f&&L("/".concat(f===c.$M?"":f))}),[H,f,M]),(0,l.useEffect)((function(){var e=Array.from(Re.current.values()).pop();if(!!F.length&&Me.current<F.length&&Pe.current&&e){var t,n=new DOMRect,r=(null===(t=Pe.current)||void 0===t?void 0:t.getClientRects().item(0))||n;(e.getClientRects().item(0)||n).top>r.bottom||(0,A.hB)(e,{block:"end"})}Me.current=F.length}),[F.length]),(0,l.useEffect)((function(){if(Ie(!0),null!==Ye){var e=Ye.id,t=Re.current.get(e);t&&(0,A.hB)(t,{block:"nearest"})}else it(),Ie(!1)}),[Ye]),(0,l.useEffect)((function(){s.label||qe()})),(0,l.useEffect)((function(){me(Boolean(K.conversationId&&f&&f!==K.conversationId))}),[K,oe,ae,K.conversationId,K.messageId,f]);var nt=(0,c.FL)({currentModel:$,conversation:s}),rt=(0,l.useMemo)((function(){if(s.model){var e=J.map((function(e){return e.name})).includes(s.model),t=!Ge&&te(s.model),n="Aria"===s.model;if(!e&&!t||!W&&!n&&!t)return!0}var r=new Date,a=new Date(s.lastMessageTime);return Math.floor((r.valueOf()-a.valueOf())/(24*c.kr))>=30&&""!=s.lastMessageTime}),[s.id,s.lastMessageTime,$,s.model,J,te]),it=(0,l.useCallback)((function(){s.mode===Je.E.pageContext||s.mode===Je.E.writingMode?(0,A.Cp)(Pe,"instant"):(0,A.Mx)(Pe,"instant")}),[s.mode]);s.label||qe(),(0,l.useEffect)(it,[U,s.data.length]),(0,l.useEffect)((function(){function e(e){var t=e.key;"F1"===t&&be((function(e){return!e})),"F2"===t&&Ce((function(e){return!e}))}return Ke||null!==_e||it(),(0,A.BB)()||window.addEventListener("keydown",e),function(){(0,A.BB)()||window.removeEventListener("keydown",e)}}),[]),(0,l.useEffect)((function(){if(s.data.length>2){var e=M?y.hG.BROWSER_TAB:y.hG.SIDEBAR;V(e)}}),[s,M,V]),(0,l.useEffect)((function(){var e=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[ae]);var st=(0,l.useState)(!1),ct=(0,v.Z)(st,2),lt=ct[0],dt=ct[1];(0,l.useEffect)((function(){dt(!(Ke&&We))}),[s.data.length,Ke,We]);var ut,ft=(0,l.useCallback)((function(e){pe(e),Ae(null)}),[]),ht=function(e,t){e?Re.current.set(t,e):Re.current.delete(t)},mt=!rt,vt=0===(null==s||null===(t=s.data)||void 0===t?void 0:t.length),gt=(null===(n=s.data.at(-1))||void 0===n||n.suggestions,(null==s?void 0:s.mode)===Je.E.pageContext),xt=(null==s?void 0:s.mode)===Je.E.writingMode,bt=vt&&void 0===(null==H?void 0:H.message),wt=!vt&&Y&&!ee,yt=(0,l.useState)(""),jt=(0,v.Z)(yt,2),Ct=jt[0],kt=jt[1];return(0,k.jsx)(Hr,{isNewChat:bt,isAriaInTabView:!!M,children:(0,k.jsx)(c.Lz.Provider,{value:s,children:(0,k.jsxs)("div",{id:"opera-chatbot-container",className:"opera-chatbot-container relative flex h-full w-full flex-col overflow-hidden p-0 transition-all duration-300 ease-in",children:[xe&&(0,k.jsx)(zt,{}),je&&(0,k.jsx)(Qt,{hasNewKeysInRemoteConfig:$e,hasLegacyKeysInRemoteConfig:tt,setRemoteConfigOverrideAvailable:Ce}),(0,k.jsx)(Ht,{conversation:s,setMenuStatus:C,addNewChat:O,conversationId:f,conversationTitle:s.label,isAnimated:Boolean(s.isLabelGenerated)&&Boolean(!s.isAnimated),menuStatus:x,onAnimationFinish:function(){(0,ot.X1)(f,{isAnimated:!0})}}),(0,k.jsx)(D.P_,{}),(0,k.jsxs)("div",{className:(0,A.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",M&&"z-1 m-auto max-w-tab-view px-3"),children:[bt&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Br,{shadowEffectClasses:"fill-[--aria-bg-shape-shadow-color]",shapesClasses:"fill-[--aria-bg-shape-fill-color]",shadowEffectGradient:T?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--aria-bg-shape-shadow-start-color)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--aria-bg-shape-shadow-stop-color)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,k.jsx)(Dr,{description:Ct||("Aria"===$?E("chat_lead_in"):(0,k.jsx)(j.Z,{message:null!==(r=null===(a=null===(ut=Q.find((function(e){return e.family_name===(0,A.zn)($).split(":")[0]})))||void 0===ut?void 0:ut.description)||void 0===a?void 0:a.trim())&&void 0!==r?r:"",components:{ul:Ir.Tf}})),title:"Aria"===$?E("product_name.opera"):(0,A.zn)($)}),"Aria"===$&&(0,k.jsx)(Nr,{adjustChatLeadingDescription:function(e){var t=c.t5.EMAIL,n=c.t5.EXPERT_TRANSLATION,r=c.t5.GRAMMAR_CHECK;switch(e){case t:case n:case r:kt(E("write_check_translate_emails_with_ai"));break;default:kt("")}}})]}),(0,k.jsxs)("div",{ref:Pe,id:"messages-container",className:(0,A.AK)("messages z-1",vt?"w-[101%] !px-0":"pl-3 pr-1.5",!(vt&&T)&&"messages-container hover-scrollbar",function(){if(s.data.length)return B.local_models&&W?"mt-2":"mt-0"}()),onScroll:He,children:[!vt&&Ge&&(0,k.jsx)(Ft,{}),(0,k.jsx)(br,{onContentHighlighterError:function(e){S.error("CONTENT HIGHLIGHTER ERROR",e),S.info("SETTING HIGHLIGHTS TO NOT RENDER"),ne(!1),S.info("REMOVING HIGHLIGHTED SPANS"),Rn(Pe.current),ne(!0),S.info("HIGHLIGHTS CAN BE RENDERED")},children:(0,k.jsxs)(fr,{messagesContainerRef:Pe,conversation:s,readOnly:rt,children:[!vt&&(0,k.jsxs)(k.Fragment,{children:[Ge&&gt&&(0,k.jsx)(ie,{id:"conversation_in_context_mode",sender:y.CI.aria,message:E("conversation_in_context_mode"),noExtraButtons:!0,responseInProgress:We,contextType:Fe,originLink:s.originLink,addNewChat:O,conversationSource:p}),Ge&&xt&&(0,k.jsx)(ie,{id:"conversation_in_writing_mode",sender:y.CI.aria,message:E("conversation_in_writing_mode"),noExtraButtons:!0,responseInProgress:We,contextType:Fe,originLink:s.originLink,addNewChat:O,conversationSource:p}),!Ge&&(0,k.jsx)(ie,{id:"local_model_disclaimer_message",sender:y.CI.localModel,message:Be?E("cloud_model_input_disclaimer",{modelName:Le}):E("local_model_disclaimer_message"),noExtraButtons:!0,responseInProgress:We,contextType:Fe,addNewChat:O,conversationSource:p})]}),s.data.reduce((function(e,t,n){var r=s.data[n-1],a=s.data[n+1],o=(0,l.createElement)(ie,Vr(Vr({},t),{},{ref:function(e){return ht(e,t.id)},key:t.id,isLastMessage:!a,onRetry:!rt&&!t.isRetryDisabled&&function(){ze({text:t.message,source:M?"tab-view":"sidebar",files:t.files}),(0,A.X0)(Pe)},responseInProgress:We,contextType:Fe,conversationSource:p,isActive:t===Ye,addNewChat:O})),i=R&&(0,k.jsx)(ie,{id:"consents",sender:y.CI.aria,message:E("consent_header"),noExtraButtons:!0,responseInProgress:We,contextType:Fe,originLink:s.originLink,addNewChat:O,conversationSource:p,children:(0,k.jsx)(Fr.H,{handleSendMessage:function(){return function(e){ze({text:e.message,source:M?"tab-view":"sidebar",files:e.files,isForce:!0})}(t)},source:M?"tab-view":"sidebar"})},"consents-".concat(n));return t.sender===y.CI.user&&a&&a.sender===y.CI.aria?[].concat((0,h.Z)(e),[(0,k.jsx)(Z.fx,{render:function(e){var r=e.handleScreenshotClipboard,i=e.clipboardPending;return(0,k.jsxs)(l.Fragment,{children:[o,(0,l.createElement)(ie,Vr(Vr({},a),{},{key:a.id,ref:function(e){return ht(e,a.id)},isLastMessage:s.data.length===n+2,onRetry:!rt&&!t.isRetryDisabled&&function(){ze({text:t.message,source:M?"tab-view":"sidebar",files:t.files}),(0,A.X0)(Pe)},responseInProgress:We,contextType:Fe,conversationId:f,conversationSource:p,isActive:a.id===(null==Ye?void 0:Ye.id),handleScreenshotClipboard:r,screenshotClipboardPending:i,model:s.model,addNewChat:O}))]})}},"".concat(t.id,"-").concat(a.id)),(null==X?void 0:X.message_id)&&X.message_id===a.server_id&&(0,k.jsx)(yr.x,{},X.message_id)]):t.sender===y.CI.aria&&r&&r.sender===y.CI.user?e:[].concat((0,h.Z)(e),[o,i])}),[])]})}),false,rt&&(0,k.jsx)(Ut,{})]}),wt&&(0,k.jsx)(Kr.Q,{onCloseButtonClick:function(){ce(!0)},source:M?"tab-view":"sidebar"}),mt&&(0,k.jsx)(at,{imageHandlers:nt,messagesContainerRef:Pe,ref:Te,readOnly:rt,addNewChat:O,setMessage:ft,sendMessage:function(e){ze(e),Ae(null)},message:fe,conversation:s,createTimestamp:_,onActiveUserMessageIndexChange:function(e){if(0!==Xe.length&&(null!==_e||1!==e)){var t=Xe.length-1,n=null===_e?t:_e+e;n<0&&(n=0),n>t&&(n=null),Ae(n),pe(null===n?"":Xe[n].message)}},menuStatus:x,conversationId:s.id,setConversationId:g,disabled:Boolean(1===s.data.length)&&R}),mt&&P&&bt&&(0,k.jsx)(Zr,{}),lt&&(0,k.jsx)(le,{conversationId:s.id,message:fe,inputRef:Te,messagesContainerRef:Pe,isUpgradeBannerVisible:wt})]})]})})})};var Wr=n(7492),Xr=n(34134),Yr=n(72781),qr=n(30538),$r=n(92255),Qr=n(62013),Jr=n(40757),ea=n(14861);const ta=function(e){var t=e.isListUnderProfileSection,n=e.profileSectionRef,r=(0,d.RCK)(),a=r.authUserDetails,o=r.authStatus,i=r.isAccountLessUser,s=(0,w.$G)().t,l={iconSize:28,operaAir:{iconSize:32,padding:"pl-2"},borderColor:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},profileIcon:{operaOne:"rounded-aria-radius-3",operaGx:"rounded-aria-radius-2",operaAir:"rounded-full"},profileIconLoggedIn:{operaOne:Qr,operaGx:ea,operaAir:Jr},profileIconNotLoggedIn:{operaOne:i?Yr:Qr,operaGx:i?$r:ea,operaAir:i?qr:Qr}},u=(0,c.o6)(l,["iconSize","borderColor","profileIconLoggedIn","profileIconNotLoggedIn","profileIcon","padding"]);return(0,k.jsx)("div",{className:(0,A.AK)(t?"border-t":"","notLoggedIn"===o&&"flex flex-grow items-end","mb-3.5 border-0 border-solid",u.borderColor),ref:n,children:(0,k.jsxs)(Z.zx,{type:"menu",onClick:Xr.Wu,onKeyUp:Xr.Wu,tabIndex:-1,className:(0,A.AK)("text-subheader-s flex h-12 w-full justify-start gap-2",u.padding),children:[(0,k.jsx)(I.P,{sender:Ne.CI.user}),a&&a.email!==c.aK?(0,k.jsx)("p",{className:"text-body-m truncate",title:(null==a?void 0:a.fullname)||(null==a?void 0:a.email),children:(null==a?void 0:a.fullname)||(null==a?void 0:a.email)}):(0,k.jsxs)("div",{className:"flex flex-col items-start",children:[(0,k.jsx)("p",{className:"text-xs text-text-t1-text-active-icons",children:s("anonymous_account")}),(0,k.jsx)("p",{className:"text-xxs text-text-t1-text-active-icons opacity-80",children:s("anonymous_account_description")})]})]})})};function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aa=function(){var e=(0,l.useState)(!1),t=(0,v.Z)(e,2),n=t[0],r=t[1],a=(0,De.YF)({open:n,onOpenChange:r}),o=a.refs,i=o.setFloating,s=o.setReference,c=a.context,d=(0,De.eS)(c),u=(0,De.qs)(c),f=(0,De.bQ)(c,{outsidePressEvent:"mousedown"}),p=(0,De.NI)([d,u,f]),h=p.getReferenceProps,m=p.getFloatingProps;return{referenceProps:ra({ref:s},h()),dialogProps:{open:n,context:c,floatingProps:ra({ref:i},m())},open:n,onOpenChange:r}},oa=function(e){var t=e.open,n=e.context,r=e.floatingProps,a=e.children,o=(0,c.o6)({overlayBackground:{operaOne:"bg-[--opera-confirmation-popup-background]",operaAir:""}},["overlayBackground"]);return(0,k.jsx)(De.ll,{children:t&&(0,k.jsx)(De.y0,{className:(0,A.AK)("z-10 grid place-items-center",o.overlayBackground),lockScroll:!0,children:(0,k.jsx)(De.wD,{context:n,children:(0,k.jsx)("div",ra(ra({className:"rounded"},r),{},{children:a}))})})})};function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ca=function(e){var t=e.dialogProps,n=e.title,r=e.message,a=e.confirmMessage,o=e.cancelMessage,i=e.onConfirm,s=e.onCancel,l=(0,c.o6)({buttonsRow:"gap-aria-4",operaAir:{container:"air-level-02",buttonsRow:"gap-aria-5"}},["container","buttonsRow"]);return(0,k.jsx)(oa,sa(sa({},t),{},{children:(0,k.jsxs)("div",{className:(0,A.AK)("box-border flex h-auto w-93 flex-col items-center justify-center gap-4 break-words rounded-aria-radius-5 bg-levels-l5-primary p-aria-6",l.container),children:[(0,k.jsxs)("div",{className:"text-body-l w-full text-text-t1-text-active-icons",children:[!!n&&(0,k.jsx)("div",{children:n}),(0,k.jsx)("span",{children:r})]}),(0,k.jsxs)("div",{className:(0,A.AK)("flex w-full select-none flex-row",l.buttonsRow),children:[(0,k.jsx)(Z.zx,{type:"secondary",className:"w-full",onClick:s,size:"s",children:o}),(0,k.jsx)(Z.zx,{type:"primary",className:"w-full",onClick:i,size:"s",children:a})]})]})}))};const la=n.p+"assets/d8c997123e645906d03c.svg",da=n.p+"assets/745aeb76875985654993.svg",ua=n.p+"assets/367eb723245679db4a93.svg",fa=n.p+"assets/e80d62dbaf8610c53477.svg",pa=n.p+"assets/13023af6cd2fb4db9fb2.svg",ha=n.p+"assets/fb3d676cda79cd750559.svg",ma=n.p+"assets/0246e88ab3b60542f582.svg",va=n.p+"assets/0df5751a13a271ffc000.svg";var ga=n(13771),xa=n(53979);const ba=function(e){var t=e.provider,n=e.logoConfig,r=e.text,a=e.customClassName,o=(0,d.fvp)().networkEnvironment,i=(0,d.HhX)().setAccountlessLoginData,s=(0,c.oH)().isAriaInTabView,u=(0,l.useCallback)((function(){var e=s?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR;i({context:e,initTime:Date.now(),source:"side_menu_".concat(t)}),(0,He.vH)({action:Ne.VV.CLICK,context:e,element:Ne.Y3.ONBOARDING,str_value:"start:log_in:side_menu_".concat(t)}),(0,xa.RB)((0,Se.B9)(t,o))}),[s,o,t,i]);return(0,k.jsxs)(D.zx,{type:"secondary",className:(0,A.AK)("text-button-m flex w-full flex-row gap-2 px-4 py-2",a),onClick:u,children:[(0,k.jsx)(S.S,{config:n,className:"h-5 w-5"}),r]})};const wa=function(){var e=(0,c.o6)({operaOne:{light:va,dark:ma}}),t=(0,w.$G)().t,n={border:"border border-stroke-components",separator:"border-t border-stroke-components my-2",padding:"p-4",rounded:"rounded-aria-radius-3",operaAir:{rounded:"rounded-aria-radius-4"}};return(0,k.jsxs)("div",{className:(0,A.AK)("mt-4 flex max-w-sm flex-col items-center gap-2 text-text-t1-text-active-icons",(0,c.o6)(n,"rounded"),(0,c.o6)(n,"border"),(0,c.o6)(n,"padding")),children:[(0,k.jsx)("div",{className:"mb-2",children:t("log_in_to_enable_chat_history")}),(0,k.jsx)(ba,{provider:ga.FU.EMAIL,text:t("log_in_via_email"),logoConfig:{icon:e,color:"var(--text-t1-text-active-icons)"},customClassName:"flex-row-reverse justify-between pr-3 text-button-m"}),(0,k.jsx)("div",{className:(0,A.AK)("w-full",(0,c.o6)(n,"separator"))}),(0,k.jsx)(ba,{provider:ga.FU.GOOGLE,text:"Google",logoConfig:{icon:la,size:16,operaAir:{icon:fa,color:"var(--text-t1-text-active-icons)"}}}),(0,k.jsx)(ba,{provider:ga.FU.APPLE,text:"Apple",logoConfig:{icon:da,size:16,operaAir:{icon:pa,color:"var(--text-t1-text-active-icons)"}}}),(0,k.jsx)(ba,{provider:ga.FU.FACEBOOK,text:"Facebook",logoConfig:{icon:ua,size:16,operaAir:{icon:ha,color:"var(--text-t1-text-active-icons)"}}})]})};var ya=(0,l.forwardRef)((function(e,t){var n=e.active,r=(0,l.useMemo)((function(){return{element:"w-4 h-4 flex-shrink-0",operaOne:{rounded:"rounded-[5px]",active:n?"bg-other-o1":"bg-secondary-s3-bg-icons"},operaGx:{rounded:"rounded-aria-radius-2",active:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s1-selected-stroke"},operaAir:{rounded:"rounded-full",active:n?"bg-other-o1":"bg-secondary-s2-tertiary-need-to-fix"}}}),[n]),a=(0,c.o6)(r,["element","rounded","active"]);return(0,k.jsx)("div",{className:(0,A.AK)(a.element,a.rounded,a.active),ref:t})}));const ja=n.p+"assets/3cbf89edd72e893f6e28.svg";var Ca=n(65871);var ka={operaOne:Ca,operaAir:Ca,operaGx:n.p+"assets/d9a682e9e2baa3d6bfed.svg"};const Oa=function(e){var t=e.className,n=e.conversationId,r=(0,pt.oQ)(n?"/".concat(n):"/"),a=(0,d.J7o)().currentModel,o=(0,d.ND1)().isAriaPinned,i=function(){var e=(0,m.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),window.open("".concat(xa.xm).concat(r)),chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},(function(e){var t=e.find((function(e){return e.active}));t&&chrome.tabs.move(t.id,{index:e.length})})),(0,He.vH)({action:Ne.VV.CLICK,element:Ne.Y3.CHAT,context:Ne.hG.SIDEBAR,model:"Aria"===a?"Aria":"LocalModel",str_value:"switch_to:".concat(Ne.hG.BROWSER_TAB)}),o){e.next=7;break}return e.next=7,(0,u.FM)();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=(0,c.o6)(ka);return(0,k.jsx)(Z.hU,{type:"tertiary",icon:s,className:(0,A.AK)("flex items-center","open-tab-view-icon",t),onClick:i,onKeyDown:i,tabIndex:-1,title:"Open Aria Tab view"})};var _a={headerIconOffset:{operaOne:" px-aria-3",operaGx:"",operaAir:" px-aria-3"},closeIcon:{operaOne:Pt,operaAir:Pt,operaGx:Mt},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"},menuNewChat:{plusIcon:{icon:ja,color:"var(--text-tb)",operaGx:{color:"var(--opera-gx-font-color)"}}}};const Aa=function(e){var t=e.onNewChatButtonClick,n=e.isTabViewAvailable,r=e.menuPinned,a=e.onExpandMenuIconClick,o=e.onExpandMenuIconKeyUp,i=(0,w.$G)().t,s=(0,c.o6)(_a,["closeIcon","menuHeader","menuTitle","headerIconOffset"]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:(0,A.AK)("mb-1 flex items-center justify-between pb-2",s.menuHeader),children:[(0,k.jsxs)("div",{className:(0,A.AK)("flex flex-row gap-aria-2",s.headerIconOffset),children:[(0,k.jsxs)("button",{onClick:t,className:"flex items-center",children:[(0,k.jsx)(I.P,{sender:Ne.CI.aria,size:20}),(0,k.jsx)("span",{className:(0,A.AK)(s.menuTitle,"text-header-m"),children:i("product_name.opera")})]}),n&&(0,k.jsx)(Oa,{className:"ml-aria-3"})]}),(0,k.jsx)("div",{className:"h-8 flex-grow"}),!r&&(0,k.jsx)(Z.hU,{border:!0,icon:s.closeIcon,type:"secondary",onClick:a,onKeyUp:o,tabIndex:-1,iconSize:12})]}),(0,k.jsxs)(Z.zx,{type:"primary",className:"w-full justify-between",size:"m",onClick:t,children:[(0,k.jsx)("span",{children:i("new_chat")}),(0,k.jsx)(S.S,{config:_a.menuNewChat.plusIcon})]})]})},Ea=n.p+"assets/fc38b7983fc16b181eff.svg";const Sa=function(e){var t=e.openSettingsHandler,n=e.settingBtnTestId,r=(0,w.$G)().t;return(0,k.jsxs)(Z.zx,{testId:n,type:"tertiary",tabIndex:0,onClick:t,className:"w-full space-x-2 self-center duration-200 ease-in-out",size:"m",children:[(0,k.jsx)(S.S,{config:{icon:Ea,color:"var(--text-t1-text-active-icons)"}}),(0,k.jsx)("div",{children:r("settings")})]})};var Na={editIcon:{operaOne:n.p+"assets/93a9746de1565a35ae92.svg",operaGx:n.p+"assets/124b0bca1fa101be17ad.svg"},trashIcon:{operaOne:n.p+"assets/1a2bb9f903b0d1bdf09f.svg",operaGx:n.p+"assets/5332e5f34690d12fd799.svg"}};const Ia=function(e){var t=e.editId,n=e.elementPin,r=e.handleGoToConversation,a=e.id,o=e.isActive,i=e.isTabViewAvailable,s=e.label,l=e.onDeleteClick,d=e.onEditClick,u=e.serverId,f=e.setEditId,p=(0,c.o6)(Na,["trashIcon","editIcon"]),h=function(){return r(a)};return t===a?(0,k.jsx)("div",{className:(0,A.AK)("flex !h-12 w-full items-center",p.editOuter),children:(0,k.jsx)(ct,{id:a,setEditId:f,currentLabel:s})}):(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(Z.j2,{type:"menu",className:(0,A.AK)("group","flex !h-12 w-full flex-row gap-1 !pr-2",o?"selected":""),tabIndex:-1,onClick:h,onKeyUp:h,children:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 truncate",children:[n,(0,k.jsx)("span",{className:"text-body-m truncate",title:s,children:s})]}),(0,k.jsx)("div",{className:"hidden flex-grow group-hover:block"}),(0,k.jsxs)("div",{className:"hidden flex-row justify-end gap-1 group-hover:flex",children:[(0,k.jsx)(Z.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),l(a,u,s)}(e)},icon:p.trashIcon,type:"tertiary"}),(0,k.jsx)(Z.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),d(a)}(e)},tabIndex:-1,icon:p.editIcon,type:"tertiary"}),i&&(0,k.jsx)(Oa,{className:"transition-all duration-200 ease-in-out",conversationId:a})]})]})})})};function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ra=function e(t){var n=t.conversationsData,r=t.conversationId,a=t.setConversationId,o=t.setMenuStatus,i=t.menuStatus,s=t.addNewChat,u=(0,w.$G)().t,f=(0,c.oH)().isAriaInTabView,p=aa(),h=aa(),g=(0,Wr.j)().handleSetIsContainerScrolling,x=(0,c.Au)().abortMessage,y=(0,pt.s0)(),j=(0,pt.TH)(),C=(0,pt.SN)(),O=(0,c.iP)().windowInnerWidth,_=(0,d.ljr)().remoteConfig,E=(0,c.Su)().ariaVoiceReaderService,S=(0,d.lUI)().clearReusableHighlights,N=(0,l.useState)(null),I=(0,v.Z)(N,2),T=I[0],P=I[1],R=(0,l.useState)({id:"",serverId:"",label:""}),M=(0,v.Z)(R,2),D=M[0],L=M[1],B=(0,d.coc)().chatContext,Z=(0,d.RCK)(),H=Z.isAccountLessMode,K=Z.authStatus,F=Z.isLoading,U=(0,l.useRef)(null),V=(0,l.useRef)(null),z=(0,l.useRef)(null),W=(0,l.useRef)(null),X=(0,l.useRef)(null),Y=(0,l.useCallback)((function(){void 0===f||f||o(!1)}),[f,o]),q=function(){"/settings"===j.pathname?Y():(o(!1),y("/settings"))},$=function(){("/"!==j.pathname||f)&&y("/"),s()},Q=(0,l.useCallback)((function(e){a(e),S(),f||Y()}),[r]),J=(0,ht.F0)(),ee=J.showBottomBorder,te=J.showTopBorder,ne=J.containerRef,re=(0,ht.OZ)(V,z,"bottom").isListUnder,ae=(0,ht.OZ)(V,X,"top").isListAbove,oe=function(e){Q(e),f?y("/".concat(e)):"/"!==j.pathname&&y("/")},ie=function(){(0,A.yc)(V.current,re,ae)},se=window.innerWidth>=c.Qx,ce=function(){se&&(ie(),Y())},le=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.working){e.next=3;break}return e.next=3,x(D.id);case 3:return n.forEach((function(e){var t=e.id;return(0,ot.g$)(t,E)})),e.next=6,(0,ot.Bn)(n);case 6:S(),$(),p.onOpenChange(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.working||B.conversationId!==D.id){e.next=3;break}return e.next=3,x(D.id);case 3:return e.next=5,(0,ot.g$)(D.id,E);case 5:return e.next=7,(0,ot.SJ)(D.id,D.serverId);case 7:S(),r===D.id&&$(),h.onOpenChange(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){Y(),$()},fe=_.tab_view&&!f;(0,l.useEffect)((function(){i&&ie()}),[i]),(0,l.useEffect)((function(){var e,t=function(e,t){var n;n=t,e===c.SG&&n&&se&&ie(),Y()};return null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.addListener(t),window.addEventListener("resize",ce),function(){var e;window.removeEventListener("resize",ce),null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.removeListener(t)}}),[]),(0,l.useEffect)((function(){var e=function(e){U.current&&!U.current.contains(e.target)&&(p.open||h.open||f||Y())};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[o,U,p.open,h.open,f,Y]);var pe=!f&&O>=c.Qx,he=(0,l.useMemo)((function(){return{menuWrapper:{operaOne:f?"border-r border-stroke-components bg-levels-l5-primary":"rounded-aria-radius-5 bg-levels-l5-primary",operaAir:f?"border-r border-stroke-components bg-levels-l0-extension-bg":pe?"rounded-none bg-levels-l0-extension-bg":"rounded-aria-radius-4 bg-levels-l0-extension-bg",operaGx:"gx bg-levels-l5-primary"},menuWrapperBackdrop:{operaAir:"air-level-02"},menuContent:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"}}}),[f,pe]),me=(0,c.o6)(he,["menuWrapper","menuWrapperBackdrop","menuContent"]),ve=function(e,t,n){h.onOpenChange(!0),L({id:e,serverId:t,label:n})},ge=function(e){P(e)},xe=function(){return o(!i)},be=(0,A.wE)(e,"button","settings"),we=(0,A.AK)("menu-wrapper p-3",(i||se)&&"menu-wrapper-active menu-shadow left-0",me.menuWrapper,me.menuWrapperBackdrop),ye=(0,A.AK)(te?"border-b":"",me.menuContent,"border-0 border-solid","menu-top-content");return F?(0,k.jsxs)("div",{className:we,ref:U,children:[(0,k.jsx)("div",{className:ye,ref:z,children:(0,k.jsx)(Aa,{onNewChatButtonClick:ue,isTabViewAvailable:fe,menuPinned:pe,onExpandMenuIconClick:xe,onExpandMenuIconKeyUp:xe})}),(0,k.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,k.jsx)(G.Z,{sizeClass:"h-9.5 w-9.5",spinnerColoring:"gray-accent"})}),(0,k.jsx)(Sa,{openSettingsHandler:q,settingBtnTestId:be})]}):(0,k.jsxs)(l.Fragment,{children:[(0,k.jsxs)("div",{className:we,ref:U,children:[(0,k.jsxs)("div",{className:ye,ref:z,children:[(0,k.jsx)(Aa,{onNewChatButtonClick:ue,isTabViewAvailable:fe,menuPinned:pe,onExpandMenuIconClick:xe,onExpandMenuIconKeyUp:xe}),H?(0,k.jsx)(wa,{}):n.filter((function(e){return e.label})).length>0&&(0,k.jsxs)("div",{className:"mt-aria-3 flex select-none justify-end p-aria-3 pb-aria-2",children:[(0,k.jsx)("button",Pa(Pa({},p.referenceProps),{},{className:"text-body-m text-text-t1-text-active-icons",children:u("menu_delete_all")})),(0,k.jsx)(ca,{dialogProps:p.dialogProps,message:u("menu_delete_all_messages_confirm"),confirmMessage:u("delete_all"),cancelMessage:u("cancel"),onCancel:function(){p.onOpenChange(!1)},onConfirm:le})]})]}),!H&&(0,k.jsx)("div",{className:"hover-scrollbar -mr-1.5 flex-grow overflow-auto py-1",onScroll:g,ref:ne,tabIndex:-1,children:(0,k.jsx)("div",{className:"flex flex-col gap-1",ref:W,children:n.length>0&&n.filter((function(e){var t=e.isLabelGenerated,n=e.label,r=e.labelTmp;return Boolean(n||r||t)})).reverse().map((function(e){var t=e.id,n=e.label,a=e.server_id,o=C||[],i=(0,v.Z)(o,1)[0],s=t===r,c=i&&i.params.conversationId===t,l=s||c;return(0,k.jsx)(Ia,{editId:T,elementPin:(0,k.jsx)(ya,{active:l,ref:l?V:null}),handleGoToConversation:oe,id:t,isActive:l,isTabViewAvailable:fe,label:n,serverId:a,onDeleteClick:ve,onEditClick:ge,setEditId:P},t)}))})}),"loggedIn"===K&&!H&&(0,k.jsx)(ta,{isListUnderProfileSection:ee,profileSectionRef:X}),(0,k.jsx)(Sa,{openSettingsHandler:q,settingBtnTestId:be})]}),h.open&&(0,k.jsx)(ca,{message:u("menu_delete_message_confirm")+'"'.concat(D.label,'"?'),confirmMessage:u("delete"),cancelMessage:u("cancel"),onCancel:function(){L({id:"",serverId:"",label:""}),h.onOpenChange(!1)},onConfirm:de,dialogProps:h.dialogProps})]})};n(16611);var Ma=n(7134),Da={attributes:{source:"aria-extension"}};Da.styleTagTransform=ye(),Da.setAttributes=ge(),Da.insert=me().bind(null,"head"),Da.domAPI=pe(),Da.insertStyleElement=be();ue()(Ma.Z,Da);Ma.Z&&Ma.Z.locals&&Ma.Z.locals;var Ga=function(e){var t=e.checked,n=e.onClick,r=e.icon,a=e.name,o=e.children,i=e.className,s={button:(0,A.AK)("rounded-aria-radius-3 border",t?"border-primary-p1-cobalt-buttons hover:bg-primary-p3-disabled-buttons":"border-secondary-s1-selected-stroke hover:bg-secondary-s4-surface-overlay"),operaAir:{button:(0,A.AK)("rounded-aria-radius-4 bg-p3-disabled-buttons text-text-t1-text-active-icons",t?"bg-primary-p3-disabled-buttons border-transparent hover:border-secondary-s1-selected-stroke":"hover:border-transparent bg-transparent hover:bg-secondary-s4-surface-overlay border-secondary-s1-selected-stroke")}},l=(0,c.o6)(s,["button"]);return(0,k.jsxs)("button",{className:(0,A.AK)("text-header-m flex h-8 flex-shrink-0 items-center justify-center gap-2.5 border border-solid p-2.5 text-center",l.button,i),onClick:n,children:[r&&(0,k.jsx)("span",{className:"flex h-4 items-center text-base",draggable:"false",children:r}),o||(0,k.jsx)("span",{children:a})]})},La=function(e){var t=e.index,n=e.task,r=(0,l.useRef)(null),a=(0,d.cpB)(),o=a.promptStudioConfig,i=a.promptStudioFormData,s=(0,d.nrG)().setPromptStudioFormData,u=t===i.taskIndex,f=function(){var e,n,r,a,i=null!==(e=null===(n=o[t])||void 0===n?void 0:n.fieldsets)&&void 0!==e?e:{},c=i.tonalities,l=void 0===c?[]:c,d=i.lengths,u=void 0===d?[]:d,f=null!==(r=null===(a=o[t])||void 0===a?void 0:a.defaults)&&void 0!==r?r:{},p=f.tonality,h=void 0===p?"":p,m=f.length,v=void 0===m?"":m,g=l.map((function(e){return e.id})).indexOf(h),x=u.map((function(e){return e.id})).indexOf(v);s({taskIndex:t,toneIndex:g,lengthIndex:x})};(0,l.useEffect)((function(){t===i.taskIndex&&f()}),[]);var p={chip:{operaGx:!u&&"border-text-t3-text-gray"},chipText:{operaGx:"text-text-t2-text-secondary"}},h=(0,c.o6)(p,["chip","chipText"]);return(0,k.jsxs)(l.Fragment,{children:[(0,k.jsx)("input",{ref:r,className:"peer hidden",type:"radio",name:"tasks",id:"radio-".concat(n.id),value:n.id,checked:u,onChange:f}),(0,k.jsx)(Ga,{checked:u,onClick:function(e){e.preventDefault(),r.current&&r.current.click()},className:h.chip,children:(0,k.jsx)("span",{className:h.chipText,children:n.name})})]})};const Ba=function e(t){var n=t.title,r=t.children,a=t.className;return(0,k.jsxs)("div",{className:(0,A.AK)("flex flex-col gap-aria-3",a),children:[n&&(0,k.jsx)("span",{"data-testid":(0,A.wE)(e,"span","title"),className:"text-header-s",children:n}),r]})};var Za=function(){var e=(0,w.$G)().t,t=(0,d.cpB)().promptStudioConfig,n=void 0===t?[]:t,r=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,k.jsx)(Ba,{title:e("tasks"),children:(0,k.jsx)("div",{className:(0,A.AK)(r.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:(null==n?void 0:n.map)&&n.map((function(e,t){return(0,k.jsx)("div",{children:(0,k.jsx)(La,{index:t,task:e})},e.id)}))})})};const Ha=function e(t){var n,r,a=t.isFormInvalid,o=t.isDisabled,i=(0,w.$G)().t,s=(0,d.cpB)(),l=s.promptStudioConfig,u=s.promptStudioFormData,f=(0,d.nrG)().setPromptStudioFormData,p=null!==(n=null===(r=l[u.taskIndex])||void 0===r?void 0:r.fieldsets.query)&&void 0!==n?n:{},h=p.id,m=void 0===h?"":h,v=p.max_length,g=void 0===v?c.tX:v,x=p.placeholder,b=void 0===x?i("chat_lead_in"):x,y=(0,c.o6)({descriptionBackground:"bg-levels-l3-cards",operaAir:{descriptionBackground:"bg-secondary-s2-tertiary-need-to-fix"}},["descriptionBackground"]);return(0,k.jsx)(Ba,{title:"".concat(i("description")," (").concat(i("required"),")"),children:(0,k.jsx)("div",{className:(0,A.AK)(),children:(0,k.jsx)(Z.Kx,{testId:(0,A.wE)(e,"textarea","descriptionTextArea"),disabled:o,className:(0,A.AK)("h-28",y.descriptionBackground),invalid:a,name:m,maxLength:g,placeholder:b,onChange:function(e){e.preventDefault();var t=e.target.value;f({description:t})},defaultValue:u.description})})})};var Ka=function(e){var t,n,r,a=e.style,o=e.idx,i=(0,l.useRef)(null),s=(0,d.cpB)(),c=s.promptStudioConfig,u=s.promptStudioFormData,f=(0,d.nrG)().setPromptStudioFormData,p=(null!==(t=null===(n=c[u.taskIndex])||void 0===n?void 0:n.fieldsets)&&void 0!==t?t:{}).tonalities,h=(null!==(r=(void 0===p?[]:p)[u.toneIndex])&&void 0!==r?r:{}).id,m=void 0===h?3735928559:h,v=a.id===m;return(0,k.jsxs)(l.Fragment,{children:[(0,k.jsx)("input",{ref:i,className:"peer hidden",type:"radio",id:"radio-".concat(a.id),name:"style",value:a.id,checked:a.id===m,onChange:function(){return f({toneIndex:o})}}),(0,k.jsx)(Ga,{checked:v,onClick:function(e){e.preventDefault(),i.current&&i.current.click()},name:a.name,icon:a.icon})]})},Fa=function(){var e,t,n=(0,w.$G)().t,r=(0,d.cpB)(),a=(null!==(e=null===(t=r.promptStudioConfig[r.promptStudioFormData.taskIndex])||void 0===t?void 0:t.fieldsets)&&void 0!==e?e:{}).tonalities,o=void 0===a?[]:a,i=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,k.jsx)(Ba,{title:n("tonality"),children:(0,k.jsx)("div",{className:(0,A.AK)(i.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:o.map((function(e,t){return(0,k.jsx)("div",{children:(0,k.jsx)(Ka,{style:e,idx:t})},e.id)}))})})},Ua=function(e){var t,n,r=e.value,a=e.onChange,o=e.max,i=e.min,s=e.disabled,l=e.inputName,d=(0,c.Su)().loggerService,u=null!=i?i:0,f=function(){return r>o?(d.warn("Illegal slider value - higher than max"),o):r<u?(d.warn("Illegal slider value - lower than min"),u):r},p={headRadius:{operaOne:"rounded-aria-radius-1",operaAir:"rounded-aria-radius-5"},headBorder:{operaOne:s?"border-secondary-s1-selected-stroke":"border-primary-p1-cobalt-buttons"}};return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{className:(0,A.AK)("relative my-1 h-1 w-full rounded-aria-radius-2 border-solid"),style:{background:(t=s?"--secondary-s1-selected-stroke":"--primary-p1-cobalt-buttons",n=r/o*100,"linear-gradient(to right, var(".concat(t,") ").concat(n,"%, var(--secondary-s4-surface-overlay) ").concat(n,"%)"))},children:[(0,k.jsx)("div",{className:"relative mx-2 my-2",children:(0,k.jsx)("div",{className:(0,A.AK)("absolute -ml-2 -mt-1.5 h-4 w-4 border-2 border-solid bg-text-tb",(0,c.o6)(p,"headRadius"),(0,c.o6)(p,"headBackground"),(0,c.o6)(p,"headBorder")),style:{left:"".concat(f()/o*100,"%")}})}),(0,k.jsx)("input",{className:"absolute -left-2 -right-2 -top-1.5 z-1 cursor-pointer opacity-0",type:"range",value:f(),name:l,min:i,max:o,onChange:function(e){a(parseInt(e.target.value))}})]})})},Va=function(){var e,t=(0,w.$G)().t,n=(0,d.cpB)(),r=n.promptStudioConfig,a=n.promptStudioFormData,o=(0,d.nrG)().setPromptStudioFormData,i=(null===(e=r[a.taskIndex])||void 0===e?void 0:e.fieldsets.lengths)||[];return(0,k.jsx)(Ba,{title:t("length"),children:(0,k.jsxs)("div",{className:(0,A.AK)((0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},"container"),"p-3"),children:[(0,k.jsx)(Ua,{inputName:"length",value:a.lengthIndex,max:i.length-1,onChange:function(e){return o({lengthIndex:e})}}),(0,k.jsx)("div",{className:"mt-aria-5 flex justify-between",children:i.map((function(e,t){return(0,k.jsx)("div",{className:"text-header-m mt-2",children:e.name},t)}))})]})})},za=n(26525),Wa=n.n(za),Xa=n(33238),Ya=function(e){var t=e.message,n=e.onSave,r=(0,w.$G)().t,a=(0,c.oH)().isAriaInTabView,o=(0,l.useState)(!1),i=(0,v.Z)(o,2),s=i[0],d=i[1],u=function(){var e=Wa()((0,Ln.Ku)(t));navigator.clipboard.writeText((0,Ln.Ku)(e)),Fe({context:a?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:"CopyToClipboard"})},f=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u&&u(),d(!0),setTimeout((function(){d(!1)}),1500);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=(0,c.o6)({container:"bg-levels-l5-primary flex flex-row justify-between p-3",radius:"rounded-aria-radius-3",buttonsType:"tertiary",operaAir:{radius:"rounded-aria-radius-5",buttonsType:"primary"}},["radius","container","buttonsType"]);return(0,k.jsxs)("div",{className:(0,A.AK)(p.container,p.radius),children:[(0,k.jsx)(Z.zx,{type:p.buttonsType,onClick:f,className:"h-8 w-8 !p-0",children:(0,k.jsx)(S.S,{color:"var(--text-t1-text-active-icons)",config:s?st:Xa})}),(0,k.jsx)(Z.zx,{type:p.buttonsType,className:"text-button-m h-8",onClick:n,children:r("save_and_return")})]})};const qa=n.p+"assets/f9936c1e145b5c8c70f6.svg",$a=n.p+"assets/0d3198b4dc9e5d627bdc.svg";var Qa=function(e){var t=e.setShowDeleteConfirm,n=(0,w.$G)().t,r=(0,d.cpB)(),a=r.myStyleFormData,o=r.promptStudioFormData,i=r.myStylePersonality,s=r.myStyleDeletePersonalityLoading,l=(0,d.nrG)().setPromptStudioFormData,u=(0,c.oH)().isAriaInTabView,f=(0,c.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,k.jsx)(Ba,{title:n("my_style"),children:(0,k.jsxs)("div",{className:(0,A.AK)("group box-border flex h-14 items-center justify-between gap-2 p-aria-5",f.container),children:[(0,k.jsx)("span",{className:"text-header-m truncate",children:Boolean(i)?a.title?a.title:n("my_style"):n("define_style")}),i?(0,k.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between gap-1 opacity-0 transition group-hover:opacity-100",children:[(0,k.jsx)(Z.hU,{type:"secondary",icon:qa,className:"!h-6 !w-6",onClick:function(){Fe({context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,element:Ne.Y3.MY_STYLE}),location.hash="my-style"}}),(0,k.jsx)(Z.hU,{type:"secondary",icon:$a,className:"!h-6 !w-6",onClick:function(e){e.preventDefault(),t(!0)}})]}),(0,k.jsx)(Xt,{checked:o.myStyle,setChecked:function(){return l({myStyle:!o.myStyle})}})]}):s&&(0,k.jsx)(G.Z,{})||(0,k.jsx)(Z.hU,{border:!0,type:"tertiary",icon:Lt,onClick:function(){return location.hash="my-style"}})]})})};const Ja=function(e){var t=e.onClick,n=void 0===t?function(){return(0,A.Yo)(c.lo)}:t,r=e.message,a=void 0===r?(0,lt.t)("error_occurred_message"):r,o=e.button,i=void 0===o||o,s=e.buttonText,l=void 0===s?(0,lt.t)("go_to_forum"):s,u=(0,d.YZY)().isGx;return(0,k.jsxs)("div",{className:(0,A.AK)(u?"rounded border-classic-gx-no-80 dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-be-vietnam","message border-red flex items-start gap-3 border border-solid p-4"),children:[(0,k.jsx)(I.P,{error:!0,sender:Ne.CI.aria}),(0,k.jsxs)("div",{className:"flex flex-col items-end",children:[(0,k.jsx)("div",{className:"text-sm leading-6",children:a}),i&&(0,k.jsx)("button",{onClick:n,type:"button",className:(0,A.AK)(u?"rounded border-classic-gx-no-80 font-sf-pro dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-mono uppercase transition hover:bg-surface-on-hover-op-60","mt-4 cursor-pointer select-none border border-solid bg-transparent px-3 py-2 text-center text-xs font-bold text-text-t1-text-active-icons outline-none"),children:l})]})]})};var eo=n(88238),to=n(47772);const no=function(){var e=(0,d.fvp)().networkEnvironment,t=(0,d.RCK)().isAccountLessUser,n=(0,w.$G)().t,r=t&&(0,to.dp)(),a=function(){return(0,A.Yo)(c.lo)},o=(0,l.useCallback)((function(){return(0,xa.RB)((0,Se.B9)(ga.FU.EMAIL,e))}),[e]),i=(0,l.useMemo)((function(){return{requestLimitReached:{message:n("chat_daily_limit_reached"),buttonText:n(r?"log_in":"go_to_forum"),onClick:r?o:a},default:{message:n("error_occurred_message"),buttonText:n("go_to_forum"),onClick:a}}}),[r,o,n]),s=(0,l.useCallback)((function(){return i[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]}),[i]);return{getErrorMessage:s}};function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const oo=function(e){var t=e.serverId,n=e.conversationId,r=e.setConversationId,a=(0,w.$G)().t,o=(0,eo.YZ)(),i=(0,c.oH)().isAriaInTabView,s=no().getErrorMessage,u=(0,pt.s0)(),f=(0,c.Su)().loggerService,p=aa(),h=aa(),g=(0,l.useState)(!1),x=(0,v.Z)(g,2),y=x[0],C=x[1],O=(0,l.useState)(),_=(0,v.Z)(O,2),E=_[0],S=_[1],N=(0,l.useState)(null),I=(0,v.Z)(N,2),T=I[0],P=I[1],R=(0,l.useState)(!1),M=(0,v.Z)(R,2),D=M[0],L=M[1],B=(0,l.useState)(!1),H=(0,v.Z)(B,2),K=H[0],F=H[1],U=(0,d.nHi)(),V=U.endpointPromptStudio,z=U.endpointPromptStudioSave,W=(0,d.cpB)(),X=W.promptStudioConfig,Y=W.promptStudioConfigLoading,q=W.promptStudioFormData,$=W.promptStudioOutput,Q=W.myStyleStyles,J=W.myStylePersonality,ee=(0,d.B9q)().newConversationRequest,te=(0,d.nrG)(),ne=te.setPromptStudioFormData,re=te.clearPromptStudioFormDataPartial,ae=te.clearPromptStudioFormDataFull,oe=te.clearMyStyleFormDataFull,ie=te.setPromptStudioOutput,se=te.handleDeleteMyStylePersonality,ce=te.handleLoadMyStylePersonality,le=function(){var e=(0,m.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(null),L(!0),e.abrupt("return",(0,A.Ur)(V,{method:"POST",mode:"cors",credentials:"include",body:t}).then((function(e){S(e)})).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&F(!0)}catch(t){f.error("Error parsing failed"),P(e)}finally{K||P(e)}})).finally((function(){L(!1)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e){var t=e.prompt_params,n=e.query,r=t.task,a=function(e){var t=null!==e?"on":"off",n=Object.values(e||[]).join("").length,r=new Map;return r.set("MyStyle",t),r.set("Length",n),Ue(r)}(J),o=new Map;return o.set("Generate",null),o.set("Task",r),o.set("Description",n.length),o.set("Tone",t.tonality),o.set(a,null),Ue(o)},ue=function(){var e=(0,m.Z)(b().mark((function e(){var a,o,s,l,d,p;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(null),a=$.parent,o=a.conversation_id,s=a.message,l=a.message_id,d=a.title,p=a.user_location,e.t0=A.Ur,e.t1=z,e.t2=ao,e.t3={conversation_id:o},e.next=8,(0,Wn.Fg)();case 8:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={method:"POST",mode:"cors",credentials:"include",body:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t6,"needsAuth","noParse").then(function(){var e=(0,m.Z)(b().mark((function e(a){var f,h,m,v;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:204===a.status&&(f="_new"===n?(0,A.nu)():n,h=p.country_code,m={countryCode:h,sender:0,id:(0,A.F0)(),message:q.description},v={countryCode:h,sender:1,id:(0,A.F0)(),message:s,server_id:l},t?(0,ot.JA)(n,{data:[m,v]}):(0,ot.m7)({id:f,server_id:o,label:null!=d?d:q.description.slice(0,c.wN),isLabelGenerated:!0,data:[m,v],lastMessageTime:String(new Date)}),Fe({context:i?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:"SaveResponse"}),r(f),re(),ie(null),u(-1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&F(!0)}catch(t){f.error("Error parsing failed"),P(e)}finally{K||P(e)}})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){(y||q.description)&&C(!Boolean(q.description.trim()))}),[q.description,y]),(0,l.useEffect)((function(){ce();var e=decodeURIComponent(window.location.hash.replace("#prompt-studio?",""));return e&&ne({description:e}),function(){f.info("PromptStudio component has been unmounted"),ae()}}),[]),(0,l.useEffect)((function(){E&&ie({message:E.message,parent:E})}),[E]);var fe=function(){var e=(0,m.Z)(b().mark((function e(r){var a,o,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),C(!1),q.description){e.next=5;break}return C(!0),e.abrupt("return");case 5:if(null!=$&&$.message&&ie(null),a=X[q.taskIndex],o=a.fieldsets,s={query:q.description.trim(),prompt_params:{task:a.id,length:o.lengths[q.lengthIndex].id,tonality:o.tonalities[q.toneIndex].id,my_style_version:Boolean(J)&&q.myStyle?1:null}},"_new"===n||!t){e.next=19;break}return e.t0=Object,e.t1=s,e.t2=ao,e.t3={conversation_id:t},e.next=16,(0,Wn.Fg)();case 16:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t0.assign.call(e.t0,e.t1,e.t5);case 19:le(s),Fe({context:i?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:de(s)});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){return $?p.onOpenChange(!0):u(-1)},he=(0,ht.W6)(pe);(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&he()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,l.useEffect)((function(){!o&&ee&&he()}),[ee]);var me=(0,l.useMemo)((function(){return s(K?"requestLimitReached":"default")}),[s,K]),ve=(0,c.o6)({outputHeaderInside:!1,outputBackground:"bg-secondary-s4-surface-overlay",operaAir:{outputHeaderInside:!0,outputBackground:"bg-secondary-s2-tertiary-need-to-fix"}},["outputHeaderInside","outputBackground"]);return Y?(0,k.jsx)("div",{className:"grid h-screen place-items-center",children:(0,k.jsx)("div",{className:"loader"})}):(0,k.jsxs)("div",{className:(0,A.AK)("prompt-studio max-w-screen flex h-screen flex-col overflow-y-auto overflow-x-hidden bg-compose-bg text-text-t1-text-active-icons",i&&"tab-view"),children:[(0,k.jsx)(Z.Im,{onBackButtonClick:pe,title:a("compose")}),(0,k.jsx)(ca,{dialogProps:p.dialogProps,message:a("popup_exit_confirm"),confirmMessage:a("exit"),cancelMessage:a("cancel"),onCancel:function(){return p.onOpenChange(!1)},onConfirm:function(){re(),ie(null),u("/"),p.onOpenChange(!1)}}),(0,k.jsx)(ca,{dialogProps:h.dialogProps,message:a("popup_delete_style_confirm"),confirmMessage:a("delete"),cancelMessage:a("cancel"),onCancel:function(){return h.onOpenChange(!1)},onConfirm:function(){se(),oe(),h.onOpenChange(!1)}}),(0,k.jsxs)("div",{className:(0,A.AK)("mx-aria-4 mb-aria-4 mt-aria-6 flex h-full flex-row gap-1 overflow-hidden",i&&"z-1 mx-auto w-tab-view"),children:[(0,k.jsxs)("div",{className:"hover-scrollbar box-border h-full max-h-[calc(100vh-56px)] w-6/12 overflow-y-auto overflow-x-hidden pr-1",children:[(0,k.jsxs)("form",{className:"flex flex-col gap-aria-5",children:[(0,k.jsx)(Za,{}),(0,k.jsx)(Ha,{isFormInvalid:y,isDisabled:K}),(0,k.jsx)(Fa,{}),(0,k.jsx)(Va,{}),Q&&Boolean(Q.length)&&(0,k.jsx)(Qa,{setShowDeleteConfirm:h.onOpenChange})]}),(0,k.jsx)("div",{className:(0,A.AK)("sticky bottom-0 z-1 pt-4"),children:(0,k.jsx)(Z.zx,{type:"primary",onClick:function(e){return fe(e)},size:"m",className:"mt-1 w-full",disabled:D||K||y,children:D?(0,k.jsx)(G.Z,{}):a("generate")})})]}),(0,k.jsx)("div",{className:(0,A.AK)("h-auto w-6/12"),children:(0,k.jsx)("div",{className:(0,A.AK)("flex h-full flex-col"),children:(0,k.jsx)(Ba,{title:ve.outputHeaderInside?"":a("output"),className:"flex-grow",children:(0,k.jsxs)("div",{className:(0,A.AK)("text-body-m relative flex h-full flex-col rounded-aria-radius-3 px-1 pb-3 pt-2",ve.outputBackground),children:[ve.outputHeaderInside&&(0,k.jsx)("div",{className:"text-header-s mb-2 ml-2 mr-1 mt-1 text-text-t3-text-gray",children:a("output")}),(0,k.jsxs)("div",{className:"flex-grow",children:[Boolean(T)&&(0,k.jsx)("div",{className:"ml-2 mr-1 mt-1",children:(0,k.jsx)(Ja,{message:me.message,buttonText:me.buttonText,onClick:me.onClick,button:!!me.buttonText})}),$?!T&&(0,k.jsx)("div",{className:"relative h-full w-full",children:(0,k.jsxs)("div",{className:(0,A.AK)("prompt-studio-output hover-scrollbar absolute h-full w-full","overflow-y-scroll pl-2 pr-1 pt-1"),children:[$&&(0,k.jsx)(j.Z,{message:$.message}),(0,k.jsx)("div",{className:"h-20 w-full"})]})}):!T&&(0,k.jsx)("div",{className:"ml-2 mr-1 mt-1 text-text-t3-text-gray",children:a("waiting_for_the_description")})]}),$&&!T&&(0,k.jsx)("div",{className:"absolute bottom-3 left-3 right-3",children:(0,k.jsx)(Ya,{message:$.parent.message,onSave:function(){return ue()}})})]})})})})]})]})};var io=n(79655);const so=function e(t){var n=t.closeMyStyle,r=t.setIsMyStyleFormDataChanged,a=(0,w.$G)().t,o=(0,d.nrG)().setMyStyleFormData,i=(0,d.cpB)(),s=i.myStyleFormData,u=i.myStylePersonality,f=(0,l.useState)(!1),p=(0,v.Z)(f,2),h=p[0],m=p[1],g=(0,l.useState)(Boolean(u)&&s.title||a("my_style")),x=(0,v.Z)(g,2),b=x[0],y=x[1],j=(0,l.useRef)(null),C=function(e,t){e.preventDefault();var n=e.target.value;switch(t){case"global":o({title:b||a("my_style")});break;case"local":y(n||a("my_style"))}},O=(0,c.o6)({editMode:"",borderColor:"border-secondary-s1-selected-stroke",operaOne:{bgHeader:"bg-levels-l1-chat-bg-bg-elements"},operaGx:{borderColor:"border-image-1-header",editMode:"px-3"},operaAir:{borderColor:"border-transparent"}},["editMode","borderColor","bgHeader"]);return(0,k.jsxs)("div",{className:(0,A.AK)(O.bgHeader,"relative box-border flex h-14 w-full items-center justify-between border-b p-3",O.borderColor),children:[(0,k.jsx)(Z.xE,{onClick:n}),h?(0,k.jsxs)("div",{className:(0,A.AK)("flex w-full flex-row gap-2",O.editMode,"max-w-xs"),children:[(0,k.jsx)(Z.oi,{className:"flex-grow",ref:j,maxLength:20,placeholder:a("my_style"),defaultValue:b,onChange:function(e){C(e,"local"),r(!0)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(C(e,"global"),m(!1))}}),(0,k.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,k.jsx)(D.hU,{dataTestId:(0,A.wE)(e,"span","decline"),type:"secondary",tabIndex:0,icon:M,onClick:function(){y(s.title||a("my_style")),m(!1),r(!1)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(y(s.title||a("my_style")),m(!1))}}),(0,k.jsx)(D.hU,{dataTestId:(0,A.wE)(e,"span","submit"),type:"primary",tabIndex:0,icon:st,onClick:function(e){C(e,"global"),m(!1),r(!Boolean(u))},onKeyUp:function(e){"Enter"===e.key&&0==e.shiftKey&&(C(e,"global"),m(!1))}})]})]}):(0,k.jsx)(ft,{textStyle:"text-subheader-m",isTooltipEnabled:!0,value:b,isAnimated:!1,onClick:function(){m(!0),setTimeout((function(){return j.current.focus()}))}}),(0,k.jsx)("div",{className:"h-4 w-4"})]})};const co=function e(t){var n=t.style,r=t.isFormInvalid,a=t.setIsFormInvalid,o=t.setIsMyStyleFormDataChanged,i=n.id,s=n.label,c=n.placeholder,u=n.value,f=(0,d.nrG)().setMyStyleFormData,p=(0,d.cpB)().myStyleFormData,h=(0,l.useRef)(null),m=(0,l.useRef)(null);return(0,k.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,k.jsx)("div",{className:(0,A.AK)("text-header-s","block"),children:s}),(0,k.jsx)("div",{ref:h,"data-testid":(0,A.wE)(e,"div","sectionContainer"),children:(0,k.jsx)(Z.Kx,{className:(0,A.AK)("h-32"),name:i,id:i,invalid:r,ref:m,testId:(0,A.wE)(e,"textarea","section".concat((0,A.aD)(i))),maxLength:1e3,placeholder:c,defaultValue:u,onInput:function(e){e.preventDefault(),a(!1);var t=e.target.value;o(p[i]!==t),f((0,g.Z)({},i,t))}})})]},i)};var lo=function(e){var t=e.className,n=(0,w.$G)().t,r=(0,pt.s0)(),a=(0,d.nrG)().clearMyStyleFormDataPartial,o=(0,c.o6)({buttonTertiary:{operaGx:"h-8",operaAir:"!bg-secondary-s2-tertiary-need-to-fix"},buttonPrimary:{operaGx:"h-8"}},["buttonTertiary","buttonPrimary"]);return(0,k.jsxs)("div",{className:(0,A.AK)("align-center flex w-full flex-row justify-end gap-2",t),children:[(0,k.jsx)(Z.zx,{className:(0,A.AK)("text-button-s",o.buttonTertiary),type:"tertiary",onClick:function(e){e.preventDefault(),a(),r(-1)},children:n("discard")}),(0,k.jsx)(Z.zx,{className:(0,A.AK)("text-button-s",o.buttonPrimary),type:"primary",children:n("save")})]})};const uo=n.p+"assets/9f4cc0a8a23fb9dd2781.svg",fo=n.p+"assets/2179f0be6a7943d619de.svg",po=n.p+"assets/9322ca2d4aa264e4a765.svg";var ho=function(e){var t=e.position,n=(0,d.YZY)().isGx;return(0,k.jsxs)(k.Fragment,{children:[t===Ke.LEFT&&(0,k.jsx)("div",{className:"fixed ".concat(t," inset-y-1/4"),children:n?(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"237",height:"436",viewBox:"0 0 237 436",fill:"none",children:[(0,k.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63238)",children:(0,k.jsx)("path",{d:"M-49.4573 103.795C-28.5027 103.602 -6.87301 127.821 34.2122 163.727C75.297 199.201 135.837 245.93 132.203 280.707C128.352 315.268 60.3281 337.875 11.9293 330.477C-36.2531 323.295 -64.5943 285.89 -83.201 260.378C-101.808 234.866 -110.248 221.247 -113.506 205.474C-116.548 189.484 -113.975 171.772 -102.333 150.182C-90.9073 128.808 -70.412 103.987 -49.4573 103.795Z",fill:"var(--opera-gx-accent-color)"})}),(0,k.jsx)("defs",{children:(0,k.jsxs)("filter",{id:"filter0_f_3303_63238",x:"-218.399",y:"0.0774078",width:"454.478",height:"435.525",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,k.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,k.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,k.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63238"})]})})]}):(0,k.jsx)("img",{src:uo,alt:"",draggable:"false"})}),t===Ke.BOTTOM_RIGHT&&(0,k.jsx)("div",{className:"fixed ".concat(t),children:n?(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"185",height:"247",viewBox:"0 0 185 247",fill:"none",children:[(0,k.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63237)",children:(0,k.jsx)("path",{d:"M125.785 364.561C110.831 349.88 112.663 317.46 109 263.019C105.033 208.883 95.2676 133.033 122.428 111.011C149.589 89.2961 213.675 121.41 242.667 160.865C271.658 200.014 265.25 246.503 260.367 277.699C255.484 308.896 251.822 324.494 242.972 337.952C233.817 351.409 219.474 362.114 195.975 369.148C172.782 376.183 140.739 379.241 125.785 364.561Z",fill:"var(--opera-gx-accent-color)"})}),(0,k.jsx)("defs",{children:(0,k.jsxs)("filter",{id:"filter0_f_3303_63237",x:"0.280533",y:"0.280533",width:"368.037",height:"478.447",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,k.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,k.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,k.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63237"})]})})]}):(0,k.jsx)("img",{src:po,alt:"",draggable:"false"})}),t===Ke.TOP_RIGHT&&(0,k.jsx)("div",{className:"fixed ".concat(t),children:n?(0,k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"216",height:"212",viewBox:"0 0 216 212",fill:"none",children:[(0,k.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63236)",children:(0,k.jsx)("path",{d:"M221.797 73.8339C228.01 87.3414 217.169 105.035 202.053 107.875C187.022 110.666 167.669 98.5185 155.107 90.4874C142.497 82.3713 136.642 78.5059 133.276 73.6565C129.911 68.8071 129.033 62.9737 122.39 54.0164C115.881 45.0949 103.641 32.9155 103.978 23.8905C104.23 14.9146 117.143 9.04417 129.512 6.54474C141.965 3.99629 153.875 4.81885 160.409 11.2351C166.98 17.5174 168.14 29.5272 180.288 40.1748C192.484 50.9072 215.619 60.1925 221.797 73.8339Z",fill:"var(--opera-gx-accent-color)"})}),(0,k.jsx)("defs",{children:(0,k.jsxs)("filter",{id:"filter0_f_3303_63236",x:"0.253189",y:"-98.5163",width:"327.048",height:"310.517",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,k.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,k.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,k.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63236"})]})})]}):(0,k.jsx)("img",{src:fo,alt:"",draggable:"false"})})]})},mo=function(){return(0,k.jsx)("div",{className:"grid h-screen place-items-center",children:(0,k.jsx)(G.Z,{sizeClass:"h-20 w-20",spinnerColoring:"gray-accent"})})};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xo=function(e){return e.map((function(e){return go(go({},e),{},{value:e.value||""})}))},bo=n(23493),wo=n.n(bo);function yo(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Co=function(){var e=(0,c.oH)().isAriaInTabView,t=(0,eo.YZ)(),n=(0,pt.s0)(),r=(0,w.$G)().t,a=aa(),o=(0,d.YZY)().isOperaOne,i=(0,d.nHi)().endpointMyStyle,s=(0,d.cpB)(),u=s.myStyleFormData,f=s.myStyleStyles,p=s.promptStudioConfigLoading,h=s.myStylePersonality,g=(0,d.B9q)().newConversationRequest,x=(0,d.nrG)(),y=x.setPromptStudioFormData,j=x.clearMyStyleFormDataPartial,C=(0,l.useState)(f?xo(f):[]),O=(0,v.Z)(C,2),_=O[0],E=O[1],S=(0,l.useState)(!1),N=(0,v.Z)(S,2),I=N[0],T=N[1],P=(0,l.useState)(!1),R=(0,v.Z)(P,2),M=R[0],D=R[1],G=(0,l.useState)(!1),L=(0,v.Z)(G,2),B=L[0],Z=L[1],H=(0,l.useState)(!1),K=(0,v.Z)(H,2),F=K[0],U=K[1];(0,l.useEffect)((function(){a.onOpenChange(M||B)}),[a,M,B]);var V=wo()((function(){return n(-1)}),250*c.KP),z=wo()((function(){return n("/")}),250*c.KP);(0,l.useEffect)((function(){setTimeout((function(){E((function(e){var t,n=xo(e),r=yo(n);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=u[a.id]||(null==h?void 0:h[a.id]);o&&(a.value=o)}}catch(e){r.e(e)}finally{r.f()}return n}))}),0)}),[u,h]),(0,l.useEffect)((function(){return window.onbeforeunload=function(){j()},function(){window.onbeforeunload=null}}),[]);var W=function(){var t=new Map;t.set("Save",null),_.forEach((function(e,n){e.value.length&&t.set("q".concat(n+1),e.value.length)})),Fe({context:e?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,element:Ne.Y3.MY_STYLE,str_value:Ue(t)})},X=function(){var e=(0,m.Z)(b().mark((function e(t){var n,r,a,o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!_.every((function(e){return!e.value}))){e.next=4;break}return T(!0),e.abrupt("return");case 4:n={},r=yo(_);try{for(r.s();!(a=r.n()).done;)o=a.value,n[o.id]=o.value}catch(e){r.e(e)}finally{r.f()}return e.prev=7,e.next=10,(0,A.Ur)(i,{method:"PUT",credentials:"include",mode:"cors",body:n});case 10:W(),y({myStyle:!0}),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),e.t0;case 17:V();case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),Y=(0,ht.W6)((function(){return F?Z(!0):z()}));(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&Y()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,l.useEffect)((function(){!t&&g&&Y()}),[g]);var q=(0,l.useCallback)((function(){j(),M&&V(),B&&z(),a.onOpenChange(!1)}),[j,M,V,B,z,a]),$=(0,l.useCallback)((function(){D(!1),Z(!1),a.onOpenChange(!1)}),[]);return!_||p?(0,k.jsx)(mo,{}):(0,k.jsxs)("div",{className:(0,A.AK)("relative box-border flex h-screen justify-center overflow-y-auto bg-compose-bg pb-7 text-text-t1-text-active-icons",e&&"tab-view"),children:[o&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ho,{position:Ke.LEFT}),(0,k.jsx)(ho,{position:Ke.BOTTOM_RIGHT}),(0,k.jsx)(ho,{position:Ke.TOP_RIGHT})]}),_&&(0,k.jsxs)("div",{className:"relative z-1 flex w-full flex-col items-center gap-8",children:[(0,k.jsx)(so,{closeMyStyle:function(){return F?D(!0):V()},setIsMyStyleFormDataChanged:U}),(0,k.jsx)(ca,{dialogProps:a.dialogProps,message:r("popup_exit_confirm"),confirmMessage:r("exit"),cancelMessage:r("cancel"),onCancel:$,onConfirm:q}),(0,k.jsxs)("form",{className:"gap-8",onSubmit:X,children:[(0,k.jsxs)("div",{className:"flex max-w-md flex-col gap-6",children:[(0,k.jsx)("span",{className:(0,A.AK)("text-header-s","text-text-t3-text-gray"),title:r("train_aria_to_write_in_your_own_style"),children:r("train_aria_to_write_in_your_own_style")}),_.map((function(e){return(0,k.jsx)(co,{style:e,isFormInvalid:I,setIsFormInvalid:T,setIsMyStyleFormDataChanged:U},e.id)}))]}),(0,k.jsx)(lo,{className:"mt-8"})]})]})]})},ko=n.p+"assets/d7a6c05a1e25e642f6ab.svg";const Oo=function(){var e=(0,w.$G)().t,t={ariaTheme:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg",operaAir:"bg-levels-l5-primary"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"},wrapperBefore:{operaOne:"before:bg-[--aria-theme-smoke-bg] before:absolute before:inset-0 before:h-full before:w-full",operaGx:"before:bg-aria-theme-smoke-gx before:absolute before:inset-0 before:h-full before:w-full"},wrapperAfter:{operaOne:"after:bg-glow-effect-bottom-shapes after:bg-full-all after:absolute after:inset-0 after:top-[42%] after:h-full after:w-full after:bg-bottom after:bg-no-repeat after:blur-[56px]",operaGx:"",operaAir:""}};return(0,k.jsxs)("div",{id:"oops_view",className:(0,A.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.o6)(t,"wrapper"),(0,c.o6)(t,"wrapperBefore"),(0,c.o6)(t,"wrapperAfter")),children:[(0,k.jsx)("div",{className:(0,A.AK)("aria-theme absolute left-0 top-0 h-full w-full",(0,c.o6)(t,"ariaTheme"))}),(0,k.jsxs)("div",{className:"z-1 mt-60 flex flex-col gap-8 text-text-t1-text-active-icons",children:[(0,k.jsx)("div",{children:(0,k.jsx)("p",{className:"text-header-xxl my-0",children:e("ooops")})}),(0,k.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,k.jsx)("img",{className:"h-8 w-8",src:ko,alt:"error icon"}),(0,k.jsxs)("div",{className:"text-body-l flex w-full flex-col justify-center gap-1",children:[(0,k.jsx)("p",{className:"my-0",children:e("your_ai_chat_got_tired_and_stopped_working")}),(0,k.jsx)("p",{className:"my-0",children:e("please_try_refreshing")})]})]}),(0,k.jsx)("div",{className:"mt-8",children:(0,k.jsx)(D.zx,{onClick:function(){return window.location.reload()},type:"tertiary",children:e("refresh")})})]})]})};function _o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_o(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Eo=function(e){var t=e.width,n=e.height,r=e.flex,a=e.className,o=void 0===a?"":a,i=Ao(Ao(Ao({},t&&{width:t}),n&&{height:n}),r&&{flex:r,minHeight:n}),s=(0,c.o6)({container:"bg-shimmer",operaGx:{container:"bg-shimmer-gx"}},["container"]).container;return(0,k.jsx)("div",{className:(0,A.AK)("animate-placeHolderShimmer rounded-aria-radius-2 bg-shimmer ",o,s),style:i})};var So=function(e){var t=e.isAriaInTabView;return(0,k.jsx)(Hr,{isNewChat:!1,isAriaInTabView:t,disableSidebarClass:!0,children:(0,k.jsxs)("div",{className:"flex h-full flex-col",children:[(0,k.jsx)(Zt,{isBorderLess:!0,children:(0,k.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,k.jsx)(Eo,{height:"32px",width:"32px"}),(0,k.jsx)(Eo,{height:"21px",width:"119px"}),(0,k.jsx)(Eo,{height:"32px",width:"32px"})]})}),(0,k.jsx)("div",{className:(0,A.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",t&&"z-1 m-auto max-w-tab-view px-3","h-full pb-3.5"),children:(0,k.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,k.jsx)("div",{className:"text-header-xxl z-1 select-none px-aria-6 pt-aria-7 text-text-t1-text-active-icons",children:(0,k.jsxs)("div",{className:"flex flex-col gap-aria-4",children:[(0,k.jsx)(Eo,{height:"32px",width:"32px",className:"mb-3"}),(0,k.jsx)(Eo,{height:"47px",width:"162px"}),(0,k.jsx)(Eo,{height:"21px",width:"264px"}),(0,k.jsx)(Eo,{height:"21px",width:"264px"})]})}),(0,k.jsxs)("div",{className:"flex flex-col gap-22",children:[(0,k.jsx)("div",{className:"features-carousel flex h-full flex-col",children:(0,k.jsx)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:(0,k.jsxs)("div",{className:"flex w-full items-center justify-center gap-1 px-3",children:[(0,k.jsx)(Eo,{height:"164px",flex:1}),(0,k.jsx)(Eo,{height:"256px",flex:3}),(0,k.jsx)(Eo,{height:"164px",flex:1})]})})}),(0,k.jsxs)("div",{className:"flex gap-1 px-3",children:[(0,k.jsx)(Eo,{height:"48px",width:"100%"}),(0,k.jsx)(Eo,{height:"48px",width:"24px"})]})]})]})})]})})},No=function(e){var t,n,r,a,o,i,s=e.children,u=e.wrapperStyles,f=e.viewIsReady,p=(0,pt.s0)(),h=(0,c.oH)().isAriaInTabView,m=(0,c.eh)().isPrivateMode,v=(0,d.ljr)().remoteConfig;t=(0,c.$D)().isCurrentBrowserThemeDark,n=(0,ht.L1)().isCurrentThemeDark,r=(0,d.YZY)(),a=r.isGx,o=r.isAir,i=(0,d.Vgz)().setDarkThemeEnabled,(0,l.useEffect)((function(){i(t)}),[a,i,t]),(0,l.useEffect)((function(){null===n?((0,A.Dc)((0,A.$o)(),a,o),i((0,A.$o)())):i(n)}),[i,n,a,o]);var g=void 0!==f&&!f||!v;return(0,l.useEffect)((function(){m&&p({pathname:"/private-mode"})}),[m]),g?(0,k.jsx)(So,{isAriaInTabView:!!h}):(0,k.jsx)("div",{className:u,children:s})},Io=n(76324),To=(0,hr.Z)((function e(t){var n=this;(0,pr.Z)(this,e),(0,g.Z)(this,"handle",(function(e){var t,r;switch(e.data.message.cmd){case"already-logged-in":n.storeCommandsOverrides.handleAuthorizedOnboardingCompleted(e.data.message.email),n.storeCommandsOverrides.authStateChanged({details:{email:e.data.message.email,fullname:e.data.message.fullname,picture:null!==(t=e.data.message.picture)&&void 0!==t?t:"",username:e.data.message.username},productionOnly:!1,status:"loggedIn"}),chrome.runtime.sendMessage({cmd:"use-mock-auth",token:null!==(r=e.data.message.token)&&void 0!==r?r:""});break;case"use-oa-auth":n.storeCommandsOverrides.authStateChanged({details:void 0,productionOnly:!0,status:"notLoggedIn"}),chrome.runtime.sendMessage({cmd:"use-oa-auth"});break;default:n.loggerService.error("Unknown command")}})),this.loggerService=new Io.m({name:"External Command Service",env:(0,A.a)()}),this.storeCommandsOverrides=t}));const Po=function(){var e=(0,w.$G)().t,t=(0,d.YZY)().isGx,n=(0,u.Bh)(),r={ariaTheme:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg",operaAir:"bg-levels-l5-primary"},privateModeAvailability:{operaOne:"text-text-t1-text-active-icons",operaGx:"text-text-t1-text-active-icons",operaAir:"text-text-t2-text-secondary"},productDescription:{operaOne:"mb-aria-7",operaGx:" mb-aria-7",operaAir:"mb-aria-6"},productName:{operaOne:"mt-aria-3 mb-1",operaGx:"mt-aria-3 mb-1",operaAir:"my-aria-3"},switchModeButton:{operaOne:"mt-aria-5 px-aria-4 rounded-aria-radius-3 justify-center",operaGx:"mt-aria-5 rounded min-w-36 !justify-start",operaAir:"mt-aria-6 justify-center px-aria-6"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"},wrapperBefore:{operaOne:"before:bg-[--aria-theme-smoke-bg] before:absolute before:inset-0 before:h-full before:w-full",operaGx:"before:bg-aria-theme-smoke-gx before:absolute before:inset-0 before:h-full before:w-full"},wrapperAfter:{operaOne:"after:bg-glow-effect-bottom-shapes after:bg-full-all after:absolute after:inset-0 after:top-[42%] after:h-full after:w-full after:bg-bottom after:bg-no-repeat after:blur-[56px]",operaGx:"",operaAir:""}},a=(0,c.o6)(r,"switchModeButton");return(0,k.jsxs)("div",{id:"private_mode",className:(0,A.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,c.o6)(r,"wrapper"),(0,c.o6)(r,"wrapperBefore"),(0,c.o6)(r,"wrapperAfter")),children:[(0,k.jsx)("div",{className:(0,A.AK)("aria-theme absolute left-0 top-0 h-full w-full",(0,c.o6)(r,"ariaTheme"))}),(0,k.jsx)("div",{className:"flex basis-64"}),(0,k.jsxs)("div",{className:"z-1 flex flex-col",children:[(0,k.jsx)(Rr,{}),(0,k.jsx)("div",{className:(0,A.AK)("text-header-xxl !uppercase text-text-t1-text-active-icons",(0,c.o6)(r,"productName")),children:e("product_name.opera")}),(0,k.jsx)("div",{className:(0,A.AK)("text-header-xl !uppercase text-text-t1-text-active-icons",(0,c.o6)(r,"productDescription")),children:e("onboarding_description".concat(t?".opera_gx":""))}),(0,k.jsxs)("div",{className:(0,A.AK)("text-body-l",(0,c.o6)(r,"privateModeAvailability")),children:[e("private_mode_availability"),n&&" ".concat(e("private_mode_help"))]}),n&&(0,k.jsx)(D.zx,{className:(0,A.AK)("box-border flex !h-10 w-fit items-center rounded border-none bg-buttons-primary-bg py-aria-3 text-text-tb",a),onClick:function(){(0,u.Vy)(),(0,u.$T)()},type:"primary",children:e("private_mode_button_title")})]})]})};const Ro=function(){var e,t=(0,d.YZY)().isOperaOne,n=(0,d.Uwy)().userCapabilities,r=(0,d.Itl)().fetchedCloudModels,a=(e=(0,c.TL)(),{handleResolveCloudModels:(0,l.useCallback)((function(){e(d.uJR.request())}),[e])}).handleResolveCloudModels,o=!(null==n||!n.has_internal_access);(0,l.useEffect)((function(){t&&o&&0===(null==r?void 0:r.length)&&a()}),[n])},Mo=n.p+"assets/d2997d4288440b6c4c4a.svg",Do=n.p+"assets/6ec825e05b24db6ea6b0.svg",Go=n.p+"assets/404f7a90cd8ce83e30c8.svg",Lo=n.p+"assets/18174ac973928d67db26.svg",Bo=n.p+"assets/e0920cfc21543bd7f9e0.svg",Zo=n.p+"assets/bade451f8a67f35ae0b9.svg",Ho=n.p+"assets/c7bdb33cb7a8acb563b8.svg",Ko=n.p+"assets/75f78366b2f7adaf7d2c.svg",Fo=n.p+"assets/df9cb083733effd6a90b.svg",Uo=n.p+"assets/18737c6250fbbb2f0aaf.svg",Vo=n.p+"assets/740fa2b284e7191e12f9.svg",zo=n.p+"assets/a2ddd971520f0d37145d.svg",Wo=n.p+"assets/c4eb6025e616ec800c00.svg",Xo=n.p+"assets/5887feb6b3dbed3d4328.svg",Yo=n.p+"assets/29f43fb588a968ca6b53.svg",qo=n.p+"assets/76b7a023fed501defe5d.svg",$o=n.p+"assets/057b75a5e4f77e5a3839.svg",Qo=n.p+"assets/6afa4adc6b70aecfe2c3.svg",Jo=n.p+"assets/9832e78460151f4cc193.svg",ei=n.p+"assets/f6a455f040f73a2b2502.svg",ti=n.p+"assets/62469514a6d4066e0f28.svg",ni=n.p+"assets/c501bdd101ca8c0e8327.svg",ri=n.p+"assets/136011a1c5ce576ad4ca.svg",ai=n.p+"assets/1b0293427b3b9017a904.svg";var oi=n(50748);const ii=n.p+"assets/83086224f81da1a81228.svg";var si=n(37435),ci=n(57074);const li=function(e){var t=e.downloading,n=void 0!==t&&t,r=e.modelId,a=e.onClick;return(0,k.jsx)(D.zx,{className:"flex !h-8 w-8 cursor-pointer flex-col items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons duration-200 ease-in-out hover:bg-levels-l2-hover",onClick:function(){null==a||a(r)},type:"secondary",children:(0,k.jsx)(S.S,{config:{operaOne:{dark:n?M:ci,light:n?ii:si}}})})},di=n.p+"assets/24b12ecade0f68153d0d.svg",ui=n.p+"assets/9ecc638ab961ea5f42dc.svg";function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const hi=function(){var e=(0,w.$G)().t,t=(0,c.o6)({operaOne:{light:di,dark:ui}});return(0,k.jsx)(D.u,{placement:"bottom",offsetValue:20,title:e("not_recommended"),delay:c.XT,children:function(e){var n=e.ref,r=e.referenceProps;return(0,k.jsx)("span",pi(pi({className:"flex",ref:n},r),{},{children:(0,k.jsx)("img",{src:t,alt:"",draggable:"false"})}))}})};var mi=n(25108),vi=function(){function e(){(0,pr.Z)(this,e)}return(0,hr.Z)(e,null,[{key:"abortModelPull",value:function(e,t){var n=this.abortControllersPool.get(e);n?n.abort(t):mi.error("Object with key",e,"does not exists")}},{key:"abortAll",value:function(e){this.abortControllersPool.forEach((function(t){t.abort(e)})),this.abortControllersPool.clear()}},{key:"createModelPullAbort",value:function(e){var t=this,n=new AbortController,r=e;return r||(r=crypto.randomUUID()),n.signal.addEventListener("abort",(function(e){var n=e.target.reason;mi.error("ABORT REASON:",n),t.abortControllersPool.delete(r)})),this.abortControllersPool.set(r,n),{id:r,signal:n.signal}}}]),e}();(0,g.Z)(vi,"abortControllersPool",new Map);var gi=n(28721),xi=n(25108);function bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yi=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,c.Su)().loggerService,a=(0,w.$G)().t,o=(0,z.Z)().pushNotification,i=(0,c.oH)().isAriaInTabView,s=(0,l.useState)([]),f=(0,v.Z)(s,2),p=f[0],h=f[1],g=(0,l.useState)(!1),x=(0,v.Z)(g,2),y=x[0],j=x[1],C=(0,l.useState)("NO_ACCELERATION"),O=(0,v.Z)(C,2),_=O[0],E=O[1],S=(0,l.useState)(!1),N=(0,v.Z)(S,2),I=N[0],T=N[1],P=(0,l.useState)(!1),R=(0,v.Z)(P,2),M=R[0],L=R[1],B=(0,l.useState)(""),Z=(0,v.Z)(B,2),H=Z[0],K=Z[1],F=(0,d.J7o)(),U=F.fetchedModels,V=F.localModels,W=F.localModelsServiceStatus,X=(0,d.nHi)().endpointLocalModels,Y=(0,d.Qck)(),q=Y.addModel,$=Y.updateModel,Q=Y.addModelList,J=Y.removeLocalModel,ee=Y.setFetchedModels,te=(0,l.useMemo)((function(){return U.flatMap((function(e){var t=e.tags,n=e.reference_url;return t.map((function(e){return wi(wi({},e),{},{reference_url:n})}))}))}),[U]),ne=(0,l.useMemo)((function(){return te.filter((function(e){return!V.some((function(t){return t.name===e.detailed_name}))}))}),[te,V]),re=(0,c.o6)({downloadAccLibDisclaimer:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadStatus:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadWarning:{operaOne:"font-be-vietnam",operaGx:"font-inter"}},["modelListWrapper","downloadAccLibDisclaimer","downloadStatus","downloadWarning"]),ae=re.downloadAccLibDisclaimer,oe=re.downloadStatus,ie=re.downloadWarning;(0,l.useEffect)((function(){(0,m.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xi.info("Fetching local models list"),e.next=3,(0,A.Ur)(X,{method:"GET"});case 3:t=e.sent,ee(t);case 5:case"end":return e.stop()}}),e)})))()}),[]);var se=(0,l.useCallback)(function(){var e=(0,m.Z)(b().mark((function e(t,n){var a,o,s,l,d,u,f,p,h,m,v,g,x,w;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getReader(),o=new TextDecoder("utf-8"),s=[],l=Date.now(),d={inProgress:null,status:null,timestamp:l,total:null},u=wo()((function(e){$(e)}),c.sh),e.prev=6;case 7:return e.next=10,a.read();case 10:if(f=e.sent,p=f.done,h=f.value,!p){e.next=24;break}return r.info("PULLING MODEL",n.id,"DONE"),(0,He.vH)({action:Ne.VV.MODEL_DOWNLOADED,element:Ne.Y3.AI_SETTING,context:i?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,model:null,str_value:n.id}),e.t0=Q,e.t1=Ot,e.next=20,(0,A._f)();case 20:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.abrupt("break",33);case 24:if(!h){e.next=31;break}if(m=JSON.parse(At(h,s,o)),v=m.status,g=m.completed,x=m.total,!(w=m.error)){e.next=29;break}throw Error(w);case 29:d=wi(wi({},d),{},{error:w,inProgress:g,status:v,timestamp:l,total:x}),u(wi(wi({},n),{},{download:d}));case 31:e.next=7;break;case 33:return e.prev=33,u.flush(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,,33,36]])})));return function(t,n){return e.apply(this,arguments)}}(),[Q,r,$,i]),ce=(0,l.useCallback)((function(e){var t=V.find((function(t){return t.id===e}));if(t)return t;var n=ne.find((function(t){return t.detailed_name===e}));if(n){var r=n.detailed_name,a=n.disk_usage;return{id:e,name:r,size:a}}return{id:e,name:"",size:""}}),[ne,V]),le=(0,l.useCallback)(function(){var e=(0,m.Z)(b().mark((function e(t){var n,i,s,c,l,d,u,f,p,h;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce(t),i=vi.createModelPullAbort(t),(s=i.signal).addEventListener("abort",(function(e){var t,r,a=e.target.reason,o=Error(a);$(wi(wi({},n),{},{download:{timestamp:null!==(t=null===(r=n.download)||void 0===r?void 0:r.timestamp)&&void 0!==t?t:Date.now(),status:null,inProgress:null,total:null,error:o.message||o.name}}))})),e.prev=3,r.info("PULLING MODEL",t,"STARTED..."),d=wi(wi({},n),{},{download:{timestamp:null!==(c=null===(l=n.download)||void 0===l?void 0:l.timestamp)&&void 0!==c?c:null,status:"progress",inProgress:null,total:null}}),V.some((function(e){return e.id===n.id}))?$(d):q(d),e.next=9,oi.Z.pullModel({name:t,stream:!0},s);case 9:if(!(u=e.sent).body){e.next=13;break}return e.next=13,se(u.body,n);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),h=a("chat_error_processing_request"),e.t0 instanceof DOMException&&"AbortError"===e.t0.name||(r.error("PULL MODEL",t,"ERROR",e.t0),vi.abortModelPull(t),o(h,"error")),$(wi(wi({},n),{},{download:{timestamp:null!==(f=null===(p=n.download)||void 0===p?void 0:p.timestamp)&&void 0!==f?f:null,total:null,inProgress:null,status:null,error:h}}));case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[q,ce,V,r,se,a,$]),de=(0,l.useCallback)((function(e){if(e.download){var r=e.size,o=e.download,i=o.error,s=o.inProgress,c=o.status;return i&&"USER_ABORT"!==i?(0,k.jsx)(D.zx,{className:"h-aria-7",type:"secondary",onClick:function(){return le(e.id)},children:a("retry")}):s||!r||c&&"success"!==c&&"writing manifest"!==c?(0,k.jsx)(li,{modelId:e.id,onClick:function(e){vi.abortModelPull(e,"USER_ABORT"),J(e)},downloading:Boolean(c)}):(0,k.jsx)(D.zx,{className:"h-aria-7",type:"secondary",onClick:function(){n(e.name),t(!0)},children:a("delete")})}return(0,k.jsx)(li,{modelId:e.id,onClick:le,downloading:!1})}),[le,J,n,t,a]),ue=(0,l.useCallback)((function(e){var t,n=null!==(t=e.download)&&void 0!==t?t:{},r=n.error,o=n.inProgress,i=void 0===o?"":o,s=n.status,c=n.total;return(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsxs)("div",{className:"flex items-center justify-center",children:[(null==e?void 0:e.isNotRecommended)&&!s&&(0,k.jsx)(hi,{}),s&&"success"!=s&&(0,k.jsxs)("div",{className:"mr-2 flex max-w-[170px] flex-col items-center justify-center gap-2 truncate whitespace-break-spaces break-words text-xxs",children:[(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(G.Z,{spinnerColoring:"gray-accent"}),(0,k.jsx)("p",{className:(0,A.AK)("whitespace-nowrap text-text-t3-text-gray",oe),children:a("downloading",{status:[void 0,0,100].includes(_t(i,c,e.download))?"":new Intl.NumberFormat(navigator.language,{style:"percent"}).format(_t(i,c,e.download)/100)})})]}),r&&"USER_ABORT"!==r&&(0,k.jsx)("p",{className:(0,A.AK)("w-full text-other-warning",ie),children:r})]})]}),de(e)]})}),[oe,ie,de,a]),fe=(0,l.useCallback)((function(e){var t=e.target.value.trim();K(t.toLocaleLowerCase())}),[]),pe=(0,l.useCallback)((0,m.Z)(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,L(!0),r.info("Loading acceleration library"),e.next=5,(0,u.qP)();case 5:if(t=e.sent,r.info("Hardware acceleration library download status:",t),"SUCCESS"!==t){e.next=10;break}return e.next=10,(0,u.f6)();case 10:return e.next=12,(0,u.vy)();case 12:n=e.sent,T(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),r.error("Loading acceleration library error:",e.t0);case 19:return e.prev=19,L(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])}))),[]),he=(0,l.useCallback)((function(){return(0,k.jsx)("span",{className:(0,A.AK)("inline-block w-full text-center font-normal normal-case text-text-t3-text-gray",ae),children:M?(0,k.jsxs)("span",{className:"flex w-full items-center justify-between text-xxs uppercase",children:[a("local_models_hardware_acceleration_lib_downloading",{libraryName:_}),(0,k.jsx)(G.Z,{spinnerColoring:"gray-accent"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("span",{children:a("local_models_hardware_acceleration_lib_suggestion")}),(0,k.jsx)("span",{children:" "}),(0,k.jsx)("button",{onClick:pe,className:"underline",children:a("download_file_button_title")})]})})}),[M,ae,pe,_,a]),me=(0,l.useCallback)((0,m.Z)(b().mark((function e(){var t,n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.VZ)();case 2:return t=e.sent,e.next=5,(0,u.vy)();case 5:return n=e.sent,e.next=8,(0,u.ix)();case 8:r=e.sent,j(t),T(n),E(r);case 12:case"end":return e.stop()}}),e)}))),[]),ve=(0,l.useMemo)((function(){return ne.filter((function(e){var t=e.detailed_name;if(H){var n=H.toLocaleLowerCase();return t.toLocaleLowerCase().indexOf(n)>-1}return!0})).map((function(e){var t=V.find((function(t){return t.id===e.tag}))||{id:e.detailed_name,name:e.detailed_name,size:e.disk_usage,isNotRecommended:e.not_recommended,reference_url:e.reference_url};return{action:ue(t),title:"".concat(t.name," (").concat(t.size,")"),reference_url:t.reference_url,id:(0,gi.Z)()}}))}),[ne,H,V]);(0,l.useEffect)((function(){var e=V.sort(Et).map((function(e){var t,n,r=e.name,a=e.size,o=(null===(t=te.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===t?void 0:t.not_recommended)||!1,i=null===(n=te.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===n?void 0:n.reference_url;return{action:ue(wi(wi({},e),{},{isNotRecommended:o})),title:"".concat(r," (").concat(a,")"),reference_url:i}}));y&&!I&&e.push({title:he()}),h(e)}),[ue,I,y,he,V,te]),(0,l.useEffect)((function(){"UNAVAILABLE"===W&&vi.abortAll(a("chat_error_processing_request"))}),[W]),(0,l.useEffect)((function(){me()}),[me]);var ge=(0,l.useMemo)((function(){return!!p.length}),[p]);return(0,k.jsxs)("div",{className:"flex h-full flex-col gap-aria-6",children:[ge&&(0,k.jsx)(Ni,{collapsible:!0,items:p,title:a("downloaded_local_models_list_title",{localModelsCount:p.length}),maxHeight:Math.min(p.length*c.Dl,4*c.Dl)+c.lV},"downloaded-models"),(0,k.jsx)(Ni,{items:ve,onSearchBarInput:fe,searchBar:!0,searchBarPlaceholder:a("search_local_model_placeholder")},"available-models")]})};var ji=n(66688),Ci=n(39142);const ki=function e(t){var n=t.onInput,r=t.placeholder,a=void 0===r?(0,lt.t)("search"):r;return(0,k.jsx)("div",{children:(0,k.jsx)("input",{"data-testid":(0,A.wE)(e,"input","search"),className:"text-body-l min-h-aria-9 w-full rounded-aria-radius-3 border border-transparent bg-levels-l0-extension-bg p-aria-2 pl-aria-3 text-left text-text-t1-text-active-icons placeholder:text-text-t3-text-gray focus:border-cobalt-blue focus:outline-none",onInput:n,placeholder:a})})},Oi=n.p+"assets/70eba12308e7984fd14b.svg",_i=n.p+"assets/3be6ad1b3df0e5831c59.svg";const Ai=function(e){var t,n,r=e.item,a=e.index,o=e.isLast,i=e.getItemState,s=e.handleItemToggling,c=(0,w.$G)().t,d=r.title,u=r.description,f=void 0===u?"":u,p=r.icon,h=r.reference_url,m=r.onItemClick,v=r.action,g=(0,l.useCallback)((function(){null==m||m(r)}),[r,m]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{role:"button",onClick:g,onKeyDown:g,tabIndex:0,className:(0,A.AK)("flex p-aria-2",m&&"cursor-pointer"),children:(0,k.jsxs)("div",{className:"flex w-full items-center gap-aria-4",children:[p&&(0,k.jsx)("div",{className:"inline-flex h-12 w-12 min-w-[3rem] items-center justify-center rounded-xl bg-extra-content-bg p-1",children:p}),(0,k.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-1 overflow-hidden",children:[(0,k.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:d}),h&&(0,k.jsx)(Wt.h,{className:"text-body-s text-text-t3-text-gray underline",to:h,testName:d.toString(),children:c("terms_of_service")}),Boolean(f)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:(0,A.AK)("text-ellipsis break-words text-xxs text-text-t1-text-active-icons",null!==(t=i(a))&&void 0!==t&&t.isShortened?"max-h-6 truncate whitespace-nowrap":""),children:(0,k.jsx)(j.Z,{message:f.trim(),components:{ul:Ir.Tf}})}),f.length>80&&(0,k.jsx)("div",{role:"button",tabIndex:-1,className:"bold underline",onClick:s(a),onKeyDown:s(a),children:null!==(n=i(a))&&void 0!==n&&n.isShortened?c("show_more"):c("show_less")})]})]}),v]})}),!o&&(0,k.jsx)("div",{className:"my-aria-3 h-px w-full bg-secondary-s1-selected-stroke"})]})};var Ei=(0,l.memo)((function(e){var t=e.data,n=e.index,r=e.style,a=t.items,o=t.handleItemToggling,i=t.getItemState,s=a[n],c=n===a.length-1;return(0,k.jsx)("div",{style:r,children:(0,k.jsx)(Ai,{index:n,item:s,handleItemToggling:o,getItemState:i,isLast:c})})}),ji.wy);Ei.displayName="ModelRowWrapper";const Si=Ei;const Ni=function(e){var t=e.collapsible,n=void 0!==t&&t,r=e.items,a=e.onSearchBarInput,o=e.searchBar,i=void 0!==o&&o,s=e.searchBarPlaceholder,d=e.title,u=void 0===d?"":d,f=e.maxHeight,p=(0,ht.L1)().isCurrentThemeDark,h=(0,l.useState)([]),m=(0,v.Z)(h,2),g=m[0],x=m[1],b=(0,l.useState)(!1),w=(0,v.Z)(b,2),y=w[0],j=w[1],C=(0,l.useCallback)((function(e){var t;return null!==(t=g.find((function(t){return t.index===e})))&&void 0!==t?t:{index:e,isShortened:!0}}),[g]),O=(0,l.useCallback)((function(e){return function(t){var n;t.stopPropagation(),x([{index:e,isShortened:!(null!==(n=C(e))&&void 0!==n&&n.isShortened)}])}}),[C]),_=St(r,O,C),E=(0,c.o6)({modelListWrapper:{operaOne:"rounded-aria-radius-4 font-normal font-mono",operaGx:"rounded-aria-radius-2 font-bold font-inter"}},"modelListWrapper");return(0,k.jsx)("div",{className:(0,A.AK)("border border-secondary-s1-selected-stroke p-aria-3",E,!y&&"flex-1"),style:{maxHeight:f},children:(0,k.jsx)("div",{className:"h-full border border-none border-secondary-s1-selected-stroke",children:(0,k.jsxs)("div",{className:"flex h-full flex-col",children:[!!u&&(0,k.jsxs)("div",{className:"flex h-7 items-center justify-between p-1",children:[function(e){return(0,k.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:e})}(u),n&&(0,k.jsx)("button",{onClick:function(){j((function(e){return!e}))},children:(0,k.jsx)("img",{className:(0,A.AK)("h-4 w-4",y?"rotate-0":"rotate-180"),src:p?Oi:_i,alt:"Chevron bottom icon"})})]}),(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsxs)("div",{className:(0,A.AK)("flex h-full flex-col gap-aria-3",y&&"hidden"),children:[i&&(0,k.jsx)("div",{children:(0,k.jsx)(ki,{onInput:a,placeholder:s})}),(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsx)(Ci.ZP,{children:function(e){var t=e.height,n=e.width;return(0,k.jsx)(ji.S_,{height:t,width:n,itemCount:r.length,itemSize:function(){return c.Dl},itemData:_,children:Si})}})})]})})]})})})};const Ii=function(){var e=(0,w.$G)().t,t=(0,c.Su)().loggerService,n=(0,c.oH)().isAriaInTabView,r=(0,d.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,i=(0,d.C7C)(),s=i.setLocalModels,f=i.setLocalModelsPending,p=(0,d.Qck)().setModel,h=(0,d.C7C)().setLocalModelsChangedByUser,v=(0,l.useCallback)(function(){var e=(0,m.Z)(b().mark((function e(n){var r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,f(!0),!n){e.next=9;break}return e.next=5,(0,u.xM)();case 5:(r=e.sent)&&s(r),e.next=14;break;case 9:return e.next=11,(0,u.Pv)();case 11:e.sent&&s(!1),p("Aria");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),t.error("LOCAL MODELS ENABLE ERROR",e.t0);case 19:return e.prev=19,f(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[t,s,f,p]),g=(0,l.useCallback)((function(e){(0,He.vH)({action:Ne.VV.SETTINGS_CHANGED,element:Ne.Y3.AI_SETTING,context:n?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,model:null,str_value:"local_model:".concat(e?"enabled":"disabled")}),h(!0),v(e)}),[n,v,h]);return(0,k.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3 rounded-aria-radius-4 border border-secondary-s1-selected-stroke p-aria-4",children:[(0,k.jsxs)("div",{className:"flex flex-col gap-aria-3",children:[(0,k.jsx)("p",{className:"text-header-s-bold w-full text-left text-text-t1-text-active-icons",children:e("enable_local_models_toggle_title")}),(0,k.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:e("local_models_legal_disclaimer")})]}),(0,k.jsx)(Xt,{checked:a,disabled:o,setChecked:g})]})},Ti=n.p+"assets/50d25218d5fc38c8c792.svg",Pi=n.p+"assets/ebe5521cb0a5123a75f2.svg";const Ri=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,d.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,i=(0,d.RCK)().isAccountLessMode,s=(0,d.C7C)().setSelectedLocalModel,u=(0,d.HhX)().setAccountlessLoginData,f=(0,d.fvp)().networkEnvironment,p=(0,w.$G)().t,h=(0,c.oH)().isAriaInTabView;(0,l.useEffect)((function(){return function(){return s(null)}}),[s]);var m=(0,l.useMemo)((function(){return!a&&o?(0,k.jsx)("div",{className:"flex w-full flex-col items-center overflow-hidden",children:(0,k.jsx)(S.S,{className:"animate-spin",config:{dark:Pi,light:Ti},size:32})}):a?(0,k.jsx)(yi,{setShowDeleteConfirm:t,setModelNameInPopup:n}):void 0}),[a,o,n,t]),v=(0,l.useCallback)((function(){var e=h?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR;u({context:e,initTime:Date.now(),source:"ai_benchmark"}),(0,He.vH)({action:Ne.VV.CLICK,context:e,element:Ne.Y3.ONBOARDING,str_value:"start:log_in:ai_benchmark"}),(0,xa.RB)((0,Se.B9)(ga.FU.EMAIL,f))}),[h,f,u]);return(0,k.jsxs)("div",{className:(0,A.AK)("flex h-full flex-col gap-aria-6 overflow-hidden",!h&&"px-aria-4"),children:[(0,k.jsx)("div",{children:(0,k.jsxs)("div",{className:(0,A.AK)("flex justify-between gap-aria-3 rounded-xlg border border-secondary-s1-selected-stroke p-aria-4",i?"flex-col items-start":"items-center"),children:[(0,k.jsx)("p",{className:"text-header-s-bold rounded-aria-radius-4 text-text-t1-text-active-icons",children:"AI BENCHMARK"}),i?(0,k.jsx)("div",{className:"text-body-s text-text-gray",children:(0,k.jsx)(w.cC,{i18nKey:p("consent_login_for_free"),components:{link1:(0,k.jsx)("span",{className:"underline",role:"button",tabIndex:-1,onClick:v,onKeyUp:v})}})}):(0,k.jsx)(D.zx,{type:"tertiary",size:"xs",onClick:function(){var e="production"===f?"https://www.devicetest.ai":"https://staging.route53.devicetest.ai";(0,A.Yo)(e)},children:p("go_to_test")})]})}),(0,k.jsx)("div",{children:(0,k.jsx)(Ii,{})}),(0,k.jsx)("div",{className:"flex-1",children:m})]})};var Mi=function(e){var t=e.icon,n=e.toggleConfig,r=e.isLastItem,a=e.testname,o=e.header,i=e.description,s=n.checked,l=n.setChecked,d={iconWrapper:{operaOne:"bg-secondary-s1-selected-stroke border border-secondary-s1-selected-stroke rounded-xl pl-aria-2.5 pt-aria-2.5",operaGx:"rounded-aria-radius-3 bg-secondary-s3-bg-icons pl-[7px] pt-[7px]",operaAir:"rounded-aria-radius-2"},wrapper:{operaGx:"rounded-aria-radius-3 border-image-1-header"}},u=(0,c.o6)(d,"iconWrapper");return(0,k.jsxs)("div",{className:(0,A.AK)("flex justify-between border-secondary-s1-selected-stroke px-aria-4 pb-5 pt-aria-4",(0,c.o6)(d,"wrapper"),r?"":"border-b"),children:[(0,k.jsxs)("div",{className:"flex gap-aria-4",children:[t?(0,k.jsx)("div",{className:(0,A.AK)(u,"box-border h-[51px] w-[51px] min-w-[51px] overflow-hidden border border-secondary-s1-selected-stroke"),children:(0,k.jsx)("img",{src:t,alt:"",className:"w-full rounded-tl-aria-radius-2"})}):(0,k.jsx)("div",{className:"h-aria-9 w-aria-9 min-w-aria-9 rounded-xl bg-secondary-s3-bg-icons"}),(0,k.jsxs)("div",{className:"flex flex-col justify-center gap-aria-2",children:[(0,k.jsx)("p",{className:"text-header-m text-text-t1-text-active-icons",children:o}),(0,k.jsx)("p",{className:"text-body-s pr-10 text-text-t1-text-active-icons",children:i})]})]}),(0,k.jsx)(Xt,{testName:a,checked:s,setChecked:l})]})};function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Li=function e(t){var n=t.conversationId,r=(0,pt.s0)(),a=(0,d.YZY)().isOperaOne,o=(0,w.$G)().t,i=(0,pt.TH)().state,s=(0,z.Z)().pushNotification,u=(0,c.oH)().isAriaInTabView,f=aa(),p=(0,c.o6)({operaOne:{light:Bo,dark:Zo}}),g=(0,c.o6)({operaOne:{light:Go,dark:Lo}}),x=(0,c.o6)({operaOne:{light:Mo,dark:Do}}),j=(0,c.o6)({operaAir:{light:$o,dark:$o},operaOne:{light:ei,dark:ti},operaGx:{light:Qo,dark:Jo}}),C=(0,c.o6)({operaAir:{light:Ho,dark:Ho},operaOne:{light:Uo,dark:Vo},operaGx:{light:Ko,dark:Fo}}),O=(0,c.o6)({operaAir:{light:zo,dark:zo},operaOne:{light:Yo,dark:qo},operaGx:{light:Wo,dark:Xo}}),_=(0,c.o6)({operaAir:{light:ni,dark:ni},operaOne:{light:ri,dark:ai}}),E=(0,d.B9q)().newConversationRequest,S=(0,d.YWL)().isDarkThemeEnabled,N=(0,d.GgQ)().isSiaEnabled,I=(0,d.J0e)().isSourceLinksEnabled,T=(0,d.ljr)().remoteConfig,P=(0,d.J7o)(),R=P.localModelsServiceStatus,M=P.localModels,G=(0,d.Ql$)().appVersion,L=(0,d.pb4)().audience,B=(0,d.fvp)().networkEnvironment,H=(0,d.kq0)().isWritingModeShortcutEnabled,K=(0,d.RCK)().isAccountLessMode,F=(0,d.Qck)(),U=F.addModelList,V=F.updateModel,W=F.removeLocalModel,X=(0,d.Vgz)().setDarkThemeEnabled,Y=(0,d.kgU)().setIsSiaEnabled,q=(0,d.A4D)().setSourceLinksEnabled,$=(0,d.cvs)().setWritingModeShortcutEnabled,Q=(0,d.HhX)().setAccountlessLoginData,J=[{icon:p,name:o("general")}].concat((0,h.Z)((null==L?void 0:L.identifier)===It.$p&&T.local_models?[{icon:g,name:o("local_models")}]:[]),[{icon:x,name:o("feedback")}]),ee=(0,l.useState)((function(){var e=(null==i?void 0:i.initialTab)&&J.find((function(e){return e.name===i.initialTab}));return null!=e?e:J[0]})),te=(0,v.Z)(ee,2),ne=te[0],re=te[1],ae=(0,l.useState)(!1),oe=(0,v.Z)(ae,2),ie=oe[0],se=oe[1],ce=(0,l.useState)(""),le=(0,v.Z)(ce,2),de=le[0],ue=le[1],fe=function(e){return function(){e.name===o("feedback")?(0,A.Yo)(c.lo):re(e)}},pe=(0,l.useCallback)((function(e){(0,He.vH)({action:y.VV.SETTINGS_CHANGED,element:y.Y3.AI_SETTING,context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:e?"theme_switch:enabled":"theme_switch:disabled"}),X(e)}),[u,X]),he=(0,l.useCallback)((function(e){(0,He.vH)({action:y.VV.SETTINGS_CHANGED,element:y.Y3.AI_SETTING,context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:e?"sia:enabled":"sia:disabled"}),Y(e)}),[u,Y]),me=(0,l.useCallback)((function(e){(0,He.vH)({action:y.VV.SETTINGS_CHANGED,element:y.Y3.AI_SETTING,context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:e?"source_links:enabled":"source_links:disabled"}),q(e)}),[u,q]),ve=(0,l.useCallback)((function(e){(0,He.vH)({action:y.VV.SETTINGS_CHANGED,element:y.Y3.AI_SETTING,context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,str_value:e?"writing_mode_shortcut:enabled":"writing_mode_shortcut:disabled"}),$(e)}),[u,$]),ge=(0,l.useCallback)(function(){var e=(0,m.Z)(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=M.find((function(e){return e.name===t})))){e.next=19;break}return r={timestamp:null,status:null,inProgress:null,total:null},V(Gi(Gi({},n),{},{download:r})),e.prev=4,e.next=7,oi.Z.deleteModel(n.id||t);case 7:W(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),s(o("loading_wrong"),"error");case 13:return e.prev=13,ue(""),f.onOpenChange(!1),e.finish(13);case 17:e.next=20;break;case 19:throw new Error("Could not find the model to delete | modelName: ".concat(t,", model ").concat(n));case 20:case"end":return e.stop()}}),e,null,[[4,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[f,M,s,W,o,V]);(0,l.useEffect)((function(){var e=!("selected-content-prompt"===(null==E?void 0:E.message.source));E&&e&&r("/")}),[E,n]),(0,l.useEffect)((function(){se(!0)}),[de]);var xe=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("RUNNING"!==R){e.next=8;break}return e.t0=U,e.t1=Ot,e.next=5,(0,A._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){xe()}),[R]);var be=(0,c.o6)({generalSectionWrapper:{operaOne:"px-aria-4",operaGx:""},mainWrapper:{operaOne:"opera-one bg-levels-l1-chat-bg-bg-elements",operaGx:"gx px-3 bg-levels-l0-extension-bg"},showThemeToggle:{operaOne:!0,operaAir:!1}},["mainWrapper","generalSectionWrapper","showThemeToggle"]),we=[{description:o("theme_description"),header:o("theme"),icon:j,shouldShow:be.showThemeToggle,testname:"theme",toggleConfig:{checked:!!S,setChecked:pe}},{description:o("sia_setting_description"),header:o("google_suggestions"),icon:C,shouldShow:!0,testname:"sia",toggleConfig:{checked:N,setChecked:he}},{description:o("source_links_setting_description"),header:o("source_links"),icon:O,shouldShow:!0,testname:"source_links",toggleConfig:{checked:I,setChecked:me}},{description:o("writing_mode_setting_description"),header:o("writing_mode_shortcut"),icon:_,shouldShow:T.use_writing_mode&&a,testname:"writing_mode",toggleConfig:{checked:H,setChecked:ve}}].filter((function(e){return e.shouldShow})),ye=(0,l.useCallback)((function(){var e=u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR;Q({context:e,initTime:Date.now(),source:"settings"}),(0,He.vH)({action:y.VV.CLICK,context:e,element:y.Y3.ONBOARDING,str_value:"start:log_in:settings"}),(0,xa.RB)((0,Se.B9)(ga.FU.EMAIL,B))}),[B,Q,u]),je=(0,l.useCallback)((function(){ge(de),(0,He.vH)({action:y.VV.MODEL_DELETED,element:y.Y3.AI_SETTING,context:u?Ne.hG.BROWSER_TAB:Ne.hG.SIDEBAR,model:null,str_value:(0,A.zn)(de)}),f.onOpenChange(!1)}),[f,ge,u,de]);return(0,k.jsxs)("div",{className:(0,A.AK)("bg-right-gradient relative flex h-full w-full flex-col text-text-t1-text-active-icons",be.mainWrapper,!u&&"sidebarless:w-full-menu-dependent"),children:[(0,k.jsx)(D.P_,{}),(0,k.jsxs)("div",{children:[(0,k.jsx)(Z.Im,{title:o("settings")}),ie&&""!==de&&(0,k.jsx)(ca,{dialogProps:f.dialogProps,message:o("are_you_sure_you_want_to_delete_model",{model:(0,A.zn)(de)}),confirmMessage:o("delete"),cancelMessage:o("cancel"),onCancel:function(){f.onOpenChange(!1)},onConfirm:je})]}),(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsxs)("div",{className:(0,A.AK)("flex h-full flex-col",u&&"z-1 mx-auto max-w-tab-view px-3"),children:[(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:"pb-aria-9 pt-aria-4",children:(0,k.jsx)("div",{className:"flex flex-row items-center justify-center gap-aria-5",children:J.map((function(e){var t=ne.name===e.name;return(0,k.jsx)(Z.hU,{className:(0,A.AK)("mx-5 !h-8 !w-8",!t&&"border-none"),icon:e.icon,type:t?"secondary":"tertiary",tabIndex:-1,onKeyDown:fe(e),onClick:fe(e),caption:e.name},e.name)}))})})}),ne.name===o("general")&&(0,k.jsxs)("div",{className:be.generalSectionWrapper,children:[(0,k.jsx)("div",{className:(0,A.AK)("flex flex-col gap-aria-3 rounded-aria-radius-4 border border-secondary-s1-selected-stroke p-aria-3"),children:we.map((function(e,t){return(0,k.jsx)(Mi,{icon:e.icon,isLastItem:t===we.length-1,header:e.header,description:e.description,toggleConfig:e.toggleConfig},e.header)}))}),(0,k.jsxs)("div",{className:"text-body-s mt-aria-6 flex flex-col justify-around gap-2 p-aria-4 text-center text-text-t2-text-secondary opacity-80",children:[(0,k.jsx)("span",{children:K?(0,k.jsx)(w.cC,{i18nKey:o("consent_login_for_free"),components:{link1:(0,k.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:ye,onKeyUp:ye})}}):(0,k.jsx)(w.cC,{i18nKey:o("menu_to_log_out"),components:{link1:(0,k.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:function(){return(0,Xr.Wu)()},onKeyUp:function(){return(0,Xr.Wu)()}})}})}),(0,k.jsx)("span",{children:(0,k.jsx)(w.cC,{i18nKey:o("privacy_policy_and_terms_of_service"),components:{link1:(0,k.jsx)(Wt.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/privacy"}),link2:(0,k.jsx)(Wt.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/terms"})}})}),(0,k.jsx)("span",{children:(0,k.jsx)(Wt.h,{className:"uppercase underline",to:c.Fl,children:o("faq")})}),(0,k.jsxs)("span",{"data-testid":(0,A.wE)(e,"span","aria-version"),children:[(0,k.jsx)(w.cC,{i18nKey:o("aria_version",{appVersion:G})}),!(0,A.BB)()&&(0,k.jsxs)("span",{children:["-",(0,A.a)()]}),!(0,A.BB)()&&"production"!==B&&(0,k.jsxs)("span",{children:["-",B.toUpperCase()]})]})]})]}),ne.name===o("local_models")&&(0,k.jsx)("div",{className:"flex-1",children:(0,k.jsx)(Ri,{setShowDeleteConfirm:f.onOpenChange,setModelNameInPopup:ue})})]})})]})};function Bi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bi(Object(n),!0).forEach((function(t){(0,g.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hi=function(){var e,t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();chrome.storage.local.set((0,g.Z)({},"conversationId_timestamp",e))};t();var n=(0,f.Au)().abortMessage,r=(0,f.oH)().isAriaInTabView,a=(0,ht.hq)(),o=a.conversationId,i=a.updateConversationId,s=(0,f.iP)().windowInnerWidth,c=(0,d.nHi)().endpointLocalModels,p=(0,d.coc)().chatContext,x=(0,d.RCK)(),w=x.authStatus,y=x.authUserDetails,j=x.isAccountLessUser,C=(0,d.MII)(),O=C.isLocalModelsEnabled,_=C.isLocalModelsEnabledSetByUser,E=(0,d.J7o)().fetchedModels,S=(0,d.pb4)().audience,N=(0,d.Mel)().conversationId,I=(0,d.ND1)().isAriaPinned,T=(0,d.jA1)().handleAuthorizedOnboardingCompleted,P=(0,d.nrG)().handleLoadPromptStudioConfig,R=(0,d.lUI)().clearReusableHighlights,M=(0,d.HhX)(),D=M.handleAuthFlowRequested,G=M.authStateChanged,L=(0,d.Qck)().setModel,B=(0,d.C7C)().setLocalModels,Z=(0,d.Qck)().setFetchedModels,H=(0,d.pKK)().setCliServerConversationId,K=(0,d.Pt2)().handleAriaPinned,F=(0,l.useState)(Date.now()),U=(0,v.Z)(F,2),V=U[0],z=U[1],W=(0,l.useState)([]),X=(0,v.Z)(W,2),Y=X[0],q=X[1],$=(0,l.useState)(null),Q=(0,v.Z)($,2),J=Q[0],ee=Q[1],te=(0,l.useState)(null),ne=(0,v.Z)(te,2),re=ne[0],ae=ne[1],oe=(0,l.useState)(!1),ie=(0,v.Z)(oe,2),se=ie[0],le=ie[1],de=(0,l.useState)(!1),ue=(0,v.Z)(de,2),fe=ue[0],pe=ue[1],he=(0,l.useRef)(null),me=(0,l.useRef)(o);t(),(0,f.T5)(r?"tab-view":"sidebar"),Ro(),(0,f.G0)();var ve=function(){var e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.xM)().then((function(e){e&&!E.length&&(0,m.Z)(b().mark((function e(){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,A.Ur)(c,{method:"GET"});case 2:t=e.sent,Z(t);case 4:case"end":return e.stop()}}),e)})))()})).catch((function(e){B(e),L("Aria")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=(0,m.Z)(b().mark((function e(t){var n,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.timestamp,(r=new Date).setHours(0,0,0,0),!("number"==typeof n&&n<r.getTime())){e.next=7;break}return e.next=6,(0,ot.tK)(It.CZ,{});case 6:t={};case 7:ae(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){chrome.storage.local.get((function(e){var t=e[It.Fl]?e[It.Fl]:[];p.working||(t=(0,A.mX)(t));var n=t,r=(0,v.Z)(n,1)[0];if(r&&j){var a=r.id,o=r.lastMessageTime,i=new Date(o).getTime();Date.now()-i>=ce.s0&&(0,ot.fV)(a)}q((0,h.Z)(t));var s=e[It.CZ]||{};ge(Zi({},s))}))},be=function(){z(Date.now()),i(ce.$M),L("Aria")},we=(0,l.useCallback)((function(){var e,t=null===(e=Y.find((function(e){return e.id===me.current})))||void 0===e?void 0:e.server_id;(0,ot.SJ)(me.current,t),H("")}),[Y,H]);(0,l.useEffect)((function(){void 0!==r&&o&&pe(!0)}),[Y.length,o,r]),(0,l.useEffect)((function(){D({openAuthWhenUnauthorized:!1,forceAuthorization:!0}),P(),!O&&!_&&"localModelsPrivate"in opr&&(null==S?void 0:S.identifier)===It.$p&&(B(!0),ve()),O&&ve()}),[]),(0,l.useEffect)((function(){if("loggedIn"===w&&void 0!==y){var e=y.email;he.current!==e&&(le(!1),(0,It.Re)(e),(0,It.UK)(e),xe())}else(0,It.Re)("anonymous"),(0,It.UK)("anonymous"),xe();"notLoggedIn"!==w||y||R()}),[y,w]),(0,l.useEffect)((function(){var e,t=function(){var e=(0,m.Z)(b().mark((function e(t,n,r){var a,o,s,c,l;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.zT)();case 2:return a=e.sent,e.next=5,opr.browserSidebarPrivate.getWindowId.asPromise();case 5:return o=e.sent,e.t0=parseInt,e.next=9,new Promise((function(e){return chrome.storage.local.get(["conversationId_timestamp"],(function(t){return e(t.conversationId_timestamp)}))}));case 9:e.t1=e.sent,s=(0,e.t0)(e.t1),c=a!==I,o===r&&(l=Date.now(),n?!c&&null!==J&&l-J>It.f4&&(!s||l-s>It.f4)&&i(ce.$M):ee(l)),K(a);case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[ee,J,i,I,K]),(0,l.useEffect)((function(){var e=function(){var e=(0,m.Z)(b().mark((function e(t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();p.working&&me.current!==ce.$M&&me.current!==o&&e(o),j&&me.current!==ce.$M&&me.current!==o&&we(),me.current=o}),[o,p,n]),(0,l.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,v.Z)(r[n],1)[0];"local"===t&&(a===It.Fl?q((0,h.Z)(e[a].newValue||[])):a===It.CZ&&ge(Zi({},e[a].newValue||{})))}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[q]),(0,l.useEffect)((function(){function e(){return(e=(0,m.Z)(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=K,e.next=3,(0,u.zT)();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,l.useEffect)((function(){if(N!==ce.$M){var e=Y.some((function(e){return e.id===N}));!r&&e&&(i(N),Oe.navigate("/"))}}),[N,Y]),(0,l.useEffect)((function(){r?(document.body.classList.add("tab-view"),document.body.classList.remove("sidepanel-view")):(document.body.classList.remove("tab-view"),document.body.classList.add("sidepanel-view"))}),[r]),window.addEventListener("message",(function(e){e.source==window&&e.data&&"FROM_SELENIUM"===e.data.type&&new To({authStateChanged:G,handleAuthorizedOnboardingCompleted:T}).handle(e)}),!1);var ye=!r&&s>=ce.Qx,je=(0,f.o6)({wrapperStyles:{operaOne:"opera-one bg-levels-l5-primary",operaGx:"gx bg-levels-l1-chat-bg-bg-elements"}},["wrapperStyles"]),Ce=(0,A.AK)("flex h-full",je.wrapperStyles,r?"tab-view":ye?"sidebar-view":"sidebar-view gap-x-0.5");(0,f.Xp)(ce.gi.WELCOME_PAGE_START_NEW_CHAT,(function(){"#"!==location.href&&(location.href="#"),be()}));var ke=(0,k.jsxs)(No,{wrapperStyles:Ce,viewIsReady:fe,children:[(0,k.jsx)(Ra,{conversationsData:Y,conversationId:o,setConversationId:i,setMenuStatus:le,menuStatus:se,addNewChat:be}),(0,k.jsx)(zr,{conversation:Y.find((function(e){return e.id===o}))||{id:o,label:"",data:[],server_id:"",lastMessageTime:""},conversationId:o,conversationSource:r?"tab-view":"sidebar",setConversationId:i,createTimestamp:V,menuStatus:se,setMenuStatus:le,addNewChat:be,chatWarning:re})]}),Oe=(0,io.cP)([{path:"/",element:ke,errorElement:(0,k.jsx)(Oo,{})},{path:"/:conversationId",element:ke,errorElement:(0,k.jsx)(Oo,{})},{path:"/settings",element:(0,k.jsxs)(No,{wrapperStyles:Ce,children:[(0,k.jsx)(Ra,{conversationsData:Y,conversationId:o,setConversationId:i,setMenuStatus:le,menuStatus:se,addNewChat:be}),(0,k.jsx)(Li,{conversationId:o})]}),errorElement:(0,k.jsx)(Oo,{})},{path:"/prompt-studio",element:(0,k.jsx)(No,{children:(0,k.jsx)(oo,{chatWarning:re,conversationId:o,setConversationId:i,serverId:null===(e=Y.find((function(e){return e.id===o})))||void 0===e?void 0:e.server_id})}),errorElement:(0,k.jsx)(Oo,{})},{path:"/my-style",element:(0,k.jsx)(No,{children:(0,k.jsx)(Co,{})}),errorElement:(0,k.jsx)(Oo,{})},{path:"/private-mode",element:(0,k.jsx)(Po,{})},{path:"*",element:(0,k.jsx)(Oo,{})}]);return(0,k.jsx)(io.pG,{fallbackElement:(0,k.jsx)(mo,{}),router:Oe})};(0,n(77031).j)("chat");var Ki=document.getElementById("root");document.body.parentNode&&Ki&&(0,s.s)(Ki).render((0,k.jsx)(c.fC,{children:(0,k.jsx)(p,{children:(0,k.jsx)(Hi,{})})}))},18540:(e,t,n)=>{var r;n.d(t,{$M:()=>s,Ch:()=>c,J9:()=>l,SG:()=>o,V5:()=>u,VW:()=>i,ht:()=>d,re:()=>a});var a="ariaActiveSidebarConversation",o="Aria",i="AriaVoiceData",s="_new",c=["organize_tabs","rich_response"],l=["organize_tabs","rich_response"],d={"command-line":["rich_response"],"selected-content-prompt":["rich_response"]},u=new RegExp(/mac/).test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase())},68209:(e,t,n)=>{n.d(t,{$:()=>a,D:()=>r});var r={TEXT:"text",IMAGE_GENERATION:"image"},a={ANTHROPIC:"anthropic",GOOGLE:"google",OPENAI:"openai",AI_CLUSTER:"ai_cluster"}},57717:(e,t,n)=>{n.d(t,{B7:()=>r,CX:()=>o,Dv:()=>i,Fz:()=>s,dl:()=>a});var r=200,a=8,o=8,i=["message-temporary"],s=720},55989:(e,t,n)=>{n.d(t,{p:()=>r});var r="aria_image"},50198:(e,t,n)=>{n.d(t,{$M:()=>r.$M,$Y:()=>x.$Y,B7:()=>l.B7,CX:()=>l.CX,Ch:()=>r.Ch,Cr:()=>w.Cr,DH:()=>x.DH,Dl:()=>x.Dl,Dv:()=>l.Dv,FU:()=>a.FU,Fb:()=>u.Fb,Fk:()=>p.Fk,Fl:()=>b.F,Fz:()=>l.Fz,Gc:()=>p.Gc,Go:()=>w.Go,J9:()=>r.J9,JH:()=>w.JH,KP:()=>g.KP,Lz:()=>p.Lz,MP:()=>i.M,Qc:()=>w.Qc,Qx:()=>i.Q,SG:()=>r.SG,Ud:()=>u.Ud,V4:()=>w.V4,V5:()=>r.V5,V6:()=>u.V6,VW:()=>r.VW,XT:()=>x.XT,Y9:()=>p.Y9,YE:()=>x.YE,YF:()=>w.YF,YO:()=>x.YO,Zv:()=>y.Z,_U:()=>h._U,_e:()=>x._e,a8:()=>v.a8,aK:()=>o.a,ao:()=>m.ao,b$:()=>c.b,bC:()=>p.bC,bX:()=>x.bX,bb:()=>w.bb,dl:()=>l.dl,eF:()=>v.eF,gi:()=>f.gi,gp:()=>x.gp,ht:()=>r.ht,jn:()=>w.jn,jv:()=>v.jv,kr:()=>g.kr,lV:()=>x.lV,lo:()=>b.l,mh:()=>p.mh,n4:()=>m.n4,pj:()=>d.p,re:()=>r.re,s0:()=>u.s0,sh:()=>g.sh,t5:()=>s.t,tX:()=>u.tX,tZ:()=>w.tZ,uj:()=>x.Uo,un:()=>x.un,v5:()=>w.v5,vH:()=>w.vH,vR:()=>x.vR,wN:()=>u.wN,x4:()=>g.x4,yo:()=>w.yo});var r=n(18540),a=n(13771),o=n(53533),i=n(97358),s=n(27715),c=n(57214),l=(n(50143),n(57717)),d=n(55989),u=n(31622),f=n(14473),p=n(29033),h=n(17125),m=n(65517),v=n(96995),g=(n(83065),n(56336)),x=n(53706),b=n(5407),w=n(91904),y=n(55550)},31622:(e,t,n)=>{n.d(t,{Eg:()=>d,Fb:()=>o,Ud:()=>c,V6:()=>s,s0:()=>l,tX:()=>a,wN:()=>i});var r=n(56336),a=6e3,o=1,i=64,s=a-300,c=(r.EB,30),l=48*r.kr,d=1024},53706:(e,t,n)=>{n.d(t,{$Y:()=>f,DH:()=>a,Dl:()=>m,Uo:()=>u,XT:()=>d,YE:()=>s,YO:()=>c,_e:()=>h,bX:()=>o,gp:()=>l,lV:()=>v,un:()=>i,vR:()=>p});var r=n(56336),a=r.sh,o=48,i=50,s=6*r.sh,c=-12,l=64,d=250,u=40,f=200,p="Command+/",h="Ctrl+/",m=56,v=46},5407:(e,t,n)=>{n.d(t,{F:()=>r,l:()=>a});var r="https://help.opera.com/en/browser-ai-faq",a="https://forums.opera.com/category/61/opera-browser-ai"},68279:(e,t,n)=>{n.d(t,{Au:()=>a.A,Cg:()=>s.C,FL:()=>l.F,G0:()=>c.G,GC:()=>m.G,Gt:()=>w.G,Su:()=>h.S,T4:()=>v.T,T5:()=>o.T,XI:()=>d.X,Xp:()=>f.X,a:()=>w.a,eh:()=>u.e,fg:()=>i.f,iP:()=>x.i,o6:()=>g.o,oH:()=>r.Z,rf:()=>b.r,u:()=>p.u});var r=n(95579),a=(n(38824),n(32045)),o=n(66330),i=n(42965),s=n(17059),c=n(7066),l=n(83470),d=n(21044),u=(n(2065),n(5355)),f=n(59830),p=n(91906),h=n(82503),m=n(69332),v=n(53576),g=(n(34928),n(7332)),x=n(32888),b=n(48469),w=n(25370)},32045:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(15861),a=n(64687),o=n.n(a),i=n(60243),s=n(4916),c=n(76756),l=n(23586),d=n(67294),u=function(){var e=(0,c.Su)().loggerService,t=(0,l.aGe)().clearChatContext,n=(0,l.coc)().chatContext,a=(0,l.RCK)().authUserDetails,u=(0,d.useCallback)((function(t){return new Promise((function(n){var c=0,l=setInterval((0,r.Z)(o().mark((function r(){var d,u,f,p;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d=function(){e.infoColor("abortMessage -> ensureAbortCompletion -> DONE","tomato"),clearInterval(l),n()},i.Fl){r.next=8;break}if(!(u=(null!=a?a:{}).email)){r.next=7;break}(0,i.Re)(u),r.next=8;break;case 7:return r.abrupt("return",d());case 8:return r.next=10,(0,s.hV)(t);case 10:if((f=r.sent)&&null!=f&&f.data){r.next=13;break}return r.abrupt("return",d());case 13:if(p=Boolean(f.data.at(-1).aborted),e.infoColor("abortMessage -> ensureAbortCompletion","tomato","isLastMessageAborted: ".concat(p),f),!p){r.next=17;break}return r.abrupt("return",d());case 17:++c>=20&&(c=0,e.infoColor("abortMessage -> ensureAbortCompletion timeout - ABANDON","red"),clearInterval(l));case 19:case"end":return r.stop()}}),r)}))),50)}))}),[a,e]),f=(0,d.useCallback)((0,r.Z)(o().mark((function r(){var a,i=arguments;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i.length>0&&void 0!==i[0]?i[0]:"conversationId not provided for the log",e.infoColor("abortMessage","tomato",a,n),t(!0),r.next=5,u(a);case 5:case"end":return r.stop()}}),r)}))),[n,t,e,u]);return{abortMessage:f}}},66330:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(67294),a=n(23586),o=n(82503),i=function(e){var t=(0,o.S)().ariaVoiceReaderService,n=(0,a.dQQ)().setAriaVoiceState;(0,r.useEffect)((function(){function r(t){var r=t.detail.messageId;n({isPlaying:!0,messageId:void 0===r?null:r,source:e})}function a(){n({isPlaying:!1,messageId:null,source:""})}return t.addListener("readstart",r),t.addListener("readstop",a),function(){t.removeListener("readstart",r),t.removeListener("readstop",a)}}),[])}},96531:(e,t,n)=>{n.d(t,{KH:()=>S,OP:()=>y,Pn:()=>O,fD:()=>k,gk:()=>A,k9:()=>j,l0:()=>N,q$:()=>E,qN:()=>C,sS:()=>_,zj:()=>w});var r=n(4942),a=n(93324),o=n(15861),i=n(64687),s=n.n(i),c=n(28721),l=n(92612),d=n(76324),u=n(76756),f=n(38856),p=n(50198),h=n(25108),m="http://localhost/",v="base64-image/",g=new d.m({env:(0,f.a)(),name:"File Upload utils"}),x=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("ImageCache");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.Z)(s().mark((function e(t,n){var r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return r=e.sent,a=new Request(m+v+t,{}),o=new Response(n,{headers:{"Content-Type":"text/plain"}}),e.next=7,r.put(a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,r=new Request(m+v+t),e.next=6,n.match(r);case 6:if(!(a=e.sent)){e.next=13;break}return e.next=10,a.text();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,Promise.all(t.map(function(){var e=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t.image_id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n.filter((function(e){return Boolean(e)})).map((function(e){return null==e?void 0:e.split("base64,")[1]})));case 9:return e.prev=9,e.t0=e.catch(2),h.error("Error fetching images from CacheStorage:",e.t0),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=e.sent,r=new Request(m+v+t),e.next=6,n.delete(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t=e.sent,e.next=5,t.keys();case 5:null!=(n=e.sent)&&n.length&&n.forEach((function(e){return t.delete(e)}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))},O=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t);case 3:return n=e.sent,r=(0,c.Z)(),e.next=7,b(r,n);case 7:return e.abrupt("return",{image_id:r,file:t});case 10:throw e.prev=10,e.t0=e.catch(0),h.error("Error during save image to CacheStorage",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),_=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(l.vW));return parseFloat((e/Math.pow(l.vW,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},A=function(e,t){var n;if(!e.startsWith("data:")&&!e.startsWith("http"))return g.error("Invalid data URL"),null;var o=e.split(","),i=(0,a.Z)(o,2),s=i[0],c=i[1],l=s.match(/:(.*?);/);if(!l)return g.error("Unable to extract MIME type"),null;for(var d=l[1],u=atob(c),f=new Uint8Array(u.length),h=0;h<u.length;h++)f[h]=u.charCodeAt(h);var m=null!==(n=function(e){var t;if(!e.startsWith("data:"))return g.error("Invalid data URL"),null;var n=e.split(","),o=(0,a.Z)(n,1)[0].match(/:(.*?);/);if(!o)return g.error("Unable to extract MIME type"),null;var i=o[1],s=(t={},(0,r.Z)(t,"image/png",".png"),(0,r.Z)(t,"image/jpeg",".jpeg"),(0,r.Z)(t,"image/jpg",".jpg"),(0,r.Z)(t,"image/gif",".gif"),(0,r.Z)(t,"image/webp",".webp"),t);if(!(i in s))return g.error("Unsupported MIME type:",i),null;var c=(new Date).getTime();return"".concat(p.pj,"_").concat(c).concat(s[i])}(e))&&void 0!==n?n:"";return new File([f],t||m,{type:d})},E=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.startsWith("http")){e.next=3;break}return g.error("Invalid data src URL"),e.abrupt("return",null);case 3:return e.next=5,fetch(t);case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("Failed to fetch image");case 8:return e.next=10,n.blob();case 10:return r=e.sent,a=(new Date).getTime(),o=r.type.split("/")[1],i="".concat(p.pj,"_").concat(a,".").concat(o),e.abrupt("return",new File([r],i,{type:r.type}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e){var t;return p.v5.includes(u.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))},N=function(e){var t;return!p.v5.includes(u.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))}},95579:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(93324),a=n(67294),o=n(53979);function i(){var e=(0,a.useState)(),t=(0,r.Z)(e,2),n=t[0],i=t[1],s=(0,a.useState)(void 0),c=(0,r.Z)(s,2),l=c[0],d=c[1];return(0,a.useEffect)((function(){(0,o.nU)((function(e){i(e);var t=(e||{windowId:chrome.tabs.TAB_ID_NONE}).windowId;d(t>chrome.tabs.TAB_ID_NONE)}))}),[]),{currentTab:n,isAriaInTabView:l}}},76756:(e,t,n)=>{n.d(t,{$D:()=>i.$D,$M:()=>s.$M,$Y:()=>s.$Y,Au:()=>o.Au,B7:()=>s.B7,Bz:()=>r.Bz,CX:()=>s.CX,Cg:()=>o.Cg,Dl:()=>s.Dl,Dv:()=>s.Dv,FL:()=>o.FL,Fb:()=>s.Fb,Fk:()=>s.Fk,Fl:()=>s.Fl,Fz:()=>s.Fz,Gc:()=>s.Gc,Go:()=>s.Go,HA:()=>r.HA,JH:()=>s.JH,KP:()=>s.KP,Lz:()=>i.Lz,Qc:()=>s.Qc,Qx:()=>s.Qx,SG:()=>s.SG,Su:()=>o.Su,T4:()=>o.T4,TL:()=>r.TL,Ud:()=>s.Ud,V4:()=>s.V4,V5:()=>s.V5,V6:()=>s.V6,VW:()=>s.VW,XI:()=>o.XI,XT:()=>s.XT,Xp:()=>o.Xp,YE:()=>s.YE,YF:()=>s.YF,_U:()=>s._U,_e:()=>s._e,aK:()=>s.aK,ao:()=>s.ao,b$:()=>s.b$,bC:()=>s.bC,bb:()=>s.bb,dl:()=>s.dl,eh:()=>o.eh,fC:()=>c.f,fg:()=>o.fg,gi:()=>s.gi,iP:()=>o.iP,ix:()=>r.ix,jn:()=>s.jn,kr:()=>s.kr,lV:()=>s.lV,lo:()=>s.lo,mQ:()=>a.mQ,n4:()=>s.n4,nS:()=>a.nS,o6:()=>o.o6,oH:()=>o.oH,re:()=>s.re,rf:()=>o.rf,rg:()=>o.a,sh:()=>s.sh,t5:()=>s.t5,tX:()=>s.tX,tZ:()=>s.tZ,u:()=>o.u,uj:()=>s.uj,uk:()=>s.Lz,v5:()=>s.v5,vR:()=>s.vR,vz:()=>r.vz,wN:()=>s.wN,x4:()=>s.x4});var r=n(45477),a=n(57406),o=n(68279),i=n(38185),s=n(50198),c=n(870)},32461:(e,t,n)=>{n.d(t,{FL:()=>s.F,FQ:()=>o.F,Q:()=>c.Q,fv:()=>r.f,lj:()=>i.l,nH:()=>a.n});var r=n(89758),a=n(38860),o=n(12887),i=n(65688),s=n(5206),c=n(87921)},65688:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(76756),a=n(58606),o=function(){return{remoteConfig:(0,r.ix)(a.I1),remoteConfigLoading:(0,r.ix)(a.IH),remoteConfigOverride:(0,r.ix)(a.lE)}}},59565:(e,t,n)=>{n.d(t,{FL:()=>o.FL,FQ:()=>o.FQ,I1:()=>i.I1,Ir:()=>i.Ir,Q:()=>o.Q,Tu:()=>r.T,cq:()=>a.cq,fv:()=>o.fv,gZ:()=>i.gZ,lj:()=>o.lj,nH:()=>o.nH});var r=n(76808),a=n(97909),o=n(32461),i=n(58606)},52452:(e,t,n)=>{n.d(t,{A4:()=>o.A4,C7:()=>o.C7,Dy:()=>s.D,FL:()=>a.FL,FQ:()=>a.FQ,Gs:()=>i.Gs,Hk:()=>i.Hk,I1:()=>a.I1,Ir:()=>a.Ir,J0:()=>o.J0,MI:()=>o.MI,ND:()=>i.ND,Os:()=>i.Os,Pt:()=>i.Pt,Q:()=>a.Q,Qk:()=>i.Qk,Ql:()=>r.Ql,S6:()=>i.S6,VG:()=>i.VG,Vg:()=>o.Vg,XV:()=>r.XV,YW:()=>o.YW,YZ:()=>r.YZ,_g:()=>r._g,cq:()=>a.cq,cv:()=>o.cv,ek:()=>i.ek,fv:()=>a.fv,gZ:()=>a.gZ,hN:()=>r.hN,iB:()=>r.iB,jA:()=>i.jA,jN:()=>i.jN,kq:()=>o.kq,lj:()=>a.lj,ln:()=>i.ln,nH:()=>a.nH,oi:()=>i.oi,pb:()=>r.pb,qe:()=>r.qe,sn:()=>i.sn});var r=n(23269),a=n(59565),o=n(68988),i=n(26808),s=n(84543)},75334:(e,t,n)=>{n.d(t,{Hk:()=>i,Os:()=>c,Qk:()=>s,S6:()=>a,ln:()=>o});var r=n(91757),a=(0,r.createAction)("ARIA_OPENED")(),o=(0,r.createAction)("ARIA_PINNED")(),i=(0,r.createAction)("UPGRADE_BANNER_SEEN_IN_SIDEBAR")(),s=(0,r.createAction)("UPGRADE_BANNER_SEEN_ONCE")(),c=(0,r.createAction)("ONBOARDING_COMPLETED")()},45293:(e,t,n)=>{n.d(t,{Gs:()=>r.G,ND:()=>i.N,Pt:()=>o.P,ek:()=>s.e,jA:()=>a.j,oi:()=>c.o});var r=n(28400),a=n(40946),o=n(99563),i=n(26237),s=n(45147),c=n(8685)},8685:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)();return{handleUpgradeBannerSeenInSidebar:(0,a.useCallback)((function(t){e((0,o.HkR)(t))}),[e]),handleUpgradeBannerSeenOnce:(0,a.useCallback)((function(){e((0,o.Qkn)())}),[e])}}},45147:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(76756),a=n(47696),o=function(){return{upgradeBannerSeenInSidebar:(0,r.ix)(a.jV),upgradeBannerSeenOnce:(0,r.ix)(a.FY)}}},28400:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(76756),a=n(47696),o=function(e){var t=e.userIdentity;return{authorizedOnboardingCompletedOnce:(0,r.ix)((0,a.sn)(t))}}},26808:(e,t,n)=>{n.d(t,{Gs:()=>a.Gs,Hk:()=>i.Hk,ND:()=>a.ND,Os:()=>i.Os,Pt:()=>a.Pt,Qk:()=>i.Qk,S6:()=>i.S6,VG:()=>o.VG,ek:()=>a.ek,jA:()=>a.jA,jN:()=>o.jN,ln:()=>i.ln,oi:()=>a.oi,qd:()=>r.q,sn:()=>o.sn});var r=n(27976),a=n(45293),o=n(47696),i=n(75334)},47696:(e,t,n)=>{n.d(t,{FY:()=>c,VG:()=>o,jN:()=>i,jV:()=>s,sn:()=>a});var r=(0,n(76756).Bz)("ariaAppInteractions"),a=function(e){return function(t){return!!e&&Boolean(function(e){return r(e).authorizedOnboardingCompletedOnce}(t)[e])}},o=function(e){return r(e).isAriaMounted},i=function(e){return r(e).isAriaPinned},s=function(e){return r(e).upgradeBannerSeenInSidebar},c=function(e){return r(e).upgradeBannerSeenOnceOnCli}},98690:(e,t,n)=>{n.d(t,{Q:()=>o});var r=n(76756),a=n(33638),o=function(){return{appVersion:(0,r.ix)(a.q$)}}},95796:(e,t,n)=>{n.d(t,{_:()=>s});var r=n(76756),a=n(67294),o=n(33638),i=n(30093),s=function(){var e=(0,r.ix)(o.qe),t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,i.Vv)(e))}),[t]);return{contextType:e,setContextType:n}}},33019:(e,t,n)=>{n.d(t,{A4:()=>s.A,C7:()=>i.C,J0:()=>c.J,MI:()=>o.M,Vg:()=>d.V,YW:()=>l.Y,cv:()=>r.c,kq:()=>a.k});var r=n(8087),a=n(22760),o=n(19920),i=n(24578),s=n(2080),c=n(76437),l=n(74912),d=n(80943)},76437:(e,t,n)=>{n.d(t,{J:()=>o});var r=n(76756),a=n(20851),o=function(){return{isSourceLinksEnabled:(0,r.ix)(a.NU)}}},68988:(e,t,n)=>{n.d(t,{A4:()=>a.A4,C7:()=>a.C7,J0:()=>a.J0,MI:()=>a.MI,Vg:()=>a.Vg,YW:()=>a.YW,_e:()=>r._,cv:()=>a.cv,kq:()=>a.kq});var r=n(38063),a=(n(4559),n(33019));n(20851)},20851:(e,t,n)=>{n.d(t,{$R:()=>s,DT:()=>l,J:()=>c,NU:()=>i,UD:()=>o,_0:()=>d,qS:()=>a});var r=(0,n(76756).Bz)("ariaAppUserSettings"),a=function(e){return r(e).localModelsEnabled},o=function(e){return r(e).localModelsEnabledPending},i=function(e){return r(e).sourceLinksEnabled},s=function(e){return r(e).darkThemeEnabled},c=function(e){return r(e).selectedLocalModel},l=function(e){return r(e).localModelsChangedByUser},d=function(e){return r(e).writingModeShortcutEnabled}},65540:(e,t,n)=>{n.d(t,{R:()=>a.R,d:()=>r.d});var r=n(81421),a=n(99715)},81421:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(67294),a=n(50533),o=n(1700),i=function(){var e=(0,a.I0)();return{setAriaVoiceState:(0,r.useCallback)((function(t){e((0,o.d)(t))}),[e])}}},99715:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(76756),a=n(67458),o=function(){return{ariaVoiceState:(0,r.ix)(a.T)}}},36012:(e,t,n)=>{n.d(t,{R_:()=>r.R,az:()=>a.a,dQ:()=>r.d});n(1700);var r=n(65540),a=n(49180);n(67458)},64825:(e,t,n)=>{n.d(t,{I:()=>r.I});var r=n(55241)},55241:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(76756),a=n(23586);function o(){var e=(0,r.ix)(a.bsc);return{fetchedCloudModels:e,checkIfExistInRegistry:function(t){return!!t&&e.some((function(e){return e.name===t}))}}}},19484:(e,t,n)=>{n.d(t,{It:()=>a.I,WM:()=>o.W,bs:()=>i.b,cW:()=>r.c,uJ:()=>r.u});var r=n(65515),a=n(64825),o=n(30694),i=n(29016)},70026:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)();return{setChatContext:(0,a.useCallback)((function(t){e((0,o.GSX)(t))}),[e]),clearChatContext:(0,a.useCallback)((function(t){e((0,o.O_$)(t))}),[e])}}},22492:(e,t,n)=>{n.d(t,{h:()=>a.h,t:()=>r.t});var r=n(48413),a=n(76966)},48413:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,r.TL)(),t=(0,a.useCallback)((function(){e((0,o.us$)())}),[e]),n=(0,a.useCallback)((function(t){e((0,o.NkU)(t))}),[e]);return{clearFeedbackState:t,handleSaveFeedback:(0,a.useCallback)((function(){e(o.d0z.request())}),[e]),setFeedbackData:n}}},76966:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(76756),a=n(15262),o=function(){return{feedbackData:(0,r.ix)(a.uR),saveFeedbackLoading:(0,r.ix)(a.iG),saveFeedbackSuccessful:(0,r.ix)(a.ys)}}},40048:(e,t,n)=>{n.d(t,{BW:()=>o.B,Nk:()=>r.Nk,d0:()=>r.d0,hs:()=>a.h,tk:()=>a.t,uR:()=>i.uR,us:()=>r.us});var r=n(16087),a=n(22492),o=n(19776),i=n(15262)},79577:(e,t,n)=>{n.d(t,{$u:()=>u,A2:()=>c,BB:()=>d,P:()=>a,Rr:()=>s,ZC:()=>l,fX:()=>i,mX:()=>o,oh:()=>f});var r=n(91757),a=(0,r.createAction)("CLEAR_HIGHLIGHTS")(),o=(0,r.createAction)("CLEAR_REUSABLE_HIGHLIGHTS")(),i=(0,r.createAction)("SET_HIGHLIGHT")(),s=(0,r.createAction)("SET_RENDER_HIGHLIGHTS_READY")(),c=(0,r.createAction)("REMOVE_HIGHLIGHT")(),l=(0,r.createAction)("REUSE_HIGHLIGHT")(),d=(0,r.createAction)("REMOVE_REUSABLE_HIGHLIGHT")(),u=(0,r.createAction)("REPHRASE_HIGHLIGHT")(),f=(0,r.createAction)("SET_REPHRASE_MESSAGE_PATCH")()},19755:(e,t,n)=>{n.d(t,{WG:()=>s.W,bC:()=>o.b,kG:()=>i.k,lU:()=>a.l,ok:()=>c.o,uE:()=>r.u});var r=n(60148),a=n(55888),o=n(8583),i=n(16663),s=n(69345),c=n(47771)},92616:(e,t,n)=>{n.d(t,{$u:()=>r.$u,A2:()=>r.A2,BB:()=>r.BB,E3:()=>a.E,EP:()=>o.EP,P:()=>r.P,QP:()=>o.QP,Rr:()=>r.Rr,WG:()=>i.WG,Xe:()=>o.Xe,ZC:()=>r.ZC,bC:()=>i.bC,bh:()=>o.bh,fX:()=>r.fX,kG:()=>i.kG,lU:()=>i.lU,mX:()=>r.mX,oX:()=>o.oX,oh:()=>r.oh,ok:()=>i.ok,uE:()=>i.uE});var r=n(79577),a=n(10664),o=n(56696),i=n(19755)},83544:(e,t,n)=>{n.d(t,{$u:()=>o.$u,A2:()=>o.A2,B9:()=>c.B9,BB:()=>o.BB,Cg:()=>i.Cg,EP:()=>o.EP,ES:()=>r.E,Fu:()=>d.Fu,GS:()=>l.GS,Gg:()=>i.Gg,HW:()=>f.HW,It:()=>p.It,J7:()=>d.J7,KH:()=>c.KH,L6:()=>c.L6,My:()=>f.My,Nk:()=>u.Nk,Nq:()=>a.dQ,O_:()=>l.O_,P:()=>o.P,QP:()=>o.QP,Qc:()=>d.Qc,R_:()=>a.R_,Rr:()=>o.Rr,Uw:()=>f.Uw,WG:()=>o.WG,Xe:()=>o.Xe,Z8:()=>f.Z8,ZC:()=>o.ZC,aG:()=>l.aG,bC:()=>o.bC,bh:()=>o.bh,bs:()=>p.bs,cW:()=>p.cW,co:()=>l.co,d0:()=>u.d0,dQ:()=>i.dQ,eg:()=>s.eg,fX:()=>o.fX,hs:()=>u.hs,jg:()=>d.jg,k0:()=>d.k0,kG:()=>o.kG,kg:()=>i.kg,lU:()=>o.lU,mX:()=>o.mX,oX:()=>o.oX,oh:()=>o.oh,ok:()=>o.ok,pw:()=>f.pw,tk:()=>u.tk,uE:()=>o.uE,uJ:()=>p.uJ,uR:()=>u.uR,us:()=>u.us,wF:()=>f.wF,xW:()=>d.xW});var r=n(78075),a=n(36012),o=n(92616),i=n(58391),s=n(91117),c=n(697),l=n(83648),d=n(42638),u=n(40048),f=n(58109),p=n(19484)},94235:(e,t,n)=>{n.d(t,{B:()=>a.B,L:()=>r.L});var r=n(11218),a=n(30519)},30519:(e,t,n)=>{n.d(t,{B:()=>o});var r=n(76756),a=n(42130),o=function(){var e=(0,r.rg)().currentWindowId;return{newConversationRequest:(0,r.ix)((0,a.p)(e))}}},697:(e,t,n)=>{n.d(t,{B9:()=>a.B,KH:()=>o.K,L6:()=>a.L,X_:()=>r.X});var r=n(94311),a=n(94235),o=n(44946)},42130:(e,t,n)=>{n.d(t,{p:()=>a});var r=(0,n(76756).Bz)("ariaChatMessaging"),a=function(e){return function(t){return r(t).newConversationRequest[e]}}},35871:(e,t,n)=>{n.d(t,{G:()=>a.G,k:()=>r.k});var r=n(6949),a=n(91178)},91178:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(76756),a=n(47239),o=function(){return{isSiaEnabled:(0,r.ix)(a.q),siaPolicyUpdateImpressionTimestamp:(0,r.ix)(a.b)}}},58391:(e,t,n)=>{n.d(t,{Cg:()=>r.C,Gg:()=>a.G,XM:()=>o.X,dQ:()=>r.d,kg:()=>a.k});var r=n(52652),a=n(35871),o=n(48308);n(47239)},55980:(e,t,n)=>{n.d(t,{$I:()=>u,FG:()=>b,Is:()=>s,Iy:()=>p,Kd:()=>o,Kv:()=>x,T2:()=>h,Y7:()=>c,ap:()=>m,bx:()=>l,cg:()=>f,co:()=>d,fZ:()=>v,i7:()=>g,sP:()=>a,vF:()=>i});var r=n(91757),a=(0,r.createAction)("ADD_CLI_ARIA_MESSAGE_TASK")(),o=(0,r.createAction)("CLI_CLEAR")(),i=(0,r.createAction)("REMOVE_CLI_SET_ARIA_MESSAGE_TASK")(),s=(0,r.createAction)("CLI_SET_ARIA_MESSAGE")(),c=(0,r.createAction)("CLI_SET_CONVERSATION")(),l=(0,r.createAction)("CLI_SET_CONVERSATION_ID")(),d=(0,r.createAction)("CLI_SET_USER_MESSAGE")(),u=(0,r.createAction)("CLI_SET_USER_QUERY")(),f=(0,r.createAction)("CLI_SAVE_USER_QUERY_IN_HISTORY")(),p=(0,r.createAction)("CLI_SET_VISIBLE")(),h=(0,r.createAction)("SET_CLI_HINTS_VISIBLE")(),m=(0,r.createAction)("CLI_SET_IS_OPENED_WITH_TAB_ORGANIZE")(),v=(0,r.createAction)("CLI_SET_IS_OPENED_WITH_KEYBOARD_SHORTCUT")(),g=(0,r.createAction)("CLI_SET_TAB_ORGANIZE_TASK_STATE")(),x=(0,r.createAction)("SET_SAVED_PROMPT_NON_LOGGED_IN_REQUEST")(),b=((0,r.createAction)("CLI_SET_SELECTED_WRITING_MODE")(),(0,r.createAction)("SET_CLI_SERVER_CONVERSATION_ID_CHANGED")())},13294:(e,t,n)=>{n.d(t,{Dq:()=>o.Dq,JV:()=>o.JV,Kd:()=>r.Kd,L1:()=>o.L1,L4:()=>o.L4,Me:()=>a.M,TB:()=>o.TB,UJ:()=>o.UJ,_l:()=>o._l,a1:()=>o.a1,a4:()=>o.a4,bt:()=>o.bt,cb:()=>o.cb,fF:()=>o.fF,kN:()=>o.kN,mu:()=>o.mu,pK:()=>a.p,v3:()=>o.v3,yN:()=>o.yN});var r=n(55980),a=n(21790),o=(n(43159),n(53627))},36468:(e,t,n)=>{n.d(t,{Ch:()=>r.C,Dq:()=>a.Dq,JV:()=>a.JV,Kd:()=>a.Kd,L1:()=>a.L1,L4:()=>a.L4,LC:()=>o.LC,M2:()=>i.M2,M6:()=>i.M6,MO:()=>i.MO,Me:()=>a.Me,TB:()=>a.TB,TJ:()=>i.TJ,UJ:()=>a.UJ,Vr:()=>i.Vr,X3:()=>s.X3,Yw:()=>i.Yw,Zo:()=>s.Zo,_l:()=>a._l,a1:()=>a.a1,a4:()=>a.a4,b0:()=>i.b0,bY:()=>i.bY,bt:()=>a.bt,bx:()=>i.bx,cb:()=>a.cb,fF:()=>a.fF,hR:()=>i.hR,kN:()=>a.kN,mu:()=>a.mu,pK:()=>a.pK,pq:()=>o.pq,uC:()=>i.uC,v3:()=>a.v3,yN:()=>a.yN});var r=n(77961),a=n(13294),o=n(55936),i=n(76194),s=(n(99145),n(52220),n(59120))},21063:(e,t,n)=>{n.d(t,{X:()=>r.X});var r=n(16240);n(30335)},16240:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(76756),a=n(68528),o=n(39157),i=function(){var e=(0,r.ix)(a.I);return{cliMode:e,mainModeEnabled:e===o.E.main,pageContextEnabled:e===o.E.pageContext,writingModeEnabled:e===o.E.writingMode}}},59120:(e,t,n)=>{n.d(t,{X3:()=>a.X,Zo:()=>r.Zo});var r=n(68881),a=n(21063);n(71681),n(68528)},88948:(e,t,n)=>{n.d(t,{b:()=>r.b,s:()=>a.b});var r=n(98684),a=n(4261)},98684:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(76756),a=n(67294),o=n(23586),i=function(){var e=(0,o.RCK)().authUserDetails,t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,o.MOf)(e))}),[t]),i=(0,a.useCallback)((function(e){t((0,o.VrG)(e))}),[t]),s=(0,a.useCallback)((function(e){t((0,o.hRt)(e))}),[t]),c=(0,a.useCallback)((function(e){t((0,o.uCM)(e))}),[t]);return{setPageContextHintsVisible:n,setIsPageContextDisclaimerAcknowledged:i,setPageContextData:s,setPageContextQueryHistory:(0,a.useCallback)((function(n){var r;t((0,o.TJx)({userEmail:null!==(r=null==e?void 0:e.email)&&void 0!==r?r:"",query:n}))}),[null==e?void 0:e.email,t]),setPageContent:c}}},4261:(e,t,n)=>{n.d(t,{b:()=>o});var r=n(76756),a=n(23586),o=function(){var e,t=(0,a.RCK)().authUserDetails,n=(0,r.ix)(a.bx1),o=(0,r.ix)(a.Yw1),i=(0,r.ix)(a.M2z),s=o.url,c=o.title,l=o.pageContent;return{isPageContextDisclaimerAcknowledged:n,pageContextData:o,pageContextHintsVisible:i,pageContextUserQueryHistory:(0,r.ix)((0,a.M6B)(null!==(e=null==t?void 0:t.email)&&void 0!==e?e:"")),pageContent:l,pageTitle:c,pageUrl:s}}},76194:(e,t,n)=>{n.d(t,{M2:()=>o.M2,M6:()=>o.M6,MO:()=>r.MO,TJ:()=>r.TJ,Vr:()=>r.Vr,Yw:()=>o.Yw,b0:()=>a.b,bY:()=>a.s,bx:()=>o.bx,hR:()=>r.hR,uC:()=>r.uC});var r=n(24448),a=n(88948),o=(n(71689),n(3046))},30273:(e,t,n)=>{n.d(t,{ST:()=>a.ST,Yj:()=>r.Y,ZH:()=>a.ZH,af:()=>a.af,cd:()=>a.cd,cp:()=>o.c,d3:()=>a.d3,nr:()=>o.n,uP:()=>a.uP});var r=n(10769),a=(n(98536),n(51835)),o=n(64897);n(80571)},46357:(e,t,n)=>{n.d(t,{eo:()=>o.e,nT:()=>a.nT,xn:()=>a.xn,y0:()=>r.y,zL:()=>a.zL});var r=n(44084),a=n(63812),o=n(5983)},23586:(e,t,n)=>{n.d(t,{$ue:()=>o.$u,A2l:()=>o.A2,A4D:()=>a.A4,B9q:()=>o.B9,BBh:()=>o.BB,C$7:()=>r.C$,C7C:()=>a.C7,CgJ:()=>o.Cg,Chu:()=>c.Ch,Dps:()=>r.Dp,Dqy:()=>c.Dq,Dyq:()=>a.Dy,EPM:()=>o.EP,ESZ:()=>o.ES,FLN:()=>a.FL,FQG:()=>a.FQ,Fuj:()=>o.Fu,GSX:()=>o.GS,GgQ:()=>o.Gg,Gsb:()=>a.Gs,HWD:()=>o.HW,HhX:()=>r.Hh,HkR:()=>a.Hk,Hqn:()=>r.Hq,I0D:()=>r.I0,Itl:()=>o.It,J0e:()=>a.J0,J7o:()=>o.J7,JV6:()=>c.JV,Kd2:()=>c.Kd,L1I:()=>c.L1,L4c:()=>c.L4,L6l:()=>o.L6,LFT:()=>r.LF,M2z:()=>c.M2,M6B:()=>c.M6,MII:()=>a.MI,MOf:()=>c.MO,Mel:()=>c.Me,Myq:()=>o.My,ND1:()=>a.ND,NkU:()=>o.Nk,O_$:()=>o.O_,OsJ:()=>a.Os,PaA:()=>o.P,Pt2:()=>a.Pt,QAE:()=>r.QA,QD0:()=>r.QD,QPz:()=>o.QP,QaV:()=>a.Q,Qck:()=>o.Qc,Qkn:()=>a.Qk,Ql$:()=>a.Ql,RCK:()=>r.RC,R_9:()=>o.R_,Rrh:()=>o.Rr,S69:()=>a.S6,TB7:()=>c.TB,TJx:()=>c.TJ,UJK:()=>c.UJ,Uwy:()=>o.Uw,VGT:()=>a.VG,Vgz:()=>a.Vg,VrG:()=>c.Vr,WGj:()=>o.WG,X36:()=>c.X3,XVe:()=>a.XV,XeE:()=>o.Xe,YWL:()=>a.YW,YZY:()=>a.YZ,YjF:()=>i.Yj,Yw1:()=>c.Yw,Z8D:()=>o.Z8,ZCt:()=>o.ZC,_4k:()=>r._4,_gZ:()=>a._g,_lj:()=>c._l,a1r:()=>c.a1,a49:()=>c.a4,aGe:()=>o.aG,af2:()=>i.af,b0J:()=>c.b0,bCg:()=>o.bC,bYW:()=>c.bY,bhD:()=>o.bh,bsc:()=>o.bs,bt_:()=>c.bt,bx1:()=>c.bx,cWx:()=>o.cW,cby:()=>c.cb,coc:()=>o.co,cpB:()=>i.cp,cvO:()=>r.cv,cvs:()=>a.cv,d0z:()=>o.d0,d3f:()=>i.d3,dQK:()=>o.dQ,dQQ:()=>o.Nq,ek:()=>a.ek,eo9:()=>s.eo,fFO:()=>c.fF,fXj:()=>o.fX,fvp:()=>a.fv,hRt:()=>c.hR,hsz:()=>o.hs,iBZ:()=>a.iB,izr:()=>r.iz,jA1:()=>a.jA,jNK:()=>a.jN,jgP:()=>o.jg,k0X:()=>o.k0,kGW:()=>o.kG,kN6:()=>c.kN,kgU:()=>o.kg,kq0:()=>a.kq,lUI:()=>o.lU,ljr:()=>a.lj,ln5:()=>a.ln,mXV:()=>o.mX,mum:()=>c.mu,nHi:()=>a.nH,nT6:()=>s.nT,nrG:()=>i.nr,oXt:()=>o.oX,ohC:()=>o.oh,oiy:()=>a.oi,okl:()=>o.ok,pKK:()=>c.pK,pb4:()=>a.pb,pws:()=>o.pw,qeR:()=>a.qe,snu:()=>a.sn,tkH:()=>o.tk,uCM:()=>c.uC,uEF:()=>o.uE,uJR:()=>o.uJ,uP4:()=>i.uP,uoF:()=>r.uo,us$:()=>o.us,uyU:()=>r.uy,v3S:()=>c.v3,wFS:()=>o.wF,x8b:()=>r.x8,xUq:()=>r.xU,xWE:()=>o.xW,yN4:()=>c.yN,zLZ:()=>s.zL});n(60772);var r=n(6882),a=n(52452),o=n(83544),i=n(30273),s=n(46357),c=n(36468)},31372:(e,t,n)=>{n.d(t,{CI:()=>a.CI,Cm:()=>a.Cm,VV:()=>a.VV,Y3:()=>a.Y3,YS:()=>a.YS,hG:()=>a.hG,kk:()=>r.k});var r=n(82414),a=(n(28248),n(26382))},41807:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"@keyframes inputJump {\n  0% {\n    transform: scale(100%);\n  }\n  50% {\n    transform: scale(96%);\n  }\n  100% {\n    transform: scale(100%);\n  }\n}\n\n@keyframes inputDustOpacityStart {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 100%;\n  }\n}\n\n@keyframes inputDustOpacityEnd {\n  0% {\n    opacity: 100%;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes inputDustScaleUp {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes inputSidebarDustScaleUp {\n  0% {\n    transform: translate(-50%, -50%) scale(0);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n@keyframes scale-in {\n  0% {\n    opacity: 0;\n    transform-origin: top left;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 1;\n    transform-origin: top left;\n    transform: scale(1);\n  }\n}\n\n@keyframes appear {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes typing {\n  from {\n    max-width: 0;\n  }\n  to {\n    max-width: 100%;\n  }\n}\n\n@keyframes blink {\n  50% {\n    opacity: 0;\n  }\n}\n\n.input-animation-wrapper.active .input-wrapper {\n  animation: inputJump 0.4s ease-in-out;\n  position: relative;\n  z-index: 2;\n}\n\n.input-animation-wrapper .gradient-wrapper {\n  opacity: 0;\n  position: relative;\n  transform: translateY(-25px);\n  z-index: 1;\n}\n\n.input-animation-wrapper.active .gradient-wrapper {\n  animation: cubic-bezier(0.61, 1, 0.88, 1), cubic-bezier(0.22, 1, 0.36, 1);\n  animation-duration: 0.1s, 1.25s;\n  animation-name: inputDustOpacityStart, inputDustOpacityEnd;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient {\n  position: absolute;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(1) {\n  left: var(--input-animation-position-orange-left);\n  top: var(--input-animation-position-orange-top);\n  transform: translateY(var(--input-animation-position-orange-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(2) {\n  left: var(--input-animation-position-pink-left);\n  top: var(--input-animation-position-pink-top);\n  transform: translateY(var(--input-animation-position-pink-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(3) {\n  left: var(--input-animation-position-purple-left);\n  top: var(--input-animation-position-purple-top);\n  transform: translateY(var(--input-animation-position-purple-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(4) {\n  left: var(--input-animation-position-green-left);\n  top: var(--input-animation-position-green-top);\n  transform: translateY(var(--input-animation-position-green-top)) scale(0);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(1) {\n  animation-duration: var(--input-animation-duration-orange);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(2) {\n  animation-duration: var(--input-animation-duration-pink);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(3) {\n  animation-duration: var(--input-animation-duration-purple);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(4) {\n  animation-duration: var(--input-animation-duration-green);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient {\n  animation: cubic-bezier(0.22, 1, 0.36, 1);\n  animation-name: inputSidebarDustScaleUp;\n}\n",""]);const s=i},29403:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,".SoGJRn3mWHqzjIkElDNO::-moz-selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.SoGJRn3mWHqzjIkElDNO,\n.SoGJRn3mWHqzjIkElDNO::selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.V9JCZCXVouXlgmVd36dA {\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) -4px;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 4px;\n}\n\n.SoGJRn3mWHqzjIkElDNO._tpqmaR6UqvrbPkEZC2b {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-1);\n}\n\n.SoGJRn3mWHqzjIkElDNO.po4tXK2v_MrBqBs9b5TV {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-2);\n}\n\n.SoGJRn3mWHqzjIkElDNO.DiqR_MGM63AscFTkv9OB {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-3);\n}\n\n@keyframes hE4aZy8Cmm1yuDbmDjg7 {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n  50% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-end);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF,\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n@keyframes nSzK7pZkWNSIX3JTVjxj {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-end);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk,\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n",""]),i.locals={highlighter:"SoGJRn3mWHqzjIkElDNO",highlighterLinkified:"V9JCZCXVouXlgmVd36dA",custom1:"_tpqmaR6UqvrbPkEZC2b",custom2:"po4tXK2v_MrBqBs9b5TV",custom3:"DiqR_MGM63AscFTkv9OB",rephraseStart:"wBZlFP6W8EbH02KmqHzF",blinkingBackground:"hE4aZy8Cmm1yuDbmDjg7",rephraseEnd:"dZnLVyMbu529eUNWUoOk",fadeOutBackground:"nSzK7pZkWNSIX3JTVjxj"};const s=i},7134:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"/**\n * TODO: Please do unification of markdown styles and variables like below with\n * chatbot styles in separate change \n */\n.prompt-studio-output .markdown table a {\n  background-color: var(--opera-chatbot-table-link-bg);\n}\n.prompt-studio-output .markdown .table-wrapper {\n  margin: 24px 0;\n  overflow-x: auto;\n  overflow-y: hidden;\n  padding-block-end: 4px;\n}\n.prompt-studio-output .markdown .table-wrapper::-webkit-scrollbar {\n  height: 6px;\n}\n.prompt-studio-output .markdown table {\n  border-radius: 16px;\n  background: transparent;\n  border-collapse: separate;\n  border-spacing: 1px;\n  width: 100%;\n  overflow: hidden;\n  overflow-wrap: break-word;\n}\n.prompt-studio-output .markdown table th {\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 20px;\n}\n.prompt-studio-output .markdown table td,\n.prompt-studio-output .markdown table th {\n  padding: 8px;\n  background-color: var(--opera-chatbot-table-bg);\n}\n",""]);const s=i}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=85,o.p="",(()=>{o.b=document.baseURI||self.location.href;var e={85:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self.webpackChunkaria_extension=self.webpackChunkaria_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[216,592],(()=>o(54692)));i=o.O(i)})();